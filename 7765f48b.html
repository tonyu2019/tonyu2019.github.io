<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.1.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/56x56logo.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/56x56logo.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/images/400x400logo.png" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"><script class="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"www.diandian100.cn",root:"/",scheme:"Gemini",version:"8.0.0",exturl:!0,sidebar:{position:"left",display:"always",padding:18,offset:12},copycode:!0,bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!0,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"fadeInDown",post_body:"fadeInDown",coll_header:"fadeInLeft",sidebar:"fadeInUp"}},prism:!1,i18n:{placeholder:"搜索...",empty:"没有找到任何搜索结果：${query}",hits_time:"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）",hits:"找到 ${hits} 个搜索结果"},path:"search.xml",localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1}}</script><meta name="description" content="序列化的作用就是进行数据校验，对数据对象进行转换的过程，其核心原理就是讲数据库数据序列化为前端所需要的格式并返回；将前端发送的数据反序列化为模型类对象，并保存在数据库中。"><meta property="og:type" content="article"><meta property="og:title" content="手摸手，带你用Django REST Framework撸接口系列二(序列化器篇)"><meta property="og:url" content="https://www.diandian100.cn/7765f48b.html"><meta property="og:site_name" content="点点开发技术分享"><meta property="og:description" content="序列化的作用就是进行数据校验，对数据对象进行转换的过程，其核心原理就是讲数据库数据序列化为前端所需要的格式并返回；将前端发送的数据反序列化为模型类对象，并保存在数据库中。"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2021-02-01T09:39:32.000Z"><meta property="article:modified_time" content="2021-03-29T06:08:59.000Z"><meta property="article:author" content="托小尼"><meta property="article:tag" content="权限"><meta property="article:tag" content="认证"><meta property="article:tag" content="频率"><meta property="article:tag" content="Django REST Framework系列"><meta property="article:tag" content="分页"><meta property="article:tag" content="django"><meta property="article:tag" content="python"><meta property="article:tag" content="排序"><meta property="article:tag" content="drf"><meta property="article:tag" content="rest"><meta property="article:tag" content="restframework"><meta property="article:tag" content="rest_framework"><meta property="article:tag" content="djangorestframework"><meta property="article:tag" content="前后端分离"><meta property="article:tag" content="前后端不分离"><meta property="article:tag" content="restful"><meta property="article:tag" content="序列化"><meta property="article:tag" content="反序列化"><meta property="article:tag" content="serializer"><meta property="article:tag" content="序列化器"><meta property="article:tag" content="视图"><meta property="article:tag" content="响应器"><meta property="article:tag" content="路由组件"><meta property="article:tag" content="限流"><meta property="article:tag" content="过滤"><meta property="article:tag" content="异常处理"><meta property="article:tag" content="生成接口"><meta property="article:tag" content="python开发技巧"><meta property="article:tag" content="django开发技巧"><meta property="article:tag" content="Django REST framework"><meta property="article:tag" content="序列化source"><meta property="article:tag" content="SerializerMethodField"><meta property="article:tag" content="PrimaryKeyRelatedField"><meta property="article:tag" content="StringRelatedField"><meta property="article:tag" content="HyperlinkRelatedField"><meta property="article:tag" content="SlugRelatedField"><meta property="article:tag" content="关联对象序列化器"><meta property="article:tag" content="自动化连表"><meta property="article:tag" content="字段级验证"><meta property="article:tag" content="对象级别验证"><meta property="article:tag" content="验证器"><meta property="article:tag" content="重写update"><meta property="article:tag" content="重写create"><meta property="article:tag" content="动态加载序列化器"><meta name="twitter:card" content="summary"><link rel="canonical" href="https://www.diandian100.cn/7765f48b.html"><script class="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>手摸手，带你用Django REST Framework撸接口系列二(序列化器篇) | 点点开发技术分享</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3b57832214417f66931e694d19fd60b9";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>body{margin-top:2rem}.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header,.use-motion .sidebar{visibility:visible}.use-motion .footer,.use-motion .header,.use-motion .site-brand-container .toggle{opacity:initial}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line{transform:scaleX(1)}.search-pop-overlay,.sidebar-nav{display:none}.sidebar-panel{display:block}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">点点开发技术分享</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">记录个人日常开发笔记与技巧</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-development"><a href="/categories/rd/" rel="section"><i class="fa fa-code fa-fw"></i>开发</a></li><li class="menu-item menu-item-frontend"><a href="/categories/fe/" rel="section"><i class="fab fa-html5 fa-fw"></i>前端</a></li><li class="menu-item menu-item-database"><a href="/categories/db/" rel="section"><i class="fa fa-database fa-fw"></i>数据库</a></li><li class="menu-item menu-item-os"><a href="/categories/os/" rel="section"><i class="fab fa-linux fa-fw"></i>系统</a></li><li class="menu-item menu-item-other"><a href="/categories/other/" rel="section"><i class="far fa-paper-plane fa-fw"></i>其他</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><section class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Django-REST-Framework%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0"><span class="nav-number">1.</span> <span class="nav-text">Django REST Framework系列文章</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89serializer"><span class="nav-number">2.</span> <span class="nav-text">定义serializer</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%9A%E4%B9%89%E6%96%B9%E6%B3%95"><span class="nav-number">2.1.</span> <span class="nav-text">定义方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E6%AE%B5%E4%B8%8E%E9%80%89%E9%A1%B9"><span class="nav-number">2.2.</span> <span class="nav-text">字段与选项</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B"><span class="nav-number">2.2.1.</span> <span class="nav-text">常用字段类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E9%A1%B9%E5%8F%82%E6%95%B0"><span class="nav-number">2.2.2.</span> <span class="nav-text">选项参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E7%94%A8%E5%8F%82%E6%95%B0"><span class="nav-number">2.2.3.</span> <span class="nav-text">通用参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BASerializer%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.3.</span> <span class="nav-text">创建Serializer对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%89%8D%E6%8F%90%E5%87%86%E5%A4%87"><span class="nav-number">3.</span> <span class="nav-text">前提准备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">4.</span> <span class="nav-text">序列化的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E5%9F%BA%E6%9C%AC%E6%95%B0%E6%8D%AE"><span class="nav-number">4.1.</span> <span class="nav-text">序列化基本数据</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E5%8D%95%E6%9D%A1%E6%95%B0%E6%8D%AE"><span class="nav-number">4.1.1.</span> <span class="nav-text">序列化单条数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E5%A4%9A%E6%9D%A1%E6%95%B0%E6%8D%AE"><span class="nav-number">4.1.2.</span> <span class="nav-text">序列化多条数据</span></a></li><li class="nav-item nav-level-4"><a class="nav-link"><span class="nav-number">4.1.3.</span> <span class="nav-text"></span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SerializerMethodField"><span class="nav-number">4.2.</span> <span class="nav-text">SerializerMethodField</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8C%87%E5%AE%9Asource%E6%9D%A5%E6%BA%90"><span class="nav-number">4.3.</span> <span class="nav-text">指定source来源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B3%E8%81%94%E5%AF%B9%E8%B1%A1%E5%B5%8C%E5%A5%97%E5%BA%8F%E5%88%97%E5%8C%96"><span class="nav-number">4.4.</span> <span class="nav-text">关联对象嵌套序列化</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#PrimaryKeyRelatedField"><span class="nav-number">4.4.1.</span> <span class="nav-text">PrimaryKeyRelatedField</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#StringRelatedField"><span class="nav-number">4.4.2.</span> <span class="nav-text">StringRelatedField</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#HyperlinkedRelatedField"><span class="nav-number">4.4.3.</span> <span class="nav-text">HyperlinkedRelatedField</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SlugRelatedField"><span class="nav-number">4.4.4.</span> <span class="nav-text">SlugRelatedField</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E5%85%B3%E8%81%94%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8"><span class="nav-number">4.4.5.</span> <span class="nav-text">使用关联对象的序列化器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%B1%E5%BA%A6%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%9E%E8%A1%A8"><span class="nav-number">5.</span> <span class="nav-text">深度自动化连表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E6%8D%AE%E9%AA%8C%E8%AF%81"><span class="nav-number">6.</span> <span class="nav-text">数据验证</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E6%AE%B5%E7%BA%A7%E5%88%AB%E9%AA%8C%E8%AF%81-Field-level-validation"><span class="nav-number">6.1.</span> <span class="nav-text">字段级别验证 (Field-level validation)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E7%BA%A7%E5%88%AB%E9%AA%8C%E8%AF%81-Object-level-validation"><span class="nav-number">6.2.</span> <span class="nav-text">对象级别验证 (Object-level validation)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E5%99%A8-Validators"><span class="nav-number">6.3.</span> <span class="nav-text">验证器 (Validators)</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%86%99%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8%E7%9A%84create%E5%92%8Cupdate%E6%96%B9%E6%B3%95"><span class="nav-number">7.</span> <span class="nav-text">重写序列化器的create和update方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8%E7%B1%BB"><span class="nav-number">8.</span> <span class="nav-text">动态加载序列化器类</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E7%BB%93"><span class="nav-number">9.</span> <span class="nav-text">小结</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%82%E8%80%83"><span class="nav-number">10.</span> <span class="nav-text">参考</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Django-REST-Framework%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0"><span class="nav-number">11.</span> <span class="nav-text">Django REST Framework系列文章</span></a></li></ol></div></section><section class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="托小尼" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">托小尼</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">218</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">30</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">1439</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cDovL3dwYS5xcS5jb20vbXNncmQ/dj0zJnVpbj02NDY1NDc5ODkmc2l0ZT1xcSZtZW51PXllcw==" title="QQ → http:&#x2F;&#x2F;wpa.qq.com&#x2F;msgrd?v&#x3D;3&amp;uin&#x3D;646547989&amp;site&#x3D;qq&amp;menu&#x3D;yes"><i class="fab fa-qq fa-fw"></i>QQ</span> </span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOnRvbnl5dUB2aXAucXEuY29t" title="E-Mail → mailto:tonyyu@vip.qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span></span></div></section></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Rvbnl1MjAxOQ==" title="关注我" aria-label="关注我"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.diandian100.cn/7765f48b.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="托小尼"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="点点开发技术分享"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">手摸手，带你用Django REST Framework撸接口系列二(序列化器篇)</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-02-01 17:39:32" itemprop="dateCreated datePublished" datetime="2021-02-01T17:39:32+08:00">2021-02-01</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2021-03-29 14:08:59" itemprop="dateModified" datetime="2021-03-29T14:08:59+08:00">2021-03-29</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/rd/" itemprop="url" rel="index"><span itemprop="name">rd</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/rd/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/rd/python/django/" itemprop="url" rel="index"><span itemprop="name">django</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/rd/python/django/drf/" itemprop="url" rel="index"><span itemprop="name">drf</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Changyan：</span> <a title="changyan" href="/7765f48b.html#SOHUCS" itemprop="discussionUrl"><span id="changyan_count_unit" class="post-comments-count hc-comment-count" data-xid="7765f48b.html" itemprop="commentCount"></span></a></span></div><div class="post-meta"><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>40k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>37 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>序列化的作用就是进行数据校验，对数据对象进行转换的过程，其核心原理就是讲数据库数据序列化为前端所需要的格式并返回；将前端发送的数据反序列化为模型类对象，并保存在数据库中。</p><a id="more"></a><div class="note success"><h2 id="Django-REST-Framework系列文章"><a href="#Django-REST-Framework系列文章" class="headerlink" title="Django REST Framework系列文章"></a>Django REST Framework系列文章</h2><ul><li><a href="https://www.diandian100.cn/717404f2.html">手摸手，带你用Django REST Framework撸接口系列一(基础篇)</a></li><li><a href="https://www.diandian100.cn/7765f48b.html">手摸手，带你用Django REST Framework撸接口系列二(序列化器篇)</a></li><li><a href="https://www.diandian100.cn/c33bd528.html">手摸手，带你用Django REST Framework撸接口系列三(视图篇)</a></li><li><a href="https://www.diandian100.cn/6d74bf0a.html">手摸手，带你用Django REST Framework撸接口系列四(渲染器篇)</a></li><li><a href="https://www.diandian100.cn/9fb08350.html">手摸手，带你用Django REST Framework撸接口系列五(路由篇)</a></li><li><a href="https://www.diandian100.cn/cfeb81d4.html">手摸手，带你用Django REST Framework撸接口系列六(认证篇)</a></li><li><a href="https://www.diandian100.cn/30a313c8.html">手摸手，带你用Django REST Framework撸接口系列七(权限篇)</a></li><li><a href="https://www.diandian100.cn/76b1e536.html">手摸手，带你用Django REST Framework撸接口系列八(限流篇)</a></li><li><a href="https://www.diandian100.cn/d615aa51.html">手摸手，带你用Django REST Framework撸接口系列九(过滤篇)</a></li><li><a href="https://www.diandian100.cn/dab560a3.html">手摸手，带你用Django REST Framework撸接口系列十(排序篇)</a></li><li><a href="https://www.diandian100.cn/6955468f.html">手摸手，带你用Django REST Framework撸接口系列十一(分页篇)</a></li><li><a href="https://www.diandian100.cn/ddd6b923.html">手摸手，带你用Django REST Framework撸接口系列十二(异常处理篇)</a></li><li><a href="https://www.diandian100.cn/8d2f2935.html">手摸手，带你用Django REST Framework撸接口系列十三(自动生成接口文档篇)</a></li></ul></div><p><strong>需要序列化字段</strong></p><ul><li>在不做任何处理的情况下，我们定义的类里面的字段必须在<code>model</code>类中必须存在该字段</li><li>参与序列化的属性名必须与<code>model</code>类的属性相同</li><li>只出现在序列化中不出现在反序列化中我们要加只读属性<code>read_only=True</code></li><li>如果我们<code>Serializer</code>类中定义字段类型为<code>SerializerMethodField</code>及自定义字段类型不用遵守类里面的字段必须在<code>model</code>类中必须存在该字段</li></ul><p><strong>不需要序列化字段</strong></p><ul><li>不需要序列化的属性字段在序列化类中不需要声明</li><li>不需要序列化的属性字段在序列化类中设置只写属性<code>write_only=True</code></li></ul><p>在开发REST API的视图中，虽然每个视图具体操作的数据不同，但增、删、改、查的实现流程基本套路化，所以这部分代码也是可以复用简化编写的：</p><p>增：校验请求数据 -&gt; 执行反序列化过程 -&gt; 保存数据库 -&gt; 将保存的对象序列化并返回</p><p>删：判断要删除的数据是否存在 -&gt; 执行数据库删除</p><p>改：判断要修改的数据是否存在 -&gt; 校验请求的数据 -&gt; 执行反序列化过程 -&gt; 保存数据库 -&gt; 将保存的对象序列化并返回</p><p>查：查询数据库 -&gt; 将数据序列化并返回</p><p><strong>不同情况下用的序列化方法</strong></p><ul><li>单表：最简单定义<code>fileds</code>字段</li><li><code>ForeignKey</code>：基于<code>source</code>参数链表操作</li><li><code>ManyToManyField</code>：基于<code>SerializerMethodField</code>+自定义一个钩子方法。</li></ul><p>注意：<code>choice</code>显示中文可以使用<code>source</code>字段 “<code>get_字段名_display</code>“</p><h2 id="定义serializer"><a href="#定义serializer" class="headerlink" title="定义serializer"></a>定义serializer</h2><h3 id="定义方法"><a href="#定义方法" class="headerlink" title="定义方法"></a>定义方法</h3><p>Django REST framework中的Serializer使用类来定义，须继承自<code>rest_framework.serializers.Serializer</code>。</p><p>例如，我们已有了一个数据库模型类Article</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章模型&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 文章状态</span></span><br><span class="line">    STATUS_CHOICES = (</span><br><span class="line">        (<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;发布&#x27;</span>),</span><br><span class="line">        (<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;草稿&#x27;</span>),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    title = models.CharField(verbose_name=<span class="string">&#x27;标题&#x27;</span>, max_length=<span class="number">90</span>, db_index=<span class="literal">True</span>)</span><br><span class="line">    body = models.TextField(verbose_name=<span class="string">&#x27;内容&#x27;</span>, blank=<span class="literal">True</span>)</span><br><span class="line">    author = models.ForeignKey(User, verbose_name=<span class="string">&#x27;作者&#x27;</span>, on_delete=models.CASCADE, related_name=<span class="string">&#x27;articles&#x27;</span>)</span><br><span class="line">    status = models.CharField(verbose_name=<span class="string">&#x27;状态&#x27;</span>, max_length=<span class="number">1</span>, choices=STATUS_CHOICES, default=<span class="string">&#x27;s&#x27;</span>, null=<span class="literal">True</span>, blank=<span class="literal">True</span>)</span><br><span class="line">    created_time = models.DateTimeField(verbose_name=<span class="string">&#x27;发布日期&#x27;</span>, auto_now_add=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;返回文章标题&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.title</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        <span class="comment"># 排序，主键倒序</span></span><br><span class="line">        ordering = [<span class="string">&#x27;-pk&#x27;</span>]</span><br><span class="line">        verbose_name = <span class="string">&quot;文章&quot;</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br></pre></td></tr></table></figure><p>我们想为这个模型类提供一个序列化器，可以定义如下：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span>(<span class="params">serializers.Serializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章序列化类&quot;&quot;&quot;</span></span><br><span class="line">    id = serializers.IntegerField(label=<span class="string">&#x27;ID&#x27;</span>, read_only=<span class="literal">True</span>)</span><br><span class="line">    title = serializers.CharField(label=<span class="string">&#x27;标题&#x27;</span>)</span><br><span class="line">    body = serializers.CharField(label=<span class="string">&#x27;内容&#x27;</span>)</span><br><span class="line">    author = serializers.CharField(label=<span class="string">&#x27;作者&#x27;</span>)</span><br><span class="line">    status = serializers.CharField(label=<span class="string">&#x27;状态&#x27;</span>)</span><br><span class="line">    created_time = serializers.DateTimeField(label=<span class="string">&#x27;发布时间&#x27;</span>)</span><br></pre></td></tr></table></figure><p>或者还可以创建基于模型的序列化器</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章序列化类&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Article</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        read_only_fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;created_time&#x27;</span>, <span class="string">&#x27;author&#x27;</span>)</span><br></pre></td></tr></table></figure><p><strong>注意：serializer不是只能为数据库模型类定义，也可以为非数据库模型类的数据定义。</strong>serializer是独立于数据库之外的存在。</p><h3 id="字段与选项"><a href="#字段与选项" class="headerlink" title="字段与选项"></a>字段与选项</h3><h4 id="常用字段类型"><a href="#常用字段类型" class="headerlink" title="常用字段类型"></a><strong>常用字段类型</strong></h4><table><thead><tr><th>字段</th><th>字段构造方式</th></tr></thead><tbody><tr><td><strong>BooleanField</strong></td><td>BooleanField()</td></tr><tr><td><strong>NullBooleanField</strong></td><td>NullBooleanField()</td></tr><tr><td><strong>CharField</strong></td><td>CharField(max_length=None, min_length=None, allow_blank=False, trim_whitespace=True)</td></tr><tr><td><strong>EmailField</strong></td><td>EmailField(max_length=None, min_length=None, allow_blank=False)</td></tr><tr><td><strong>RegexField</strong></td><td>RegexField(regex, max_length=None, min_length=None, allow_blank=False)</td></tr><tr><td><strong>SlugField</strong></td><td>SlugField(max<em>length=50, min_length=None, allow_blank=False) 正则字段，验证正则模式 [a-zA-Z0-9</em>-]+</td></tr><tr><td><strong>URLField</strong></td><td>URLField(max_length=200, min_length=None, allow_blank=False)</td></tr><tr><td><strong>UUIDField</strong></td><td>UUIDField(format=’hex_verbose’) format: 1) <code>&#39;hex_verbose&#39;</code> 如<code>&quot;5ce0e9a5-5ffa-654b-cee0-1238041fb31a&quot;</code> 2） <code>&#39;hex&#39;</code> 如 <code>&quot;5ce0e9a55ffa654bcee01238041fb31a&quot;</code> 3）<code>&#39;int&#39;</code> - 如: <code>&quot;123456789012312313134124512351145145114&quot;</code> 4）<code>&#39;urn&#39;</code> 如: <code>&quot;urn:uuid:5ce0e9a5-5ffa-654b-cee0-1238041fb31a&quot;</code></td></tr><tr><td><strong>IPAddressField</strong></td><td>IPAddressField(protocol=’both’, unpack_ipv4=False, **options)</td></tr><tr><td><strong>IntegerField</strong></td><td>IntegerField(max_value=None, min_value=None)</td></tr><tr><td><strong>FloatField</strong></td><td>FloatField(max_value=None, min_value=None)</td></tr><tr><td><strong>DecimalField</strong></td><td>DecimalField(max_digits, decimal_places, coerce_to_string=None, max_value=None, min_value=None) max_digits: 最多位数 decimal_palces: 小数点位置</td></tr><tr><td><strong>DateTimeField</strong></td><td>DateTimeField(format=api_settings.DATETIME_FORMAT, input_formats=None)</td></tr><tr><td><strong>DateField</strong></td><td>DateField(format=api_settings.DATE_FORMAT, input_formats=None)</td></tr><tr><td><strong>TimeField</strong></td><td>TimeField(format=api_settings.TIME_FORMAT, input_formats=None)</td></tr><tr><td><strong>DurationField</strong></td><td>DurationField()</td></tr><tr><td><strong>ChoiceField</strong></td><td>ChoiceField(choices) choices与Django的用法相同</td></tr><tr><td><strong>MultipleChoiceField</strong></td><td>MultipleChoiceField(choices)</td></tr><tr><td><strong>FileField</strong></td><td>FileField(max_length=None, allow_empty_file=False, use_url=UPLOADED_FILES_USE_URL)</td></tr><tr><td><strong>ImageField</strong></td><td>ImageField(max_length=None, allow_empty_file=False, use_url=UPLOADED_FILES_USE_URL)</td></tr><tr><td><strong>ListField</strong></td><td>ListField(child=, min_length=None, max_length=None)</td></tr><tr><td><strong>DictField</strong></td><td>DictField(child=)</td></tr></tbody></table><h4 id="选项参数"><a href="#选项参数" class="headerlink" title="选项参数"></a><strong>选项参数</strong></h4><table><thead><tr><th>参数名称</th><th>作用</th></tr></thead><tbody><tr><td><strong>max_length</strong></td><td>最大长度</td></tr><tr><td><strong>min_lenght</strong></td><td>最小长度</td></tr><tr><td><strong>allow_blank</strong></td><td>是否允许为空</td></tr><tr><td><strong>trim_whitespace</strong></td><td>是否截断空白字符</td></tr><tr><td><strong>max_value</strong></td><td>最小值</td></tr><tr><td><strong>min_value</strong></td><td>最大值</td></tr></tbody></table><h4 id="通用参数"><a href="#通用参数" class="headerlink" title="通用参数"></a>通用参数</h4><table><thead><tr><th>参数名称</th><th>说明</th></tr></thead><tbody><tr><td><strong>read_only</strong></td><td>表明该字段仅用于序列化输出，默认False</td></tr><tr><td><strong>write_only</strong></td><td>表明该字段仅用于反序列化输入，默认False</td></tr><tr><td><strong>required</strong></td><td>表明该字段在反序列化时必须输入，默认True</td></tr><tr><td><strong>default</strong></td><td>反序列化时使用的默认值</td></tr><tr><td><strong>allow_null</strong></td><td>表明该字段是否允许传入None，默认False</td></tr><tr><td><strong>validators</strong></td><td>该字段使用的验证器</td></tr><tr><td><strong>error_messages</strong></td><td>包含错误编号与错误信息的字典</td></tr><tr><td><strong>label</strong></td><td>用于HTML展示API页面时，显示的字段名称</td></tr><tr><td><strong>help_text</strong></td><td>用于HTML展示API页面时，显示的字段帮助提示信息</td></tr></tbody></table><h3 id="创建Serializer对象"><a href="#创建Serializer对象" class="headerlink" title="创建Serializer对象"></a>创建Serializer对象</h3><p>定义好Serializer类后，就可以创建Serializer对象了。</p><p>Serializer的构造方法为：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Serializer(instance=<span class="literal">None</span>, data=empty, **kwarg)</span><br></pre></td></tr></table></figure><p>说明：</p><p>1）用于序列化时，将模型类对象传入<strong>instance</strong>参数</p><p>2）用于反序列化时，将要被反序列化的数据传入<strong>data</strong>参数</p><p>3）除了instance和data参数外，在构造Serializer对象时，还可通过<strong>context</strong>参数额外添加数据，如</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">serializer = AccountSerializer(account, context=&#123;<span class="string">&#x27;request&#x27;</span>: request&#125;)</span><br></pre></td></tr></table></figure><p><strong>通过context参数附加的数据，可以通过Serializer对象的context属性获取。</strong></p><h2 id="前提准备"><a href="#前提准备" class="headerlink" title="前提准备"></a>前提准备</h2><p>我们为了更直观的说明序列器的使用方式，为大家准备好了两个模型和初始的序列化类如下：</p><p>模型：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> User</span><br><span class="line"><span class="keyword">from</span> django.db <span class="keyword">import</span> models</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章模型&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 文章状态</span></span><br><span class="line">    STATUS_CHOICES = (</span><br><span class="line">        (<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;发布&#x27;</span>),</span><br><span class="line">        (<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;草稿&#x27;</span>),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    title = models.CharField(verbose_name=<span class="string">&#x27;标题&#x27;</span>, max_length=<span class="number">90</span>, db_index=<span class="literal">True</span>)</span><br><span class="line">    body = models.TextField(verbose_name=<span class="string">&#x27;内容&#x27;</span>, blank=<span class="literal">True</span>)</span><br><span class="line">    author = models.ForeignKey(User, verbose_name=<span class="string">&#x27;作者&#x27;</span>, on_delete=models.CASCADE, related_name=<span class="string">&#x27;articles&#x27;</span>)</span><br><span class="line">    status = models.CharField(verbose_name=<span class="string">&#x27;状态&#x27;</span>, max_length=<span class="number">1</span>, choices=STATUS_CHOICES, default=<span class="string">&#x27;s&#x27;</span>, null=<span class="literal">True</span>, blank=<span class="literal">True</span>)</span><br><span class="line">    created_time = models.DateTimeField(verbose_name=<span class="string">&#x27;发布日期&#x27;</span>, auto_now_add=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;返回文章标题&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.title</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        <span class="comment"># 排序，主键倒序</span></span><br><span class="line">        ordering = [<span class="string">&#x27;-pk&#x27;</span>]</span><br><span class="line">        verbose_name = <span class="string">&quot;文章&quot;</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>序列化类：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time    : 2021/3/23 17:32</span></span><br><span class="line"><span class="comment"># @Author  : 托小尼</span></span><br><span class="line"><span class="comment"># @Email   : 646547989@qq.com</span></span><br><span class="line"><span class="comment"># @URI     : https://www.diandian100.cn</span></span><br><span class="line"><span class="comment"># @File    : article.py</span></span><br><span class="line"><span class="keyword">from</span> django.contrib.auth.models <span class="keyword">import</span> User</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> api.models <span class="keyword">import</span> Article</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章序列化类&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Article</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        read_only_fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;created_time&#x27;</span>, <span class="string">&#x27;author&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create</span>(<span class="params">self, validated_data</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;返回创建的新文章实例&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> Article.objects.create(**validated_data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">update</span>(<span class="params">self, instance, validated_data</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;更新已有的文章实例并返回&quot;&quot;&quot;</span></span><br><span class="line">        instance.title = validated_data.get(<span class="string">&#x27;title&#x27;</span>, instance.title)</span><br><span class="line">        instance.body = validated_data.get(<span class="string">&#x27;body&#x27;</span>, instance.body)</span><br><span class="line">        instance.status = validated_data.get(<span class="string">&#x27;status&#x27;</span>, instance.status)</span><br><span class="line">        instance.save()</span><br><span class="line">        <span class="keyword">return</span> instance</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;用户序列化类&quot;&quot;&quot;</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = User</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br></pre></td></tr></table></figure><h2 id="序列化的使用"><a href="#序列化的使用" class="headerlink" title="序列化的使用"></a>序列化的使用</h2><p>如果我们想要使用序列化器对应的是Django的模型类，DRF为我们提供了ModelSerializer模型类序列化器来帮助我们快速创建一个Serializer类。</p><p>ModelSerializer与常规的Serializer相同，但提供了：</p><ul><li>基于模型类自动生成一系列字段</li><li>基于模型类自动为Serializer生成validators，比如unique_together</li><li>包含默认的create()和update()的实现</li></ul><p>基于以上原因我们以下都以ModelSerializer为例来进行说明</p><h3 id="序列化基本数据"><a href="#序列化基本数据" class="headerlink" title="序列化基本数据"></a>序列化基本数据</h3><h4 id="序列化单条数据"><a href="#序列化单条数据" class="headerlink" title="序列化单条数据"></a>序列化单条数据</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询主键为2的文章</span></span><br><span class="line">article_obj = Article.objects.get(pk=<span class="number">2</span>)</span><br><span class="line"><span class="comment"># 序列化该对象</span></span><br><span class="line">serializers = ArticleSerializer(article_obj)</span><br><span class="line"><span class="comment"># 返回给前端</span></span><br><span class="line"><span class="keyword">return</span> Response(serializers.data)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">    <span class="attr">&quot;author&quot;</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;关于铲除非法社会组织滋生土壤 净化社会组织生态空间的通知&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;会组织要依法登记、依法运作，这是世界各国通行的做法。我国是法治国家，支持合法登记的社会组织依法运作、维护合法登记的社会组织正当权益，是我们的一贯方针，同时，打击整治非法社会组织也是我们的一贯方针。多年来，各地各部门对非法社会组织持续保持高压态势，非法社会组织活动明显减少，社会组织生态空间日渐清朗。但近年来受利益驱动，一些非法社会组织不断变换手法，以假乱真、招摇撞骗，一些地方非法社会组织又有所滋长。&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">    <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-23T09:47:43.792678Z&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="序列化多条数据"><a href="#序列化多条数据" class="headerlink" title="序列化多条数据"></a>序列化多条数据</h4><h4><a href="#" class="headerlink"></a></h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查询所有文章</span></span><br><span class="line">articles = Article.objects.all()</span><br><span class="line"><span class="comment"># 序列化该数据集(多条数据要加many=True)</span></span><br><span class="line">serializers = ArticleSerializer(articles, many=<span class="literal">True</span>)</span><br><span class="line"><span class="comment"># 返回给前端</span></span><br><span class="line"><span class="keyword">return</span> Response(serializers.data)</span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;fff少时诵诗书所所所所所所所所所所所所所所所所&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;沙发撒的发是的发送到发生发&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T05:26:21.521804Z&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">8</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;Django是如何写出来的&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;发顺丰的&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T02:32:03.208494Z&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;我是一只小小鸟&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;weasfasdf时发生地方&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T02:21:26.062896Z&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;关于铲除非法社会组织滋生土壤 净化社会组织生态空间的通知&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;会组织要依法登记、依法运作，这是世界各国通行的做法。我国是法治国家，支持合法登记的社会组织依法运作、维护合法登记的社会组织正当权益，是我们的一贯方针，同时，打击整治非法社会组织也是我们的一贯方针。多年来，各地各部门对非法社会组织持续保持高压态势，非法社会组织活动明显减少，社会组织生态空间日渐清朗。但近年来受利益驱动，一些非法社会组织不断变换手法，以假乱真、招摇撞骗，一些地方非法社会组织又有所滋长。&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-23T09:47:43.792678Z&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;中方制裁名单上排第一的欧洲议员是谁？&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;22日晚间，中国外交部宣布，决定对欧方严重损害中方主权和利益、恶意传播谎言和虚假信息的10名人员和4个实体实施制裁，以对欧盟以涉疆事务为由对中方个人和实体施加制裁进行反制。在外交部公布的制裁名单上，排在首位的是欧洲议会议员彼蒂科菲尔，他最近曾多次无端攻击中国的新疆政策，并以此为由鼓动对中国官员的制裁和阻挠中欧全面投资协定。&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-23T09:46:50.668004Z&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="SerializerMethodField"><a href="#SerializerMethodField" class="headerlink" title="SerializerMethodField"></a>SerializerMethodField</h3><p>用户根据该字段的回调函数自定义输出结果</p><p>获取所有文章列表及文章对应的用户id，根据用户id输出用户对应的自定义身份</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章序列化类&quot;&quot;&quot;</span></span><br><span class="line">    full_status = serializers.ReadOnlyField(source=<span class="string">&quot;get_status_display&quot;</span>)</span><br><span class="line">    author_type = serializers.SerializerMethodField()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_author_type</span>(<span class="params">self, obj</span>):</span></span><br><span class="line">        <span class="comment"># 根据用户id判断用户身份并输出</span></span><br><span class="line">        <span class="keyword">if</span> obj.author_id &gt; <span class="number">1</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;普通用户&quot;</span></span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;超级管理员&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Article</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        read_only_fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;created_time&#x27;</span>, <span class="string">&#x27;author&#x27;</span>)</span><br></pre></td></tr></table></figure><p>输出结果</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">&quot;full_status&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;author_type&quot;</span>: <span class="string">&quot;超级管理员&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;fff少时诵诗书所所所所所所所所所所所所所所所所&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;沙发撒的发是的发送到发生发&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T05:26:21.521804Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">8</span>,</span><br><span class="line">        <span class="attr">&quot;full_status&quot;</span>: <span class="string">&quot;草稿&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author_type&quot;</span>: <span class="string">&quot;超级管理员&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;Django是如何写出来的&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;发顺丰的&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T02:32:03.208494Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="attr">&quot;full_status&quot;</span>: <span class="string">&quot;草稿&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author_type&quot;</span>: <span class="string">&quot;超级管理员&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;我是一只小小鸟&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;weasfasdf时发生地方&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T02:21:26.062896Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="number">1</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">&quot;full_status&quot;</span>: <span class="string">&quot;发布&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author_type&quot;</span>: <span class="string">&quot;普通用户&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;关于铲除非法社会组织滋生土壤 净化社会组织生态空间的通知&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;会组织要依法登记、依法运作，这是世界各国通行的做法。我国是法治国家，支持合法登记的社会组织依法运作、维护合法登记的社会组织正当权益，是我们的一贯方针，同时，打击整治非法社会组织也是我们的一贯方针。多年来，各地各部门对非法社会组织持续保持高压态势，非法社会组织活动明显减少，社会组织生态空间日渐清朗。但近年来受利益驱动，一些非法社会组织不断变换手法，以假乱真、招摇撞骗，一些地方非法社会组织又有所滋长。&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-23T09:47:43.792678Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="number">3</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;full_status&quot;</span>: <span class="string">&quot;发布&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author_type&quot;</span>: <span class="string">&quot;普通用户&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;中方制裁名单上排第一的欧洲议员是谁？&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;22日晚间，中国外交部宣布，决定对欧方严重损害中方主权和利益、恶意传播谎言和虚假信息的10名人员和4个实体实施制裁，以对欧盟以涉疆事务为由对中方个人和实体施加制裁进行反制。在外交部公布的制裁名单上，排在首位的是欧洲议会议员彼蒂科菲尔，他最近曾多次无端攻击中国的新疆政策，并以此为由鼓动对中国官员的制裁和阻挠中欧全面投资协定。&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-23T09:46:50.668004Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: <span class="number">2</span></span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h3 id="指定source来源"><a href="#指定source来源" class="headerlink" title="指定source来源"></a>指定source来源</h3><p>查询文章对应的作者用户名和文章状态中文显示</p><p>新建两个可读字段<code>author和status</code>字段，用以覆盖原来Article模型默认的字段，其中指定author字段的来源(source)为单个author对象的username，status字段为<code>get_status_display</code>方法返回的完整状态。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章序列化类&quot;&quot;&quot;</span></span><br><span class="line">    full_status = serializers.ReadOnlyField(source=<span class="string">&quot;get_status_display&quot;</span>)</span><br><span class="line">    author = serializers.ReadOnlyField(source=<span class="string">&quot;author.username&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Article</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        read_only_fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;created_time&#x27;</span>, <span class="string">&#x27;author&#x27;</span>)</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="string">&quot;full_status&quot;</span>: null,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;fff少时诵诗书所所所所所所所所所所所所所所所所&quot;</span>,</span><br><span class="line">        <span class="string">&quot;body&quot;</span>: <span class="string">&quot;沙发撒的发是的发送到发生发&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: null,</span><br><span class="line">        <span class="string">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T05:26:21.521804Z&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">8</span>,</span><br><span class="line">        <span class="string">&quot;full_status&quot;</span>: <span class="string">&quot;草稿&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;Django是如何写出来的&quot;</span>,</span><br><span class="line">        <span class="string">&quot;body&quot;</span>: <span class="string">&quot;发顺丰的&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">        <span class="string">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T02:32:03.208494Z&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="string">&quot;full_status&quot;</span>: <span class="string">&quot;草稿&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;我是一只小小鸟&quot;</span>,</span><br><span class="line">        <span class="string">&quot;body&quot;</span>: <span class="string">&quot;weasfasdf时发生地方&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">        <span class="string">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T02:21:26.062896Z&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="string">&quot;full_status&quot;</span>: <span class="string">&quot;发布&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;member1&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;关于铲除非法社会组织滋生土壤 净化社会组织生态空间的通知&quot;</span>,</span><br><span class="line">        <span class="string">&quot;body&quot;</span>: <span class="string">&quot;会组织要依法登记、依法运作，这是世界各国通行的做法。我国是法治国家，支持合法登记的社会组织依法运作、维护合法登记的社会组织正当权益，是我们的一贯方针，同时，打击整治非法社会组织也是我们的一贯方针。多年来，各地各部门对非法社会组织持续保持高压态势，非法社会组织活动明显减少，社会组织生态空间日渐清朗。但近年来受利益驱动，一些非法社会组织不断变换手法，以假乱真、招摇撞骗，一些地方非法社会组织又有所滋长。&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">        <span class="string">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-23T09:47:43.792678Z&quot;</span></span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="string">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="string">&quot;full_status&quot;</span>: <span class="string">&quot;发布&quot;</span>,</span><br><span class="line">        <span class="string">&quot;author&quot;</span>: <span class="string">&quot;member&quot;</span>,</span><br><span class="line">        <span class="string">&quot;title&quot;</span>: <span class="string">&quot;中方制裁名单上排第一的欧洲议员是谁？&quot;</span>,</span><br><span class="line">        <span class="string">&quot;body&quot;</span>: <span class="string">&quot;22日晚间，中国外交部宣布，决定对欧方严重损害中方主权和利益、恶意传播谎言和虚假信息的10名人员和4个实体实施制裁，以对欧盟以涉疆事务为由对中方个人和实体施加制裁进行反制。在外交部公布的制裁名单上，排在首位的是欧洲议会议员彼蒂科菲尔，他最近曾多次无端攻击中国的新疆政策，并以此为由鼓动对中国官员的制裁和阻挠中欧全面投资协定。&quot;</span>,</span><br><span class="line">        <span class="string">&quot;status&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">        <span class="string">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-23T09:46:50.668004Z&quot;</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h3 id="关联对象嵌套序列化"><a href="#关联对象嵌套序列化" class="headerlink" title="关联对象嵌套序列化"></a>关联对象嵌套序列化</h3><p>如果我们要查询发布该文章的用户信息要怎么做呢？如果要查询所有用户和他发布的所有文章又该如何做呢？这就需要用到关联对象嵌套序列化了。</p><h4 id="PrimaryKeyRelatedField"><a href="#PrimaryKeyRelatedField" class="headerlink" title="PrimaryKeyRelatedField"></a>PrimaryKeyRelatedField</h4><p>该字段被序列化为关联对象的主键</p><p><strong>参数</strong>:</p><ul><li><code>queryset</code> - 验证字段输入时用于模型实例查询的查询集。必须显式地设置查询集，或设置 <code>read_only=True</code>。</li><li><code>many</code> - 如果应用于一对多关系，则应将此参数设置为 <code>True</code>。</li><li><code>allow_null</code> - 如果设置为 <code>True</code>，那么该字段将接受 <code>None</code> 值或可为空的关系的空字符串。默认为 <code>False</code>。</li><li><code>pk_field</code> - 设置为一个字段来控制主键值的序列化/反序列化。例如， <code>pk_field=UUIDField(format=&#39;hex&#39;)</code> 会将 UUID 主键序列化为其紧凑的十六进制表示形式。</li></ul><p>查询所有用户及其发表过的文章主键，我们的用户序列化器应该如下定义：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">  <span class="string">&quot;&quot;&quot;用户序列化类&quot;&quot;&quot;</span></span><br><span class="line">		<span class="comment"># Article数据模型已经为关联用户定义了反查属性related_name=&#x27;articles&#x27;，所以article_set弃用</span></span><br><span class="line">    <span class="comment"># article_set = serializers.PrimaryKeyRelatedField(read_only=True, many=True)</span></span><br><span class="line">    articles = serializers.PrimaryKeyRelatedField(read_only=<span class="literal">True</span>, many=<span class="literal">True</span>)</span><br><span class="line">   </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = User</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br></pre></td></tr></table></figure><p>查询结果：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="number">10</span>,</span><br><span class="line">            <span class="number">8</span>,</span><br><span class="line">            <span class="number">6</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$H7uXzmEmLPFr$RaAYcUf6g8tgV9hLytiySyBp3Fo+LP52SZnCVfrYxTk=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="string">&quot;2021-03-23T09:19:42.312394Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;admin@qq.com&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:18:58.092435Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="number">1</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$rUpAo2698YTh$lM8HUQMlmknCF61aGtsmPWXcn5yLLQPTgvpspT19yiU=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:00.549553Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="number">2</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$0h2Wxbeboony$xgp2pvwfBMpJ0KmhpxhTutwQFU/loC3tvtqGMSuCm2o=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:18.034139Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="StringRelatedField"><a href="#StringRelatedField" class="headerlink" title="StringRelatedField"></a>StringRelatedField</h4><p>此字段将被序列化为关联对象的字符串表示方式（即<code>__str__</code>方法的返回值）</p><p><strong>参数</strong>:</p><ul><li><code>many</code> - 如果是一对多的关系，就将此参数设置为 <code>True</code>.</li></ul><p>查询所有用户及其发表的文章标题</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">		<span class="string">&quot;&quot;&quot;用户序列化类&quot;&quot;&quot;</span></span><br><span class="line">    articles = serializers.StringRelatedField(read_only=<span class="literal">True</span>, many=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = User</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;fff少时诵诗书所所所所所所所所所所所所所所所所&quot;</span>,</span><br><span class="line">            <span class="string">&quot;Django是如何写出来的&quot;</span>,</span><br><span class="line">            <span class="string">&quot;我是一只小小鸟&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$H7uXzmEmLPFr$RaAYcUf6g8tgV9hLytiySyBp3Fo+LP52SZnCVfrYxTk=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="string">&quot;2021-03-23T09:19:42.312394Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;admin@qq.com&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:18:58.092435Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;中方制裁名单上排第一的欧洲议员是谁？&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$rUpAo2698YTh$lM8HUQMlmknCF61aGtsmPWXcn5yLLQPTgvpspT19yiU=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:00.549553Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;关于铲除非法社会组织滋生土壤 净化社会组织生态空间的通知&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$0h2Wxbeboony$xgp2pvwfBMpJ0KmhpxhTutwQFU/loC3tvtqGMSuCm2o=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:18.034139Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="HyperlinkedRelatedField"><a href="#HyperlinkedRelatedField" class="headerlink" title="HyperlinkedRelatedField"></a>HyperlinkedRelatedField</h4><p><code>HyperlinkedRelatedField</code> 用于使用超链接来表示关系，必须指定视图别名view_name</p><p><strong>注意</strong>：该字段是为映射到接受单个 URL 关键字参数的 URL 的对象而设计的，如使用 <code>lookup_field</code> 和 <code>lookup_url_kwarg</code> 参数设置的对象。</p><p>这适用于包含单个主键或 slug 参数作为 URL 一部分的 URL。</p><p>如果需要更复杂的超链接表示，你需要自定义该字段，稍后会详解。</p><p><strong>参数</strong>：</p><ul><li><code>view_name</code> - 用作关系目标的视图名称。如果你使用的是标准路由器类，则这将是一个格式为 <code>&lt;modelname&gt;-detail</code> 的字符串。<strong>必填</strong>.</li><li><code>queryset</code> - 验证字段输入时用于模型实例查询的查询集。必须显式地设置查询集，或设置 <code>read_only=True</code>。</li><li><code>many</code> - 如果应用于一对多关系，则应将此参数设置为 <code>True</code>。</li><li><code>allow_null</code> - 如果设置为 <code>True</code>，那么该字段将接受 <code>None</code> 值或可为空的关系的空字符串。默认为 <code>False</code>。</li><li><code>lookup_field</code> - 用于查找的目标字段。对应于引用视图上的 URL 关键字参数。默认是 <code>&#39;pk&#39;</code>.</li><li><code>lookup_url_kwarg</code> - 与查找字段对应的 URL conf 中定义的关键字参数的名称。默认使用与 <code>lookup_field</code> 相同的值。</li><li><code>format</code> - 如果使用格式后缀，则超链接字段将使用与目标相同的格式后缀，除非使用 <code>format</code> 参数进行覆盖。</li></ul><p>查询所用用户及其发表的文章超链接</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;用户序列化类&quot;&quot;&quot;</span></span><br><span class="line">    articles = serializers.HyperlinkedRelatedField(read_only=<span class="literal">True</span>, many=<span class="literal">True</span>, view_name=<span class="string">&quot;api:article-detail&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = User</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;http://localhost:8000/api/articles/10/&quot;</span>,</span><br><span class="line">            <span class="string">&quot;http://localhost:8000/api/articles/8/&quot;</span>,</span><br><span class="line">            <span class="string">&quot;http://localhost:8000/api/articles/6/&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$H7uXzmEmLPFr$RaAYcUf6g8tgV9hLytiySyBp3Fo+LP52SZnCVfrYxTk=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="string">&quot;2021-03-23T09:19:42.312394Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;admin@qq.com&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:18:58.092435Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;http://localhost:8000/api/articles/1/&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$rUpAo2698YTh$lM8HUQMlmknCF61aGtsmPWXcn5yLLQPTgvpspT19yiU=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:00.549553Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;http://localhost:8000/api/articles/2/&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$0h2Wxbeboony$xgp2pvwfBMpJ0KmhpxhTutwQFU/loC3tvtqGMSuCm2o=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:18.034139Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="SlugRelatedField"><a href="#SlugRelatedField" class="headerlink" title="SlugRelatedField"></a>SlugRelatedField</h4><p><code>SlugRelatedField</code> 用于使用目标上的字段来表示关系。</p><p>默认情况下，该字段是可读写的，但您可以使用 <code>read_only</code> 标志更改此行为。</p><p>将 <code>SlugRelatedField</code> 用作读写字段时，通常需要确保 slug 字段与 <code>unique=True</code> 的模型字段相对应。</p><p><strong>参数</strong>：</p><ul><li><code>slug_field</code> - 用来表示目标的字段。这应该是唯一标识给定实例的字段。例如， <code>username</code>。<strong>必填</strong></li><li><code>queryset</code> - 验证字段输入时用于模型实例查询的查询集。必须显式地设置查询集，或设置 <code>read_only=True</code>。</li><li><code>many</code> - 如果应用于一对多关系，则应将此参数设置为 <code>True</code>。</li><li><code>allow_null</code> - 如果设置为 <code>True</code>，那么该字段将接受 <code>None</code> 值或可为空的关系的空字符串。默认为 <code>False</code>。</li></ul><p>查询所有用户及其发表的文章内容列表</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;用户序列化类&quot;&quot;&quot;</span></span><br><span class="line">    articles = serializers.SlugRelatedField(read_only=<span class="literal">True</span>, many=<span class="literal">True</span>, slug_field=<span class="string">&quot;body&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = User</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;沙发撒的发是的发送到发生发&quot;</span>,</span><br><span class="line">            <span class="string">&quot;发顺丰的&quot;</span>,</span><br><span class="line">            <span class="string">&quot;weasfasdf时发生地方&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$H7uXzmEmLPFr$RaAYcUf6g8tgV9hLytiySyBp3Fo+LP52SZnCVfrYxTk=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="string">&quot;2021-03-23T09:19:42.312394Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;admin@qq.com&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:18:58.092435Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;22日晚间，中国外交部宣布，决定对欧方严重损害中方主权和利益、恶意传播谎言和虚假信息的10名人员和4个实体实施制裁，以对欧盟以涉疆事务为由对中方个人和实体施加制裁进行反制。在外交部公布的制裁名单上，排在首位的是欧洲议会议员彼蒂科菲尔，他最近曾多次无端攻击中国的新疆政策，并以此为由鼓动对中国官员的制裁和阻挠中欧全面投资协定。&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$rUpAo2698YTh$lM8HUQMlmknCF61aGtsmPWXcn5yLLQPTgvpspT19yiU=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:00.549553Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            <span class="string">&quot;会组织要依法登记、依法运作，这是世界各国通行的做法。我国是法治国家，支持合法登记的社会组织依法运作、维护合法登记的社会组织正当权益，是我们的一贯方针，同时，打击整治非法社会组织也是我们的一贯方针。多年来，各地各部门对非法社会组织持续保持高压态势，非法社会组织活动明显减少，社会组织生态空间日渐清朗。但近年来受利益驱动，一些非法社会组织不断变换手法，以假乱真、招摇撞骗，一些地方非法社会组织又有所滋长。&quot;</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$0h2Wxbeboony$xgp2pvwfBMpJ0KmhpxhTutwQFU/loC3tvtqGMSuCm2o=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:18.034139Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h4 id="使用关联对象的序列化器"><a href="#使用关联对象的序列化器" class="headerlink" title="使用关联对象的序列化器"></a>使用关联对象的序列化器</h4><p>查询所有用户及其发表的文章信息</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章序列化类&quot;&quot;&quot;</span></span><br><span class="line">    full_status = serializers.ReadOnlyField(source=<span class="string">&quot;get_status_display&quot;</span>)</span><br><span class="line">    author = serializers.ReadOnlyField(source=<span class="string">&quot;author.username&quot;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Article</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        read_only_fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;created_time&#x27;</span>, <span class="string">&#x27;author&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;用户序列化类&quot;&quot;&quot;</span></span><br><span class="line">    articles = ArticleSerializer(many=<span class="literal">True</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = User</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="number">10</span>,</span><br><span class="line">                <span class="attr">&quot;full_status&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">                <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;fff少时诵诗书所所所所所所所所所所所所所所所所&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;沙发撒的发是的发送到发生发&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;status&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">                <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T05:26:21.521804Z&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="number">8</span>,</span><br><span class="line">                <span class="attr">&quot;full_status&quot;</span>: <span class="string">&quot;草稿&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;Django是如何写出来的&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;发顺丰的&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T02:32:03.208494Z&quot;</span></span><br><span class="line">            &#125;,</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="number">6</span>,</span><br><span class="line">                <span class="attr">&quot;full_status&quot;</span>: <span class="string">&quot;草稿&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;我是一只小小鸟&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;weasfasdf时发生地方&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T02:21:26.062896Z&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$H7uXzmEmLPFr$RaAYcUf6g8tgV9hLytiySyBp3Fo+LP52SZnCVfrYxTk=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="string">&quot;2021-03-23T09:19:42.312394Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;admin@qq.com&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:18:58.092435Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">                <span class="attr">&quot;full_status&quot;</span>: <span class="string">&quot;发布&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;member&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;中方制裁名单上排第一的欧洲议员是谁？&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;22日晚间，中国外交部宣布，决定对欧方严重损害中方主权和利益、恶意传播谎言和虚假信息的10名人员和4个实体实施制裁，以对欧盟以涉疆事务为由对中方个人和实体施加制裁进行反制。在外交部公布的制裁名单上，排在首位的是欧洲议会议员彼蒂科菲尔，他最近曾多次无端攻击中国的新疆政策，并以此为由鼓动对中国官员的制裁和阻挠中欧全面投资协定。&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-23T09:46:50.668004Z&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$rUpAo2698YTh$lM8HUQMlmknCF61aGtsmPWXcn5yLLQPTgvpspT19yiU=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:00.549553Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line">        <span class="attr">&quot;articles&quot;</span>: [</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">                <span class="attr">&quot;full_status&quot;</span>: <span class="string">&quot;发布&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;author&quot;</span>: <span class="string">&quot;member1&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;关于铲除非法社会组织滋生土壤 净化社会组织生态空间的通知&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;会组织要依法登记、依法运作，这是世界各国通行的做法。我国是法治国家，支持合法登记的社会组织依法运作、维护合法登记的社会组织正当权益，是我们的一贯方针，同时，打击整治非法社会组织也是我们的一贯方针。多年来，各地各部门对非法社会组织持续保持高压态势，非法社会组织活动明显减少，社会组织生态空间日渐清朗。但近年来受利益驱动，一些非法社会组织不断变换手法，以假乱真、招摇撞骗，一些地方非法社会组织又有所滋长。&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">                <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-23T09:47:43.792678Z&quot;</span></span><br><span class="line">            &#125;</span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$0h2Wxbeboony$xgp2pvwfBMpJ0KmhpxhTutwQFU/loC3tvtqGMSuCm2o=&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member1&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:18.034139Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">        <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="深度自动化连表"><a href="#深度自动化连表" class="headerlink" title="深度自动化连表"></a>深度自动化连表</h2><p><strong>UserInfo</strong>类中有外键和多对多的键，直接序列化的结果是只显示id，如果想得到更多的信息可以用<em>depth</em>字段，可以理解为深度读取，默认为0，就是我们默认显示的结果。如果改为1，表示深度为1，就可以再往下读取一层所有的信息，在这里就可以读取到用户的角色和组别两个类中所有的信息。</p><p>查询所有文章及其发表的用户</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章序列化类&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Article</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        read_only_fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;created_time&#x27;</span>, <span class="string">&#x27;author&#x27;</span>)</span><br><span class="line">        depth = <span class="number">1</span></span><br></pre></td></tr></table></figure><p>输出结果：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">10</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;fff少时诵诗书所所所所所所所所所所所所所所所所&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;沙发撒的发是的发送到发生发&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T05:26:21.521804Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$H7uXzmEmLPFr$RaAYcUf6g8tgV9hLytiySyBp3Fo+LP52SZnCVfrYxTk=&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;last_login&quot;</span>: <span class="string">&quot;2021-03-23T09:19:42.312394Z&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;admin@qq.com&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:18:58.092435Z&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">            <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">8</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;Django是如何写出来的&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;发顺丰的&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T02:32:03.208494Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$H7uXzmEmLPFr$RaAYcUf6g8tgV9hLytiySyBp3Fo+LP52SZnCVfrYxTk=&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;last_login&quot;</span>: <span class="string">&quot;2021-03-23T09:19:42.312394Z&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;admin@qq.com&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:18:58.092435Z&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">            <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">6</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;我是一只小小鸟&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;weasfasdf时发生地方&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;d&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-24T02:21:26.062896Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">            <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$H7uXzmEmLPFr$RaAYcUf6g8tgV9hLytiySyBp3Fo+LP52SZnCVfrYxTk=&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;last_login&quot;</span>: <span class="string">&quot;2021-03-23T09:19:42.312394Z&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;admin&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;admin@qq.com&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:18:58.092435Z&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">            <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;关于铲除非法社会组织滋生土壤 净化社会组织生态空间的通知&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;会组织要依法登记、依法运作，这是世界各国通行的做法。我国是法治国家，支持合法登记的社会组织依法运作、维护合法登记的社会组织正当权益，是我们的一贯方针，同时，打击整治非法社会组织也是我们的一贯方针。多年来，各地各部门对非法社会组织持续保持高压态势，非法社会组织活动明显减少，社会组织生态空间日渐清朗。但近年来受利益驱动，一些非法社会组织不断变换手法，以假乱真、招摇撞骗，一些地方非法社会组织又有所滋长。&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-23T09:47:43.792678Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>: <span class="number">3</span>,</span><br><span class="line">            <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$0h2Wxbeboony$xgp2pvwfBMpJ0KmhpxhTutwQFU/loC3tvtqGMSuCm2o=&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member1&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:18.034139Z&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">            <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="attr">&quot;id&quot;</span>: <span class="number">1</span>,</span><br><span class="line">        <span class="attr">&quot;title&quot;</span>: <span class="string">&quot;中方制裁名单上排第一的欧洲议员是谁？&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;body&quot;</span>: <span class="string">&quot;22日晚间，中国外交部宣布，决定对欧方严重损害中方主权和利益、恶意传播谎言和虚假信息的10名人员和4个实体实施制裁，以对欧盟以涉疆事务为由对中方个人和实体施加制裁进行反制。在外交部公布的制裁名单上，排在首位的是欧洲议会议员彼蒂科菲尔，他最近曾多次无端攻击中国的新疆政策，并以此为由鼓动对中国官员的制裁和阻挠中欧全面投资协定。&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;status&quot;</span>: <span class="string">&quot;p&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;created_time&quot;</span>: <span class="string">&quot;2021-03-23T09:46:50.668004Z&quot;</span>,</span><br><span class="line">        <span class="attr">&quot;author&quot;</span>: &#123;</span><br><span class="line">            <span class="attr">&quot;id&quot;</span>: <span class="number">2</span>,</span><br><span class="line">            <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;pbkdf2_sha256$216000$rUpAo2698YTh$lM8HUQMlmknCF61aGtsmPWXcn5yLLQPTgvpspT19yiU=&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;last_login&quot;</span>: <span class="literal">null</span>,</span><br><span class="line">            <span class="attr">&quot;is_superuser&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;member&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;first_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;last_name&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;email&quot;</span>: <span class="string">&quot;&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;is_staff&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">            <span class="attr">&quot;is_active&quot;</span>: <span class="literal">true</span>,</span><br><span class="line">            <span class="attr">&quot;date_joined&quot;</span>: <span class="string">&quot;2021-03-23T09:45:00.549553Z&quot;</span>,</span><br><span class="line">            <span class="attr">&quot;groups&quot;</span>: [],</span><br><span class="line">            <span class="attr">&quot;user_permissions&quot;</span>: []</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure><h2 id="数据验证"><a href="#数据验证" class="headerlink" title="数据验证"></a>数据验证</h2><p>在反序列化数据时，必需对用户提交的数据进行验证。在尝试访问经过验证的数据或保存对象实例之前，总是需要显示地调用 <code>is_valid()</code>方法。如果发生任何验证错误，<code>.errors</code> 属性将包含表示结果错误消息的字典，如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">serializer = CommentSerializer(data=&#123;<span class="string">&#x27;email&#x27;</span>: <span class="string">&#x27;foobar&#x27;</span>, <span class="string">&#x27;content&#x27;</span>: <span class="string">&#x27;baz&#x27;</span>&#125;)</span><br><span class="line">serializer.is_valid()</span><br><span class="line"><span class="comment"># False</span></span><br><span class="line">serializer.errors</span><br><span class="line"><span class="comment"># &#123;&#x27;email&#x27;: [u&#x27;Enter a valid e-mail address.&#x27;], &#x27;created&#x27;: [u&#x27;This field is required.&#x27;]&#125;</span></span><br></pre></td></tr></table></figure><p>字典中的每个键都是字段名称，值是与该字段对应的任何错误消息的字符串列表。</p><p><code>.is_valid()</code> 方法使用可选的 <code>raise_exception</code> 标志，如果存在验证错误，将会抛出 <code>serializers.ValidationError</code> 异常。</p><p>这些异常由 REST framework 提供的默认异常处理程序自动处理，默认情况下将返回 <code>HTTP 400 Bad Request</code> 响应。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 如果数据未通过验证，返回400</span></span><br><span class="line">serializer.is_valid(raise_exception=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure><p>在DRF中编写序列化类时，你可以进行字段级别和对象级别的验证，还可以使用自定义验证器或使用DRF提供的验证器。</p><h3 id="字段级别验证-Field-level-validation"><a href="#字段级别验证-Field-level-validation" class="headerlink" title="字段级别验证 (Field-level validation)"></a>字段级别验证 (Field-level validation)</h3><p>您可以通过向您的 <code>Serializer</code> 子类中添加 <code>.validate_&lt;field_name&gt;</code> 方法来指定自定义字段级的验证。这些类似于 Django 表单中的 <code>.clean_&lt;field_name&gt;</code> 方法。这些方法采用单个参数，即需要验证的字段值。</p><p>您的 <code>validate_&lt;field_name&gt;</code> 方法应该返回已验证的值或抛出 <code>serializers.ValidationError</code> 异常。例如我们要验证文章标题不能包含CNM：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章序列化类&quot;&quot;&quot;</span></span><br><span class="line">    full_status = serializers.ReadOnlyField(source=<span class="string">&quot;get_status_display&quot;</span>)</span><br><span class="line">    <span class="comment"># author = serializers.ReadOnlyField(source=&quot;author.username&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate_title</span>(<span class="params">self, value</span>):</span></span><br><span class="line">      	<span class="comment"># 标题包含CNM报错</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;CNM&quot;</span> <span class="keyword">in</span> value:</span><br><span class="line">            <span class="keyword">raise</span> serializers.ValidationError(<span class="string">&quot;禁止说脏话&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Article</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        read_only_fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;created_time&#x27;</span>, <span class="string">&#x27;author&#x27;</span>)</span><br></pre></td></tr></table></figure><p>我们提交标题中带有CNM的数据后台响应的结果为：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;title&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;禁止说脏话&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="对象级别验证-Object-level-validation"><a href="#对象级别验证-Object-level-validation" class="headerlink" title="对象级别验证 (Object-level validation)"></a>对象级别验证 (Object-level validation)</h3><p>要执行需要访问多个字段的任何其他验证，请添加名为 <code>.validate()</code> 的方法到您的 <code>Serializer</code> 子类中。此方法采用单个参数，该参数是字段值的字典。如果需要，它应该抛出 <code>ValidationError</code> 异常，或者只返回经过验证的值。</p><p>例如标题不能出现CNM并且内容也不能出现CNM：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章序列化类&quot;&quot;&quot;</span></span><br><span class="line">    full_status = serializers.ReadOnlyField(source=<span class="string">&quot;get_status_display&quot;</span>)</span><br><span class="line">    <span class="comment"># author = serializers.ReadOnlyField(source=&quot;author.username&quot;)</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">validate</span>(<span class="params">self, data</span>):</span></span><br><span class="line">        <span class="comment"># 判断标题和内容中有脏字则返回错误信息</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;CNM&quot;</span> <span class="keyword">in</span> data[<span class="string">&quot;title&quot;</span>] <span class="keyword">or</span> <span class="string">&quot;CNM&quot;</span> <span class="keyword">in</span> data[<span class="string">&quot;body&quot;</span>]:</span><br><span class="line">            <span class="keyword">raise</span> serializers.ValidationError(<span class="string">&quot;标题或内容中禁止有脏字&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> data</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Article</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        read_only_fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;created_time&#x27;</span>, <span class="string">&#x27;author&#x27;</span>)</span><br></pre></td></tr></table></figure><p>我们在标题或者内容中携带了CNM看下结果返回：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">&quot;non_field_errors&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;标题或内容中禁止有脏字&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="验证器-Validators"><a href="#验证器-Validators" class="headerlink" title="验证器 (Validators)"></a>验证器 (Validators)</h3><p>序列化器上的各个字段都可以包含验证器，通过在字段实例上声明.</p><p>例如还是刚才的问题，验证标题或者内容是否有脏字：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate_fuck</span>(<span class="params">value</span>):</span></span><br><span class="line">    <span class="comment"># 判断标题和内容中有脏字则返回错误信息</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&quot;CNM&quot;</span> <span class="keyword">in</span> value:</span><br><span class="line">        <span class="keyword">raise</span> serializers.ValidationError(<span class="string">&quot;禁止有脏字&quot;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章序列化类&quot;&quot;&quot;</span></span><br><span class="line">    full_status = serializers.ReadOnlyField(source=<span class="string">&quot;get_status_display&quot;</span>)</span><br><span class="line">    title = serializers.CharField(validators=[validate_fuck])</span><br><span class="line">    body = serializers.CharField(validators=[validate_fuck])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Article</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        read_only_fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;created_time&#x27;</span>, <span class="string">&#x27;author&#x27;</span>)</span><br></pre></td></tr></table></figure><p>故意违规返回结果：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;title&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;禁止有脏字&quot;</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="string">&quot;body&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;禁止有脏字&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="重写序列化器的create和update方法"><a href="#重写序列化器的create和update方法" class="headerlink" title="重写序列化器的create和update方法"></a>重写序列化器的create和update方法</h2><p>假设我们有个Profile模型与User模型是一对一的关系，当用户注册时我们希望把用户提交的数据分别存入User和Profile模型，这时我们就不得不重写序列化器自带的create方法了。下例演示了如何通过一个序列化器创建两个模型对象。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">  	<span class="comment"># 嵌套关联对象序列化器</span></span><br><span class="line">    profile = ProfileSerializer()</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = User</span><br><span class="line">        fields = (<span class="string">&#x27;username&#x27;</span>, <span class="string">&#x27;email&#x27;</span>, <span class="string">&#x27;profile&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create</span>(<span class="params">self, validated_data</span>):</span></span><br><span class="line">      	<span class="comment"># 取出profile信息</span></span><br><span class="line">        profile_data = validated_data.pop(<span class="string">&#x27;profile&#x27;</span>)</span><br><span class="line">        <span class="comment"># 添加用户</span></span><br><span class="line">        user = User.objects.create(**validated_data)</span><br><span class="line">        <span class="comment"># 添加用户对应的详情信息</span></span><br><span class="line">        Profile.objects.create(user=user, **profile_data)</span><br><span class="line">        <span class="keyword">return</span> user</span><br></pre></td></tr></table></figure><p>同时更新两个关联模型实例时也同样需要重写update方法。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">update</span>(<span class="params">self, instance, validated_data</span>):</span></span><br><span class="line">  			<span class="comment"># 取出前端提交的用户详情数据</span></span><br><span class="line">        profile_data = validated_data.pop(<span class="string">&#x27;profile&#x27;</span>)</span><br><span class="line">      	<span class="comment"># 取出该用户对应的原有用户详情数据</span></span><br><span class="line">        profile = instance.profile</span><br><span class="line">        <span class="comment"># 修改用户名和邮箱并保存</span></span><br><span class="line">        instance.username = validated_data.get(<span class="string">&#x27;username&#x27;</span>, instance.username)</span><br><span class="line">        instance.email = validated_data.get(<span class="string">&#x27;email&#x27;</span>, instance.email)</span><br><span class="line">        instance.save()</span><br><span class="line">				<span class="comment"># 修改用户详情的姓名和地址，如果前端没有传递则使用原有姓名和地址，最后保存</span></span><br><span class="line">        profile.name= profile_data.get(</span><br><span class="line">            <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">            profile.name</span><br><span class="line">        )</span><br><span class="line">        profile.address = profile_data.get(</span><br><span class="line">            <span class="string">&#x27;address&#x27;</span>,</span><br><span class="line">            profile.address</span><br><span class="line">         )</span><br><span class="line">        profile.save()</span><br><span class="line"></span><br><span class="line">				<span class="comment"># 返回修改的用户对象实例</span></span><br><span class="line">        <span class="keyword">return</span> instance</span><br></pre></td></tr></table></figure><p>因为序列化器使用嵌套后，创建和更新的行为可能不明确，并且可能需要相关模型之间的复杂依赖关系，REST framework要求你始终显式的编写这些方法。默认的 <code>ModelSerializer</code> <code>.create()</code> 和 <code>.update()</code> 方法不包括对可写嵌套表示的支持，所以我们总是需要对create和update方法进行重写。</p><h2 id="动态加载序列化器类"><a href="#动态加载序列化器类" class="headerlink" title="动态加载序列化器类"></a>动态加载序列化器类</h2><p>有时你在类视里不希望通过通过<code>serializer_class</code>指定固定的序列化器类，而是希望动态的加载序列化器，你可以重写<code>get_serializer_class</code>方法，如下所示：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">UserViewSet</span>(<span class="params">CreateModelMixin,RetrieveModelMixin,UpdateModelMixin,viewsets.GenericViewSet</span>):</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment"># 这个就不需要了</span></span><br><span class="line">    <span class="comment">#serializer_class = XXXSerializer</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_serializer_class</span>(<span class="params">self</span>):</span></span><br><span class="line">    		<span class="comment"># 如果是post创建则使用CustomSerializer1序列化器</span></span><br><span class="line">        <span class="keyword">if</span> self.action == <span class="string">&#x27;create&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> CustomSerializer1</span><br><span class="line">       	<span class="comment"># 如果是显示所有用户则使用XXXSerializer</span></span><br><span class="line">        <span class="keyword">elif</span> self.action == <span class="string">&#x27;list&#x27;</span>:</span><br><span class="line">            <span class="keyword">return</span> XXXSerializer</span><br><span class="line">        <span class="comment"># 如果是其他请求方式则使用CustomSerializer2</span></span><br><span class="line">        <span class="keyword">return</span> CustomSerializer2</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h2><ul><li>改变序列化输出数据的格式可以通过指定字段的source来源，使用SerializerMethodField自定义方法以及使用嵌套序列化器。</li><li>反序列化时需要对客户端发送的数据进行验证。你可以通过自定义validate方法进行字段或对象级别的验证，你还可以使用自定义的validators或DRF自带的验证器。</li><li>当你使用嵌套序列化器后，多个关联模型的创建和更新的行为并不明确，你需要显示地重写create和update方法。</li></ul><div class="note info"><h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><ul><li><a href="https://www.diandian100.cn/8c6a0357.html?highlight=rest">DRF频率组件的使用方式</a></li><li><a href="https://www.diandian100.cn/49e03a2.html?highlight=rest">DRF视图组件使用</a></li><li><a href="https://www.diandian100.cn/86ee5ba8.html?highlight=rest">DRF分页器组件</a></li><li><a href="https://www.diandian100.cn/52bce651.html?highlight=rest">DRF认证组件使用流程</a></li><li><a href="https://www.diandian100.cn/e855bafb.html?highlight=rest">DRF权限组件代码实现</a></li><li><a href="https://www.diandian100.cn/2e5c607.html?highlight=rest">DRF路由注册器组件</a></li><li><a href="https://www.diandian100.cn/60ef856a.html?highlight=rest">DRF响应器组件</a></li><li><a href="https://www.diandian100.cn/d983e370.html?highlight=rest">DRF自定义用户token</a></li><li><a href="https://www.diandian100.cn/4088986f.html?highlight=rest">DjangoRestFramework view.py文件书写流程</a></li><li><a href="https://www.diandian100.cn/db7fdc29.html?highlight=rest">Django REST Framework完整开发api示例</a></li><li><a href="https://www.diandian100.cn/8bc97d56.html?highlight=rest">Django Rest Framework读取用户IP写入数据表</a></li><li><a href="https://www.diandian100.cn/807b7587.html?highlight=rest">Access-Control-Allow-Origin跨域问题</a></li></ul></div><div class="note success"><h2 id="Django-REST-Framework系列文章"><a href="#Django-REST-Framework系列文章" class="headerlink" title="Django REST Framework系列文章"></a>Django REST Framework系列文章</h2><ul><li><a href="https://www.diandian100.cn/717404f2.html">手摸手，带你用Django REST Framework撸接口系列一(基础篇)</a></li><li><a href="https://www.diandian100.cn/7765f48b.html">手摸手，带你用Django REST Framework撸接口系列二(序列化器篇)</a></li><li><a href="https://www.diandian100.cn/c33bd528.html">手摸手，带你用Django REST Framework撸接口系列三(视图篇)</a></li><li><a href="https://www.diandian100.cn/6d74bf0a.html">手摸手，带你用Django REST Framework撸接口系列四(渲染器篇)</a></li><li><a href="https://www.diandian100.cn/9fb08350.html">手摸手，带你用Django REST Framework撸接口系列五(路由篇)</a></li><li><a href="https://www.diandian100.cn/cfeb81d4.html">手摸手，带你用Django REST Framework撸接口系列六(认证篇)</a></li><li><a href="https://www.diandian100.cn/30a313c8.html">手摸手，带你用Django REST Framework撸接口系列七(权限篇)</a></li><li><a href="https://www.diandian100.cn/76b1e536.html">手摸手，带你用Django REST Framework撸接口系列八(限流篇)</a></li><li><a href="https://www.diandian100.cn/d615aa51.html">手摸手，带你用Django REST Framework撸接口系列九(过滤篇)</a></li><li><a href="https://www.diandian100.cn/dab560a3.html">手摸手，带你用Django REST Framework撸接口系列十(排序篇)</a></li><li><a href="https://www.diandian100.cn/6955468f.html">手摸手，带你用Django REST Framework撸接口系列十一(分页篇)</a></li><li><a href="https://www.diandian100.cn/ddd6b923.html">手摸手，带你用Django REST Framework撸接口系列十二(异常处理篇)</a></li><li><a href="https://www.diandian100.cn/8d2f2935.html">手摸手，带你用Django REST Framework撸接口系列十三(自动生成接口文档篇)</a></li></ul></div></div><div class="popular-posts-header">相关文章</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="/717404f2.html" rel="bookmark">Django REST Framework系列</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/d615aa51.html" rel="bookmark">手摸手，带你用Django REST Framework撸接口系列九(过滤篇)</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/76b1e536.html" rel="bookmark">手摸手，带你用Django REST Framework撸接口系列八(限流篇)</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/dab560a3.html" rel="bookmark">手摸手，带你用Django REST Framework撸接口系列十(排序篇)</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/8d2f2935.html" rel="bookmark">手摸手，带你用Django REST Framework撸接口系列十三(自动生成接口文档篇)</a></div></li></ul><footer class="post-footer"><div class="reward-container"><div>打赏个鸡腿</div><button onclick='document.querySelector(".post-reward").classList.toggle("active")'>赞赏</button><div class="post-reward"><div><img src="/images/wechatpay.jpg" alt="托小尼 微信"> <span>微信</span></div><div><img src="/images/alipay.jpg" alt="托小尼 支付宝"> <span>支付宝</span></div></div></div><div class="post-tags"><a href="/tags/%E6%9D%83%E9%99%90/" rel="tag"><i class="fa fa-tag"></i> 权限</a> <a href="/tags/%E8%AE%A4%E8%AF%81/" rel="tag"><i class="fa fa-tag"></i> 认证</a> <a href="/tags/%E9%A2%91%E7%8E%87/" rel="tag"><i class="fa fa-tag"></i> 频率</a> <a href="/tags/Django-REST-Framework%E7%B3%BB%E5%88%97/" rel="tag"><i class="fa fa-tag"></i> Django REST Framework系列</a> <a href="/tags/%E5%88%86%E9%A1%B5/" rel="tag"><i class="fa fa-tag"></i> 分页</a> <a href="/tags/django/" rel="tag"><i class="fa fa-tag"></i> django</a> <a href="/tags/python/" rel="tag"><i class="fa fa-tag"></i> python</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag"><i class="fa fa-tag"></i> 排序</a> <a href="/tags/drf/" rel="tag"><i class="fa fa-tag"></i> drf</a> <a href="/tags/rest/" rel="tag"><i class="fa fa-tag"></i> rest</a> <a href="/tags/restframework/" rel="tag"><i class="fa fa-tag"></i> restframework</a> <a href="/tags/rest-framework/" rel="tag"><i class="fa fa-tag"></i> rest_framework</a> <a href="/tags/djangorestframework/" rel="tag"><i class="fa fa-tag"></i> djangorestframework</a> <a href="/tags/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/" rel="tag"><i class="fa fa-tag"></i> 前后端分离</a> <a href="/tags/%E5%89%8D%E5%90%8E%E7%AB%AF%E4%B8%8D%E5%88%86%E7%A6%BB/" rel="tag"><i class="fa fa-tag"></i> 前后端不分离</a> <a href="/tags/restful/" rel="tag"><i class="fa fa-tag"></i> restful</a> <a href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96/" rel="tag"><i class="fa fa-tag"></i> 序列化</a> <a href="/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" rel="tag"><i class="fa fa-tag"></i> 反序列化</a> <a href="/tags/serializer/" rel="tag"><i class="fa fa-tag"></i> serializer</a> <a href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8/" rel="tag"><i class="fa fa-tag"></i> 序列化器</a> <a href="/tags/%E8%A7%86%E5%9B%BE/" rel="tag"><i class="fa fa-tag"></i> 视图</a> <a href="/tags/%E5%93%8D%E5%BA%94%E5%99%A8/" rel="tag"><i class="fa fa-tag"></i> 响应器</a> <a href="/tags/%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6/" rel="tag"><i class="fa fa-tag"></i> 路由组件</a> <a href="/tags/%E9%99%90%E6%B5%81/" rel="tag"><i class="fa fa-tag"></i> 限流</a> <a href="/tags/%E8%BF%87%E6%BB%A4/" rel="tag"><i class="fa fa-tag"></i> 过滤</a> <a href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" rel="tag"><i class="fa fa-tag"></i> 异常处理</a> <a href="/tags/%E7%94%9F%E6%88%90%E6%8E%A5%E5%8F%A3/" rel="tag"><i class="fa fa-tag"></i> 生成接口</a> <a href="/tags/python%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7/" rel="tag"><i class="fa fa-tag"></i> python开发技巧</a> <a href="/tags/django%E5%BC%80%E5%8F%91%E6%8A%80%E5%B7%A7/" rel="tag"><i class="fa fa-tag"></i> django开发技巧</a> <a href="/tags/Django-REST-framework/" rel="tag"><i class="fa fa-tag"></i> Django REST framework</a> <a href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96source/" rel="tag"><i class="fa fa-tag"></i> 序列化source</a> <a href="/tags/SerializerMethodField/" rel="tag"><i class="fa fa-tag"></i> SerializerMethodField</a> <a href="/tags/PrimaryKeyRelatedField/" rel="tag"><i class="fa fa-tag"></i> PrimaryKeyRelatedField</a> <a href="/tags/StringRelatedField/" rel="tag"><i class="fa fa-tag"></i> StringRelatedField</a> <a href="/tags/HyperlinkRelatedField/" rel="tag"><i class="fa fa-tag"></i> HyperlinkRelatedField</a> <a href="/tags/SlugRelatedField/" rel="tag"><i class="fa fa-tag"></i> SlugRelatedField</a> <a href="/tags/%E5%85%B3%E8%81%94%E5%AF%B9%E8%B1%A1%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8/" rel="tag"><i class="fa fa-tag"></i> 关联对象序列化器</a> <a href="/tags/%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%9E%E8%A1%A8/" rel="tag"><i class="fa fa-tag"></i> 自动化连表</a> <a href="/tags/%E5%AD%97%E6%AE%B5%E7%BA%A7%E9%AA%8C%E8%AF%81/" rel="tag"><i class="fa fa-tag"></i> 字段级验证</a> <a href="/tags/%E5%AF%B9%E8%B1%A1%E7%BA%A7%E5%88%AB%E9%AA%8C%E8%AF%81/" rel="tag"><i class="fa fa-tag"></i> 对象级别验证</a> <a href="/tags/%E9%AA%8C%E8%AF%81%E5%99%A8/" rel="tag"><i class="fa fa-tag"></i> 验证器</a> <a href="/tags/%E9%87%8D%E5%86%99update/" rel="tag"><i class="fa fa-tag"></i> 重写update</a> <a href="/tags/%E9%87%8D%E5%86%99create/" rel="tag"><i class="fa fa-tag"></i> 重写create</a> <a href="/tags/%E5%8A%A8%E6%80%81%E5%8A%A0%E8%BD%BD%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8/" rel="tag"><i class="fa fa-tag"></i> 动态加载序列化器</a></div><div class="post-nav"><div class="post-nav-item"><a href="/8a0a3adf.html" rel="prev" title="中台技术是什么？"><i class="fa fa-chevron-left"></i> 中台技术是什么？</a></div><div class="post-nav-item"><a href="/c33bd528.html" rel="next" title="手摸手，带你用Django REST Framework撸接口系列三(视图篇)">手摸手，带你用Django REST Framework撸接口系列三(视图篇) <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="comments"><div id="SOHUCS"></div></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><span class="exturl" data-url="aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbg==">豫ICP备17028303号-1 </span><img src="http://www.beian.gov.cn/portal/download" style="display:inline-block"><span class="exturl" data-url="aHR0cDovL3d3dy5iZWlhbi5nb3YuY24vcG9ydGFsL3JlZ2lzdGVyU3lzdGVtSW5mbz9yZWNvcmRjb2RlPTE3MDI4MzAz">豫公网安备 41102402000095号</span></div><div class="copyright">&copy; <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Tony Yu</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="站点总字数">1.5m</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">22:14</span></span></div></div></footer><script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1.15.0/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>NexT.utils.loadComments('#SOHUCS', () => {
    NexT.utils.getScript('https://changyan.sohu.com/upload/changyan.js', () => {
      window.changyan.api.config({
        appid: 'cyu11Umgd',
        conf : '0f296687f6a61e82028fd7c6ddf32ab9'
      });
    });
  });</script><script src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script></body></html>