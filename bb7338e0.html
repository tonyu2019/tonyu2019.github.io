<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.1.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/56x56logo.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/56x56logo.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/images/400x400logo.png" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"><script class="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"www.diandian100.cn",root:"/",scheme:"Gemini",version:"8.0.0",exturl:!0,sidebar:{position:"left",display:"always",padding:18,offset:12},copycode:!0,bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!0,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"fadeInDown",post_body:"fadeInDown",coll_header:"fadeInLeft",sidebar:"fadeInUp"}},prism:!1,i18n:{placeholder:"搜索...",empty:"没有找到任何搜索结果：${query}",hits_time:"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）",hits:"找到 ${hits} 个搜索结果"},path:"search.xml",localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1}}</script><meta name="description" content="REmote DIctionary Server(Redis) 是一个由Salvatore Sanfilippo写的key-value存储系统。 Redis是一个开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。 它通常被称为数据结构服务器，因为值（value）可以是 字符串(String), 哈希(Map),"><meta property="og:type" content="article"><meta property="og:title" content="Redis初体验"><meta property="og:url" content="https://www.diandian100.cn/bb7338e0.html"><meta property="og:site_name" content="点点开发技术分享"><meta property="og:description" content="REmote DIctionary Server(Redis) 是一个由Salvatore Sanfilippo写的key-value存储系统。 Redis是一个开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。 它通常被称为数据结构服务器，因为值（value）可以是 字符串(String), 哈希(Map),"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://www.diandian100.cn/images/425762-20160222213200645-359371350.png"><meta property="og:image" content="https://www.diandian100.cn/images/425762-20160223115506630-113443460.png"><meta property="og:image" content="https://www.diandian100.cn/images/425762-20160223172249115-189393001.png"><meta property="og:image" content="https://www.diandian100.cn/images/425762-20160121152411125-1838441844.png"><meta property="article:published_time" content="2019-07-30T06:34:00.000Z"><meta property="article:modified_time" content="2020-09-04T01:00:24.000Z"><meta property="article:author" content="托小尼"><meta property="article:tag" content="redis"><meta property="article:tag" content="数据库"><meta property="article:tag" content="连接池"><meta property="article:tag" content="操作模式"><meta property="article:tag" content="string操作"><meta property="article:tag" content="hash操作"><meta property="article:tag" content="list操作"><meta property="article:tag" content="set操作"><meta property="article:tag" content="有序集合操作"><meta property="article:tag" content="管道"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://www.diandian100.cn/images/425762-20160222213200645-359371350.png"><link rel="canonical" href="https://www.diandian100.cn/bb7338e0.html"><script class="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>Redis初体验 | 点点开发技术分享</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3b57832214417f66931e694d19fd60b9";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>body{margin-top:2rem}.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header,.use-motion .sidebar{visibility:visible}.use-motion .footer,.use-motion .header,.use-motion .site-brand-container .toggle{opacity:initial}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line{transform:scaleX(1)}.search-pop-overlay,.sidebar-nav{display:none}.sidebar-panel{display:block}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">点点开发技术分享</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">记录个人日常开发笔记与技巧</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-development"><a href="/categories/rd/" rel="section"><i class="fa fa-code fa-fw"></i>开发</a></li><li class="menu-item menu-item-frontend"><a href="/categories/fe/" rel="section"><i class="fab fa-html5 fa-fw"></i>前端</a></li><li class="menu-item menu-item-database"><a href="/categories/db/" rel="section"><i class="fa fa-database fa-fw"></i>数据库</a></li><li class="menu-item menu-item-os"><a href="/categories/os/" rel="section"><i class="fab fa-linux fa-fw"></i>系统</a></li><li class="menu-item menu-item-other"><a href="/categories/other/" rel="section"><i class="far fa-paper-plane fa-fw"></i>其他</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><section class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E3%80%81Redis%E5%AE%89%E8%A3%85%E5%92%8C%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">1.</span> <span class="nav-text">一、Redis安装和基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%8B%E8%BD%BD%E5%AE%89%E8%A3%85%E4%B8%8E%E7%BC%96%E8%AF%91"><span class="nav-number">1.0.1.</span> <span class="nav-text">下载安装与编译</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1%E7%AB%AF"><span class="nav-number">1.0.2.</span> <span class="nav-text">启动服务端</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E5%AE%A2%E6%88%B7%E7%AB%AF"><span class="nav-number">1.0.3.</span> <span class="nav-text">启动客户端</span></a></li></ol></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BA%8C%E3%80%81Python%E6%93%8D%E4%BD%9CRedis"><span class="nav-number">2.</span> <span class="nav-text">二、Python操作Redis</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E6%A8%A1%E5%BC%8F"><span class="nav-number">2.0.1.</span> <span class="nav-text">操作模式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BF%9E%E6%8E%A5%E6%B1%A0"><span class="nav-number">2.0.2.</span> <span class="nav-text">连接池</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C"><span class="nav-number">2.0.3.</span> <span class="nav-text">操作</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#String%E6%93%8D%E4%BD%9C"><span class="nav-number">2.0.3.1.</span> <span class="nav-text">String操作</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#set"><span class="nav-number">2.0.3.1.1.</span> <span class="nav-text">set()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#setnx"><span class="nav-number">2.0.3.1.2.</span> <span class="nav-text">setnx()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#setex"><span class="nav-number">2.0.3.1.3.</span> <span class="nav-text">setex()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#psetex"><span class="nav-number">2.0.3.1.4.</span> <span class="nav-text">psetex()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#mset"><span class="nav-number">2.0.3.1.5.</span> <span class="nav-text">mset()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#get-name"><span class="nav-number">2.0.3.1.6.</span> <span class="nav-text">get(name)</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#mget"><span class="nav-number">2.0.3.1.7.</span> <span class="nav-text">mget()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#getset"><span class="nav-number">2.0.3.1.8.</span> <span class="nav-text">getset()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#getrange"><span class="nav-number">2.0.3.1.9.</span> <span class="nav-text">getrange()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#setrange"><span class="nav-number">2.0.3.1.10.</span> <span class="nav-text">setrange()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#setbit"><span class="nav-number">2.0.3.1.11.</span> <span class="nav-text">setbit()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#getbit"><span class="nav-number">2.0.3.1.12.</span> <span class="nav-text">getbit()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#bitcount"><span class="nav-number">2.0.3.1.13.</span> <span class="nav-text">bitcount()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#bitop"><span class="nav-number">2.0.3.1.14.</span> <span class="nav-text">bitop()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#strlen"><span class="nav-number">2.0.3.1.15.</span> <span class="nav-text">strlen()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#incr"><span class="nav-number">2.0.3.1.16.</span> <span class="nav-text">incr()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#incrbyfloat"><span class="nav-number">2.0.3.1.17.</span> <span class="nav-text">incrbyfloat()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#decr"><span class="nav-number">2.0.3.1.18.</span> <span class="nav-text">decr()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#append"><span class="nav-number">2.0.3.1.19.</span> <span class="nav-text">append()</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Hash%E6%93%8D%E4%BD%9C"><span class="nav-number">2.0.3.2.</span> <span class="nav-text">Hash操作</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#hset"><span class="nav-number">2.0.3.2.1.</span> <span class="nav-text">hset()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hmset"><span class="nav-number">2.0.3.2.2.</span> <span class="nav-text">hmset()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hget"><span class="nav-number">2.0.3.2.3.</span> <span class="nav-text">hget()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hmget"><span class="nav-number">2.0.3.2.4.</span> <span class="nav-text">hmget()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hgetall"><span class="nav-number">2.0.3.2.5.</span> <span class="nav-text">hgetall()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hlen"><span class="nav-number">2.0.3.2.6.</span> <span class="nav-text">hlen()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hkeys"><span class="nav-number">2.0.3.2.7.</span> <span class="nav-text">hkeys()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hvals"><span class="nav-number">2.0.3.2.8.</span> <span class="nav-text">hvals()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hexists"><span class="nav-number">2.0.3.2.9.</span> <span class="nav-text">hexists()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hdel"><span class="nav-number">2.0.3.2.10.</span> <span class="nav-text">hdel()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hincrby"><span class="nav-number">2.0.3.2.11.</span> <span class="nav-text">hincrby()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hincrbyfloat"><span class="nav-number">2.0.3.2.12.</span> <span class="nav-text">hincrbyfloat()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hscan"><span class="nav-number">2.0.3.2.13.</span> <span class="nav-text">hscan()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#hscan-iter"><span class="nav-number">2.0.3.2.14.</span> <span class="nav-text">hscan_iter()</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#List%E6%93%8D%E4%BD%9C"><span class="nav-number">2.0.3.3.</span> <span class="nav-text">List操作</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#lpush"><span class="nav-number">2.0.3.3.1.</span> <span class="nav-text">lpush()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#lpushx"><span class="nav-number">2.0.3.3.2.</span> <span class="nav-text">lpushx()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#llen"><span class="nav-number">2.0.3.3.3.</span> <span class="nav-text">llen()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#linsert"><span class="nav-number">2.0.3.3.4.</span> <span class="nav-text">linsert()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#lset"><span class="nav-number">2.0.3.3.5.</span> <span class="nav-text">lset()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#lrem"><span class="nav-number">2.0.3.3.6.</span> <span class="nav-text">lrem()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#lpop"><span class="nav-number">2.0.3.3.7.</span> <span class="nav-text">lpop()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#lindex"><span class="nav-number">2.0.3.3.8.</span> <span class="nav-text">lindex()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#lrange"><span class="nav-number">2.0.3.3.9.</span> <span class="nav-text">lrange()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#ltrim"><span class="nav-number">2.0.3.3.10.</span> <span class="nav-text">ltrim()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#rpoplpush"><span class="nav-number">2.0.3.3.11.</span> <span class="nav-text">rpoplpush()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#blpopbc"><span class="nav-number">2.0.3.3.12.</span> <span class="nav-text">blpopbc()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#brpoplpush"><span class="nav-number">2.0.3.3.13.</span> <span class="nav-text">brpoplpush()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%A2%9E%E9%87%8F%E8%BF%AD%E4%BB%A3"><span class="nav-number">2.0.3.3.14.</span> <span class="nav-text">自定义增量迭代</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Set%E6%93%8D%E4%BD%9C"><span class="nav-number">2.0.3.4.</span> <span class="nav-text">Set操作</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#sadd"><span class="nav-number">2.0.3.4.1.</span> <span class="nav-text">sadd()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#scard"><span class="nav-number">2.0.3.4.2.</span> <span class="nav-text">scard()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#sdiff"><span class="nav-number">2.0.3.4.3.</span> <span class="nav-text">sdiff()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#sdiffstore"><span class="nav-number">2.0.3.4.4.</span> <span class="nav-text">sdiffstore()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#sinter"><span class="nav-number">2.0.3.4.5.</span> <span class="nav-text">sinter()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#sinterstore"><span class="nav-number">2.0.3.4.6.</span> <span class="nav-text">sinterstore()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#sismember"><span class="nav-number">2.0.3.4.7.</span> <span class="nav-text">sismember()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#smembers"><span class="nav-number">2.0.3.4.8.</span> <span class="nav-text">smembers()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#smove"><span class="nav-number">2.0.3.4.9.</span> <span class="nav-text">smove()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#spop"><span class="nav-number">2.0.3.4.10.</span> <span class="nav-text">spop()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#srandmember"><span class="nav-number">2.0.3.4.11.</span> <span class="nav-text">srandmember()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#srem"><span class="nav-number">2.0.3.4.12.</span> <span class="nav-text">srem()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#sunion"><span class="nav-number">2.0.3.4.13.</span> <span class="nav-text">sunion()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#sunionstore"><span class="nav-number">2.0.3.4.14.</span> <span class="nav-text">sunionstore()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#sscan-and-sscan-iter"><span class="nav-number">2.0.3.4.15.</span> <span class="nav-text">sscan() and sscan_iter()</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88"><span class="nav-number">2.0.3.5.</span> <span class="nav-text">有序集合</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#zadd"><span class="nav-number">2.0.3.5.1.</span> <span class="nav-text">zadd()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zcard"><span class="nav-number">2.0.3.5.2.</span> <span class="nav-text">zcard()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zcount"><span class="nav-number">2.0.3.5.3.</span> <span class="nav-text">zcount()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zincrby"><span class="nav-number">2.0.3.5.4.</span> <span class="nav-text">zincrby()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zrange"><span class="nav-number">2.0.3.5.5.</span> <span class="nav-text">zrange()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zrank"><span class="nav-number">2.0.3.5.6.</span> <span class="nav-text">zrank()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zrangebylex"><span class="nav-number">2.0.3.5.7.</span> <span class="nav-text">zrangebylex()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zrem"><span class="nav-number">2.0.3.5.8.</span> <span class="nav-text">zrem()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zremrangebyrank"><span class="nav-number">2.0.3.5.9.</span> <span class="nav-text">zremrangebyrank()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zremrangebyscore"><span class="nav-number">2.0.3.5.10.</span> <span class="nav-text">zremrangebyscore()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zremrangebylex"><span class="nav-number">2.0.3.5.11.</span> <span class="nav-text">zremrangebylex()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zscore"><span class="nav-number">2.0.3.5.12.</span> <span class="nav-text">zscore()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zinterstore"><span class="nav-number">2.0.3.5.13.</span> <span class="nav-text">zinterstore()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zunionstore"><span class="nav-number">2.0.3.5.14.</span> <span class="nav-text">zunionstore()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#zscan-%E5%92%8C-zscan-iter"><span class="nav-number">2.0.3.5.15.</span> <span class="nav-text">zscan() 和 zscan_iter()</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C"><span class="nav-number">2.0.3.6.</span> <span class="nav-text">其他常用操作</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#delete"><span class="nav-number">2.0.3.6.1.</span> <span class="nav-text">delete()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#exists"><span class="nav-number">2.0.3.6.2.</span> <span class="nav-text">exists()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#keys"><span class="nav-number">2.0.3.6.3.</span> <span class="nav-text">keys()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#expire"><span class="nav-number">2.0.3.6.4.</span> <span class="nav-text">expire()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#rename"><span class="nav-number">2.0.3.6.5.</span> <span class="nav-text">rename()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#move"><span class="nav-number">2.0.3.6.6.</span> <span class="nav-text">move()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#randomkey"><span class="nav-number">2.0.3.6.7.</span> <span class="nav-text">randomkey()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#type"><span class="nav-number">2.0.3.6.8.</span> <span class="nav-text">type()</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#scan-%E5%92%8Cscan-iter"><span class="nav-number">2.0.3.6.9.</span> <span class="nav-text">scan()和scan_iter()</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%AE%A1%E9%81%93"><span class="nav-number">2.0.4.</span> <span class="nav-text">管道</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E8%AE%A1%E6%95%B0%E5%99%A8"><span class="nav-number">2.0.4.0.1.</span> <span class="nav-text">实现计数器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%91%E5%B8%83%E8%AE%A2%E9%98%85"><span class="nav-number">2.0.5.</span> <span class="nav-text">发布订阅</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#Demo"><span class="nav-number">2.0.5.0.1.</span> <span class="nav-text">Demo</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E8%AE%A2%E9%98%85%E8%80%85"><span class="nav-number">2.0.5.0.2.</span> <span class="nav-text">订阅者</span></a></li><li class="nav-item nav-level-6"><a class="nav-link" href="#%E5%8F%91%E5%B8%83%E8%80%85"><span class="nav-number">2.0.5.0.3.</span> <span class="nav-text">发布者</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#sentinel"><span class="nav-number">2.0.6.</span> <span class="nav-text">sentinel</span></a></li></div></section><section class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="托小尼" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">托小尼</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">205</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">30</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">1331</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cDovL3dwYS5xcS5jb20vbXNncmQ/dj0zJnVpbj02NDY1NDc5ODkmc2l0ZT1xcSZtZW51PXllcw==" title="QQ → http:&#x2F;&#x2F;wpa.qq.com&#x2F;msgrd?v&#x3D;3&amp;uin&#x3D;646547989&amp;site&#x3D;qq&amp;menu&#x3D;yes"><i class="fab fa-qq fa-fw"></i>QQ</span> </span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOnRvbnl5dUB2aXAucXEuY29t" title="E-Mail → mailto:tonyyu@vip.qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span></span></div></section></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Rvbnl1MjAxOQ==" title="关注我" aria-label="关注我"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.diandian100.cn/bb7338e0.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="托小尼"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="点点开发技术分享"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Redis初体验</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-07-30 14:34:00" itemprop="dateCreated datePublished" datetime="2019-07-30T14:34:00+08:00">2019-07-30</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-09-04 09:00:24" itemprop="dateModified" datetime="2020-09-04T09:00:24+08:00">2020-09-04</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/db/" itemprop="url" rel="index"><span itemprop="name">db</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/db/redis/" itemprop="url" rel="index"><span itemprop="name">redis</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Changyan：</span> <a title="changyan" href="/bb7338e0.html#SOHUCS" itemprop="discussionUrl"><span id="changyan_count_unit" class="post-comments-count hc-comment-count" data-xid="bb7338e0.html" itemprop="commentCount"></span></a></span></div><div class="post-meta"><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>14k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>13 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>REmote DIctionary Server(Redis) 是一个由Salvatore Sanfilippo写的key-value存储系统。</p><p>Redis是一个开源的使用ANSI C语言编写、遵守BSD协议、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。</p><p>它通常被称为数据结构服务器，因为值（value）可以是 字符串(String), 哈希(Map), 列表(list), 集合(sets) 和 有序集合(sorted sets)等类型。</p><a id="more"></a><h2 id="一、Redis安装和基本使用"><a href="#一、Redis安装和基本使用" class="headerlink" title="一、Redis安装和基本使用"></a>一、Redis安装和基本使用</h2><h4 id="下载安装与编译"><a href="#下载安装与编译" class="headerlink" title="下载安装与编译"></a>下载安装与编译</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget http://download.redis.io/releases/redis-3.0.6.tar.gz</span><br><span class="line">tar xzf redis-3.0.6.tar.gz</span><br><span class="line">cd redis-3.0.6</span><br><span class="line">make</span><br></pre></td></tr></table></figure><h4 id="启动服务端"><a href="#启动服务端" class="headerlink" title="启动服务端"></a>启动服务端</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src/redis<span class="literal">-server</span></span><br></pre></td></tr></table></figure><h4 id="启动客户端"><a href="#启动客户端" class="headerlink" title="启动客户端"></a>启动客户端</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src/redis-cli</span><br></pre></td></tr></table></figure><h2 id="二、Python操作Redis"><a href="#二、Python操作Redis" class="headerlink" title="二、Python操作Redis"></a>二、Python操作Redis</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo pip install redis</span><br><span class="line">or</span><br><span class="line">sudo easy_install redis</span><br><span class="line">or</span><br><span class="line">源码安装</span><br><span class="line"> </span><br><span class="line">详见：https://github.com/WoLpH/redis-py</span><br></pre></td></tr></table></figure><h4 id="操作模式"><a href="#操作模式" class="headerlink" title="操作模式"></a>操作模式</h4><p>redis-py提供两个类Redis和StrictRedis用于实现Redis的命令，StrictRedis用于实现大部分官方的命令，并使用官方的语法和命令，Redis是StrictRedis的子类，用于向后兼容旧版本的redis-py。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"> </span><br><span class="line">r = redis.Redis(host=<span class="string">&#x27;10.211.55.4&#x27;</span>, port=<span class="number">6379</span>)</span><br><span class="line">r.set(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;Bar&#x27;</span>)</span><br><span class="line"><span class="keyword">print</span> r.get(<span class="string">&#x27;foo&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="连接池"><a href="#连接池" class="headerlink" title="连接池"></a>连接池</h4><p>redis-py使用connection pool来管理对一个redis server的所有连接，避免每次建立、释放连接的开销。默认，每个Redis实例都会维护一个自己的连接池。可以直接建立一个连接池，然后作为参数Redis，这样就可以实现多个Redis实例共享一个连接池。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"> </span><br><span class="line">pool = redis.ConnectionPool(host=<span class="string">&#x27;10.211.55.4&#x27;</span>, port=<span class="number">6379</span>)</span><br><span class="line"> </span><br><span class="line">r = redis.Redis(connection_pool=pool)</span><br><span class="line">r.set(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;Bar&#x27;</span>)</span><br><span class="line"><span class="keyword">print</span> r.get(<span class="string">&#x27;foo&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="操作"><a href="#操作" class="headerlink" title="操作"></a>操作</h4><h5 id="String操作"><a href="#String操作" class="headerlink" title="String操作"></a>String操作</h5><p>redis中的String在在内存中按照一个name对应一个value来存储。如图：</p><p><img data-src="/images/425762-20160222213200645-359371350.png" alt="img"></p><h6 id="set"><a href="#set" class="headerlink" title="set()"></a>set()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：set(name, value, ex=None, px=None, nx=False, xx=False)</span></span><br><span class="line"><span class="comment"># 在Redis中设置值，默认，不存在则创建，存在则修改</span></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">     <span class="comment"># ex，过期时间（秒）</span></span><br><span class="line">     <span class="comment"># px，过期时间（毫秒）</span></span><br><span class="line">     <span class="comment"># nx，如果设置为True，则只有name不存在时，当前set操作才执行</span></span><br><span class="line">     <span class="comment"># xx，如果设置为True，则只有name存在时，岗前set操作才执行</span></span><br></pre></td></tr></table></figure><h6 id="setnx"><a href="#setnx" class="headerlink" title="setnx()"></a>setnx()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：setnx(name, value)</span></span><br><span class="line"><span class="comment"># 设置值，只有name不存在时，执行设置操作（添加）</span></span><br></pre></td></tr></table></figure><h6 id="setex"><a href="#setex" class="headerlink" title="setex()"></a>setex()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：setex(name, value, time)</span></span><br><span class="line"><span class="comment"># 设置值</span></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># time，过期时间（数字秒 或 timedelta对象）</span></span><br></pre></td></tr></table></figure><h6 id="psetex"><a href="#psetex" class="headerlink" title="psetex()"></a>psetex()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：psetex(name, time_ms, value)</span></span><br><span class="line"><span class="comment"># 设置值</span></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># time_ms，过期时间（数字毫秒 或 timedelta对象）</span></span><br></pre></td></tr></table></figure><h6 id="mset"><a href="#mset" class="headerlink" title="mset()"></a>mset()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：mset(*args, **kwargs)</span></span><br><span class="line"><span class="comment"># 批量设置值</span></span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">    <span class="comment"># mset(k1=&#x27;v1&#x27;, k2=&#x27;v2&#x27;)</span></span><br><span class="line">    <span class="comment"># 或</span></span><br><span class="line">    <span class="comment"># mget(&#123;&#x27;k1&#x27;: &#x27;v1&#x27;, &#x27;k2&#x27;: &#x27;v2&#x27;&#125;)</span></span><br></pre></td></tr></table></figure><h6 id="get-name"><a href="#get-name" class="headerlink" title="get(name)"></a>get(name)</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：get(name)</span></span><br><span class="line">获取值</span><br></pre></td></tr></table></figure><h6 id="mget"><a href="#mget" class="headerlink" title="mget()"></a>mget()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：mget(keys, *args)</span></span><br><span class="line"><span class="comment"># 批量获取</span></span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">    <span class="comment"># mget(&#x27;ylr&#x27;, &#x27;wupeiqi&#x27;)</span></span><br><span class="line">    <span class="comment"># 或</span></span><br><span class="line">    <span class="comment"># r.mget([&#x27;ylr&#x27;, &#x27;wupeiqi&#x27;])</span></span><br></pre></td></tr></table></figure><h6 id="getset"><a href="#getset" class="headerlink" title="getset()"></a>getset()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：getset(name, value)</span></span><br><span class="line"><span class="comment"># 设置新值并获取原来的值</span></span><br></pre></td></tr></table></figure><h6 id="getrange"><a href="#getrange" class="headerlink" title="getrange()"></a>getrange()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：getrange(key, start, end)</span></span><br><span class="line"><span class="comment"># 获取子序列（根据字节获取，非字符）</span></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，Redis 的 name</span></span><br><span class="line">    <span class="comment"># start，起始位置（字节）</span></span><br><span class="line">    <span class="comment"># end，结束位置（字节）</span></span><br><span class="line"><span class="comment"># 如： &quot;武沛齐&quot; ，0-3表示 &quot;武&quot;</span></span><br></pre></td></tr></table></figure><h6 id="setrange"><a href="#setrange" class="headerlink" title="setrange()"></a>setrange()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：setrange(name, offset, value)</span></span><br><span class="line"><span class="comment"># 修改字符串内容，从指定字符串索引开始向后替换（新值太长时，则向后添加）</span></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># offset，字符串的索引，字节（一个汉字三个字节）</span></span><br><span class="line">    <span class="comment"># value，要设置的值</span></span><br></pre></td></tr></table></figure><h6 id="setbit"><a href="#setbit" class="headerlink" title="setbit()"></a>setbit()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：setbit(name, offset, value)</span></span><br><span class="line"><span class="comment"># 对name对应值的二进制表示的位进行操作</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis的name</span></span><br><span class="line">    <span class="comment"># offset，位的索引（将值变换成二进制后再进行索引）</span></span><br><span class="line">    <span class="comment"># value，值只能是 1 或 0</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 注：如果在Redis中有一个对应： n1 = &quot;foo&quot;，</span></span><br><span class="line"><span class="comment"># 那么字符串foo的二进制表示为：01100110 01101111 01101111</span></span><br><span class="line"><span class="comment"># 所以，如果执行 setbit(&#x27;n1&#x27;, 7, 1)，则就会将第7位设置为1，</span></span><br><span class="line"><span class="comment"># 那么最终二进制则变成 01100111 01101111 01101111，即：&quot;goo&quot;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 扩展，转换二进制表示：</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment"># source = &quot;武沛齐&quot;</span></span><br><span class="line">    source = <span class="string">&quot;foo&quot;</span></span><br><span class="line"> </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> source:</span><br><span class="line">        num = ord(i)</span><br><span class="line">        <span class="keyword">print</span> bin(num).replace(<span class="string">&#x27;b&#x27;</span>,<span class="string">&#x27;&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">    <span class="comment"># 特别的，如果source是汉字 &quot;武沛齐&quot;怎么办？</span></span><br><span class="line">    <span class="comment"># 答：对于utf-8，每一个汉字占 3 个字节，那么 &quot;武沛齐&quot; 则有 9个字节</span></span><br><span class="line">       <span class="comment"># 对于汉字，for循环时候会按照 字节 迭代，那么在迭代时，将每一个字节转换 十进制数，然后再将十进制数转换成二进制</span></span><br><span class="line">        <span class="comment"># 11100110 10101101 10100110 11100110 10110010 10011011 11101001 10111101 10010000</span></span><br></pre></td></tr></table></figure><h6 id="getbit"><a href="#getbit" class="headerlink" title="getbit()"></a>getbit()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：getbit(name, offset)</span></span><br><span class="line"><span class="comment"># 获取name对应的值的二进制表示中的某位的值 （0或1）</span></span><br></pre></td></tr></table></figure><h6 id="bitcount"><a href="#bitcount" class="headerlink" title="bitcount()"></a>bitcount()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：bitcount(key, start=None, end=None)</span></span><br><span class="line"><span class="comment"># 获取name对应的值的二进制表示中 1 的个数</span></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># key，Redis的name</span></span><br><span class="line">    <span class="comment"># start，位起始位置</span></span><br><span class="line">    <span class="comment"># end，位结束位置</span></span><br></pre></td></tr></table></figure><h6 id="bitop"><a href="#bitop" class="headerlink" title="bitop()"></a>bitop()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：bitop(operation, dest, *keys)</span></span><br><span class="line"><span class="comment"># 获取多个值，并将值做位运算，将最后的结果保存至新的name对应的值</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># operation,AND（并） 、 OR（或） 、 NOT（非） 、 XOR（异或）</span></span><br><span class="line">    <span class="comment"># dest, 新的Redis的name</span></span><br><span class="line">    <span class="comment"># *keys,要查找的Redis的name</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">    <span class="comment"># bitop(&quot;AND&quot;, &#x27;new_name&#x27;, &#x27;n1&#x27;, &#x27;n2&#x27;, &#x27;n3&#x27;)</span></span><br><span class="line">    <span class="comment"># 获取Redis中n1,n2,n3对应的值，然后讲所有的值做位运算（求并集），然后将结果保存 new_name 对应的值中</span></span><br></pre></td></tr></table></figure><h6 id="strlen"><a href="#strlen" class="headerlink" title="strlen()"></a>strlen()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：strlen(name)</span></span><br><span class="line"><span class="comment"># 返回name对应值的字节长度（一个汉字3个字节）</span></span><br></pre></td></tr></table></figure><h6 id="incr"><a href="#incr" class="headerlink" title="incr()"></a>incr()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：incr(self, name, amount=1)</span></span><br><span class="line"><span class="comment"># 自增 name对应的值，当name不存在时，则创建name＝amount，否则，则自增。</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name,Redis的name</span></span><br><span class="line">    <span class="comment"># amount,自增数（必须是整数）</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 注：同incrby</span></span><br></pre></td></tr></table></figure><h6 id="incrbyfloat"><a href="#incrbyfloat" class="headerlink" title="incrbyfloat()"></a>incrbyfloat()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：incrbyfloat(self, name, amount=1.0)</span></span><br><span class="line"><span class="comment"># 自增 name对应的值，当name不存在时，则创建name＝amount，否则，则自增。</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name,Redis的name</span></span><br><span class="line">    <span class="comment"># amount,自增数（浮点型）</span></span><br></pre></td></tr></table></figure><h6 id="decr"><a href="#decr" class="headerlink" title="decr()"></a>decr()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：decr(self, name, amount=1)</span></span><br><span class="line"><span class="comment"># 自减 name对应的值，当name不存在时，则创建name＝amount，否则，则自减。</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name,Redis的name</span></span><br><span class="line">    <span class="comment"># amount,自减数（整数）</span></span><br></pre></td></tr></table></figure><h6 id="append"><a href="#append" class="headerlink" title="append()"></a>append()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：append(key, value)</span></span><br><span class="line"><span class="comment"># 在redis name对应的值后面追加内容</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># key, redis的name</span></span><br><span class="line">    <span class="comment"># value, 要追加的字符串</span></span><br></pre></td></tr></table></figure><h5 id="Hash操作"><a href="#Hash操作" class="headerlink" title="Hash操作"></a>Hash操作</h5><p>redis中Hash在内存中的存储格式如下图：</p><p><img data-src="/images/425762-20160223115506630-113443460.png" alt="img"></p><h6 id="hset"><a href="#hset" class="headerlink" title="hset()"></a>hset()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hset(name, key, value)</span></span><br><span class="line"><span class="comment"># name对应的hash中设置一个键值对（不存在，则创建；否则，修改）</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis的name</span></span><br><span class="line">    <span class="comment"># key，name对应的hash中的key</span></span><br><span class="line">    <span class="comment"># value，name对应的hash中的value</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 注：</span></span><br><span class="line">    <span class="comment"># hsetnx(name, key, value),当name对应的hash中不存在当前key时则创建（相当于添加）</span></span><br></pre></td></tr></table></figure><h6 id="hmset"><a href="#hmset" class="headerlink" title="hmset()"></a>hmset()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hmset(name, mapping)</span></span><br><span class="line"><span class="comment"># 在name对应的hash中批量设置键值对</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis的name</span></span><br><span class="line">    <span class="comment"># mapping，字典，如：&#123;&#x27;k1&#x27;:&#x27;v1&#x27;, &#x27;k2&#x27;: &#x27;v2&#x27;&#125;</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">    <span class="comment"># r.hmset(&#x27;xx&#x27;, &#123;&#x27;k1&#x27;:&#x27;v1&#x27;, &#x27;k2&#x27;: &#x27;v2&#x27;&#125;)</span></span><br></pre></td></tr></table></figure><h6 id="hget"><a href="#hget" class="headerlink" title="hget()"></a>hget()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hget(name,key)</span></span><br><span class="line"><span class="comment"># 在name对应的hash中获取根据key获取value</span></span><br></pre></td></tr></table></figure><h6 id="hmget"><a href="#hmget" class="headerlink" title="hmget()"></a>hmget()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hmget(name, keys, *args)</span></span><br><span class="line"><span class="comment"># 在name对应的hash中获取多个key的值</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，reids对应的name</span></span><br><span class="line">    <span class="comment"># keys，要获取key集合，如：[&#x27;k1&#x27;, &#x27;k2&#x27;, &#x27;k3&#x27;]</span></span><br><span class="line">    <span class="comment"># *args，要获取的key，如：k1,k2,k3</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">    <span class="comment"># r.mget(&#x27;xx&#x27;, [&#x27;k1&#x27;, &#x27;k2&#x27;])</span></span><br><span class="line">    <span class="comment"># 或</span></span><br><span class="line">    <span class="comment"># print r.hmget(&#x27;xx&#x27;, &#x27;k1&#x27;, &#x27;k2&#x27;)</span></span><br></pre></td></tr></table></figure><h6 id="hgetall"><a href="#hgetall" class="headerlink" title="hgetall()"></a>hgetall()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hgetall(name)</span></span><br><span class="line"><span class="comment"># 获取name对应hash的所有键值</span></span><br></pre></td></tr></table></figure><h6 id="hlen"><a href="#hlen" class="headerlink" title="hlen()"></a>hlen()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hlen(name)</span></span><br><span class="line"><span class="comment"># 获取name对应的hash中键值对的个数</span></span><br></pre></td></tr></table></figure><h6 id="hkeys"><a href="#hkeys" class="headerlink" title="hkeys()"></a>hkeys()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hkeys(name)</span></span><br><span class="line"><span class="comment"># 获取name对应的hash中所有的key的值</span></span><br></pre></td></tr></table></figure><h6 id="hvals"><a href="#hvals" class="headerlink" title="hvals()"></a>hvals()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hvals(name)</span></span><br><span class="line"><span class="comment"># 获取name对应的hash中所有的value的值</span></span><br></pre></td></tr></table></figure><h6 id="hexists"><a href="#hexists" class="headerlink" title="hexists()"></a>hexists()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hexists(name, key)</span></span><br><span class="line"><span class="comment"># 检查name对应的hash是否存在当前传入的key</span></span><br></pre></td></tr></table></figure><h6 id="hdel"><a href="#hdel" class="headerlink" title="hdel()"></a>hdel()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hdel(name,*keys)</span></span><br><span class="line"><span class="comment"># 将name对应的hash中指定key的键值对删除</span></span><br></pre></td></tr></table></figure><h6 id="hincrby"><a href="#hincrby" class="headerlink" title="hincrby()"></a>hincrby()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hincrby(name, key, amount=1)</span></span><br><span class="line"><span class="comment"># 自增name对应的hash中的指定key的值，不存在则创建key=amount</span></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis中的name</span></span><br><span class="line">    <span class="comment"># key， hash对应的key</span></span><br><span class="line">    <span class="comment"># amount，自增数（整数）</span></span><br></pre></td></tr></table></figure><h6 id="hincrbyfloat"><a href="#hincrbyfloat" class="headerlink" title="hincrbyfloat()"></a>hincrbyfloat()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hincrbyfloat(name, key, amount=1.0)</span></span><br><span class="line"><span class="comment"># 自增name对应的hash中的指定key的值，不存在则创建key=amount</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis中的name</span></span><br><span class="line">    <span class="comment"># key， hash对应的key</span></span><br><span class="line">    <span class="comment"># amount，自增数（浮点数）</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 自增name对应的hash中的指定key的值，不存在则创建key=amount</span></span><br></pre></td></tr></table></figure><h6 id="hscan"><a href="#hscan" class="headerlink" title="hscan()"></a>hscan()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hscan(name, cursor=0, match=None, count=None)</span></span><br><span class="line"><span class="comment"># 增量式迭代获取，对于数据大的数据非常有用，hscan可以实现分片的获取数据，并非一次性将数据全部获取完，从而放置内存被撑爆</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis的name</span></span><br><span class="line">    <span class="comment"># cursor，游标（基于游标分批取获取数据）</span></span><br><span class="line">    <span class="comment"># match，匹配指定key，默认None 表示所有的key</span></span><br><span class="line">    <span class="comment"># count，每次分片最少获取个数，默认None表示采用Redis的默认分片个数</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">    <span class="comment"># 第一次：cursor1, data1 = r.hscan(&#x27;xx&#x27;, cursor=0, match=None, count=None)</span></span><br><span class="line">    <span class="comment"># 第二次：cursor2, data1 = r.hscan(&#x27;xx&#x27;, cursor=cursor1, match=None, count=None)</span></span><br><span class="line">    <span class="comment"># ...</span></span><br><span class="line">    <span class="comment"># 直到返回值cursor的值为0时，表示数据已经通过分片获取完毕</span></span><br></pre></td></tr></table></figure><h6 id="hscan-iter"><a href="#hscan-iter" class="headerlink" title="hscan_iter()"></a>hscan_iter()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：hscan_iter(name, match=None, count=None)</span></span><br><span class="line"><span class="comment"># 利用yield封装hscan创建生成器，实现分批去redis中获取数据</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># match，匹配指定key，默认None 表示所有的key</span></span><br><span class="line">    <span class="comment"># count，每次分片最少获取个数，默认None表示采用Redis的默认分片个数</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">    <span class="comment"># for item in r.hscan_iter(&#x27;xx&#x27;):</span></span><br><span class="line">    <span class="comment">#     print item</span></span><br></pre></td></tr></table></figure><h5 id="List操作"><a href="#List操作" class="headerlink" title="List操作"></a>List操作</h5><p>redis中的List在在内存中按照一个name对应一个List来存储。如图：</p><p><img data-src="/images/425762-20160223172249115-189393001.png" alt="img"></p><h6 id="lpush"><a href="#lpush" class="headerlink" title="lpush()"></a>lpush()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：lpush(name,values)</span></span><br><span class="line"><span class="comment"># 在name对应的list中添加元素，每个新的元素都添加到列表的最左边</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">    <span class="comment"># r.lpush(&#x27;oo&#x27;, 11,22,33)</span></span><br><span class="line">    <span class="comment"># 保存顺序为: 33,22,11</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 扩展：</span></span><br><span class="line">    <span class="comment"># rpush(name, values) 表示从右向左操作</span></span><br></pre></td></tr></table></figure><h6 id="lpushx"><a href="#lpushx" class="headerlink" title="lpushx()"></a>lpushx()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：lpushx(name,value)</span></span><br><span class="line"><span class="comment"># 在name对应的list中添加元素，只有name已经存在时，值添加到列表的最左边</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 更多：</span></span><br><span class="line">    <span class="comment"># rpushx(name, value) 表示从右向左操作</span></span><br></pre></td></tr></table></figure><h6 id="llen"><a href="#llen" class="headerlink" title="llen()"></a>llen()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：llen(name)</span></span><br><span class="line"><span class="comment"># name对应的list元素的个数</span></span><br></pre></td></tr></table></figure><h6 id="linsert"><a href="#linsert" class="headerlink" title="linsert()"></a>linsert()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：linsert(name, where, refvalue, value))</span></span><br><span class="line"><span class="comment"># 在name对应的列表的某一个值前或后插入一个新值</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis的name</span></span><br><span class="line">    <span class="comment"># where，BEFORE或AFTER</span></span><br><span class="line">    <span class="comment"># refvalue，标杆值，即：在它前后插入数据</span></span><br><span class="line">    <span class="comment"># value，要插入的数据</span></span><br></pre></td></tr></table></figure><h6 id="lset"><a href="#lset" class="headerlink" title="lset()"></a>lset()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：lset(name, index, value)</span></span><br><span class="line"><span class="comment"># 对name对应的list中的某一个索引位置重新赋值</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis的name</span></span><br><span class="line">    <span class="comment"># index，list的索引位置</span></span><br><span class="line">    <span class="comment"># value，要设置的值</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h6 id="lrem"><a href="#lrem" class="headerlink" title="lrem()"></a>lrem()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：lrem(name, value, num)</span></span><br><span class="line"><span class="comment"># 在name对应的list中删除指定的值</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis的name</span></span><br><span class="line">    <span class="comment"># value，要删除的值</span></span><br><span class="line">    <span class="comment"># num，  num=0，删除列表中所有的指定值；</span></span><br><span class="line">           <span class="comment"># num=2,从前到后，删除2个；</span></span><br><span class="line">           <span class="comment"># num=-2,从后向前，删除2个</span></span><br></pre></td></tr></table></figure><h6 id="lpop"><a href="#lpop" class="headerlink" title="lpop()"></a>lpop()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：lpop(name)</span></span><br><span class="line"><span class="comment"># 在name对应的列表的左侧获取第一个元素并在列表中移除，返回值则是第一个元素</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 更多：</span></span><br><span class="line">    <span class="comment"># rpop(name) 表示从右向左操作</span></span><br></pre></td></tr></table></figure><h6 id="lindex"><a href="#lindex" class="headerlink" title="lindex()"></a>lindex()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：lindex(name, index)</span></span><br><span class="line"><span class="comment"># 在name对应的列表中根据索引获取列表元素</span></span><br></pre></td></tr></table></figure><h6 id="lrange"><a href="#lrange" class="headerlink" title="lrange()"></a>lrange()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：lrange(name, start, end)</span></span><br><span class="line"><span class="comment"># 在name对应的列表分片获取数据</span></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis的name</span></span><br><span class="line">    <span class="comment"># start，索引的起始位置</span></span><br><span class="line">    <span class="comment"># end，索引结束位置</span></span><br></pre></td></tr></table></figure><h6 id="ltrim"><a href="#ltrim" class="headerlink" title="ltrim()"></a>ltrim()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：ltrim(name, start, end)</span></span><br><span class="line"><span class="comment"># 在name对应的列表中移除没有在start-end索引之间的值</span></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis的name</span></span><br><span class="line">    <span class="comment"># start，索引的起始位置</span></span><br><span class="line">    <span class="comment"># end，索引结束位置</span></span><br></pre></td></tr></table></figure><h6 id="rpoplpush"><a href="#rpoplpush" class="headerlink" title="rpoplpush()"></a>rpoplpush()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：rpoplpush(src, dst)</span></span><br><span class="line"><span class="comment"># 从一个列表取出最右边的元素，同时将其添加至另一个列表的最左边</span></span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># src，要取数据的列表的name</span></span><br><span class="line">    <span class="comment"># dst，要添加数据的列表的name</span></span><br></pre></td></tr></table></figure><h6 id="blpopbc"><a href="#blpopbc" class="headerlink" title="blpopbc()"></a>blpopbc()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：blpop(keys, timeout)</span></span><br><span class="line"><span class="comment"># 将多个列表排列，按照从左到右去pop对应列表的元素</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># keys，redis的name的集合</span></span><br><span class="line">    <span class="comment"># timeout，超时时间，当元素所有列表的元素获取完之后，阻塞等待列表内有数据的时间（秒）, 0 表示永远阻塞</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 更多：</span></span><br><span class="line">    <span class="comment"># r.brpop(keys, timeout)，从右向左获取数据</span></span><br></pre></td></tr></table></figure><h6 id="brpoplpush"><a href="#brpoplpush" class="headerlink" title="brpoplpush()"></a>brpoplpush()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：brpoplpush(src, dst, timeout=0)</span></span><br><span class="line"><span class="comment"># 从一个列表的右侧移除一个元素并将其添加到另一个列表的左侧</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># src，取出并要移除元素的列表对应的name</span></span><br><span class="line">    <span class="comment"># dst，要插入元素的列表对应的name</span></span><br><span class="line">    <span class="comment"># timeout，当src对应的列表中没有数据时，阻塞等待其有数据的超时时间（秒），0 表示永远阻塞</span></span><br></pre></td></tr></table></figure><h6 id="自定义增量迭代"><a href="#自定义增量迭代" class="headerlink" title="自定义增量迭代"></a>自定义增量迭代</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 由于redis类库中没有提供对列表元素的增量迭代，如果想要循环name对应的列表的所有元素，那么就需要：</span></span><br><span class="line">    <span class="comment"># 1、获取name对应的所有列表</span></span><br><span class="line">    <span class="comment"># 2、循环列表</span></span><br><span class="line"><span class="comment"># 但是，如果列表非常大，那么就有可能在第一步时就将程序的内容撑爆，所有有必要自定义一个增量迭代的功能：</span></span><br><span class="line"> </span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">list_iter</span>(<span class="params">name</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;</span></span><br><span class="line"><span class="string">    自定义redis列表增量迭代</span></span><br><span class="line"><span class="string">    :param name: redis中的name，即：迭代name对应的列表</span></span><br><span class="line"><span class="string">    :return: yield 返回 列表元素</span></span><br><span class="line"><span class="string">    &quot;&quot;&quot;</span></span><br><span class="line">    list_count = r.llen(name)</span><br><span class="line">    <span class="keyword">for</span> index <span class="keyword">in</span> xrange(list_count):</span><br><span class="line">        <span class="keyword">yield</span> r.lindex(name, index)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 使用</span></span><br><span class="line"><span class="keyword">for</span> item <span class="keyword">in</span> list_iter(<span class="string">&#x27;pp&#x27;</span>):</span><br><span class="line">    <span class="keyword">print</span> item</span><br></pre></td></tr></table></figure><h5 id="Set操作"><a href="#Set操作" class="headerlink" title="Set操作"></a>Set操作</h5><p>Set集合就是不允许重复的列表</p><h6 id="sadd"><a href="#sadd" class="headerlink" title="sadd()"></a>sadd()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：sadd(name,values)</span></span><br><span class="line"><span class="comment"># name对应的集合中添加元素</span></span><br></pre></td></tr></table></figure><h6 id="scard"><a href="#scard" class="headerlink" title="scard()"></a>scard()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：scard(name)</span></span><br><span class="line"><span class="comment"># 获取name对应的集合中元素个数</span></span><br></pre></td></tr></table></figure><h6 id="sdiff"><a href="#sdiff" class="headerlink" title="sdiff()"></a>sdiff()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：sdiff(keys, *args)</span></span><br><span class="line"><span class="comment"># 在第一个name对应的集合中且不在其他name对应的集合的元素集合</span></span><br></pre></td></tr></table></figure><h6 id="sdiffstore"><a href="#sdiffstore" class="headerlink" title="sdiffstore()"></a>sdiffstore()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：sdiffstore(dest, keys, *args)</span></span><br><span class="line"><span class="comment"># 获取第一个name对应的集合中且不在其他name对应的集合，再将其新加入到dest对应的集合中</span></span><br></pre></td></tr></table></figure><h6 id="sinter"><a href="#sinter" class="headerlink" title="sinter()"></a>sinter()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：sinter(keys, *args)</span></span><br><span class="line"><span class="comment"># 获取多一个name对应集合的并集</span></span><br></pre></td></tr></table></figure><h6 id="sinterstore"><a href="#sinterstore" class="headerlink" title="sinterstore()"></a>sinterstore()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：sinterstore(dest, keys, *args)</span></span><br><span class="line"><span class="comment"># 获取多一个name对应集合的并集，再讲其加入到dest对应的集合中</span></span><br></pre></td></tr></table></figure><h6 id="sismember"><a href="#sismember" class="headerlink" title="sismember()"></a>sismember()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：sismember(name, value)</span></span><br><span class="line"><span class="comment"># 检查value是否是name对应的集合的成员</span></span><br></pre></td></tr></table></figure><h6 id="smembers"><a href="#smembers" class="headerlink" title="smembers()"></a>smembers()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：smembers(name)</span></span><br><span class="line"><span class="comment"># 获取name对应的集合的所有成员</span></span><br></pre></td></tr></table></figure><h6 id="smove"><a href="#smove" class="headerlink" title="smove()"></a>smove()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：smove(src, dst, value)</span></span><br><span class="line"><span class="comment"># 将某个成员从一个集合中移动到另外一个集合</span></span><br></pre></td></tr></table></figure><h6 id="spop"><a href="#spop" class="headerlink" title="spop()"></a>spop()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：spop(name)</span></span><br><span class="line"><span class="comment"># 从集合的右侧（尾部）移除一个成员，并将其返回</span></span><br></pre></td></tr></table></figure><h6 id="srandmember"><a href="#srandmember" class="headerlink" title="srandmember()"></a>srandmember()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：srandmember(name, numbers)</span></span><br><span class="line"><span class="comment"># 从name对应的集合中随机获取 numbers 个元素</span></span><br></pre></td></tr></table></figure><h6 id="srem"><a href="#srem" class="headerlink" title="srem()"></a>srem()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：srem(name, values)</span></span><br><span class="line"><span class="comment"># 在name对应的集合中删除某些值</span></span><br></pre></td></tr></table></figure><h6 id="sunion"><a href="#sunion" class="headerlink" title="sunion()"></a>sunion()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：sunion(keys, *args)</span></span><br><span class="line"><span class="comment"># 获取多一个name对应的集合的并集</span></span><br></pre></td></tr></table></figure><h6 id="sunionstore"><a href="#sunionstore" class="headerlink" title="sunionstore()"></a>sunionstore()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：sunionstore(dest,keys, *args)</span></span><br><span class="line"><span class="comment"># 获取多一个name对应的集合的并集，并将结果保存到dest对应的集合中</span></span><br></pre></td></tr></table></figure><h6 id="sscan-and-sscan-iter"><a href="#sscan-and-sscan-iter" class="headerlink" title="sscan() and sscan_iter()"></a>sscan() and sscan_iter()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：sscan(name, cursor=0, match=None, count=None)</span></span><br><span class="line"><span class="comment"># 语法：sscan_iter(name, match=None, count=None)</span></span><br><span class="line"><span class="comment"># 同字符串的操作，用于增量迭代分批获取元素，避免内存消耗太大</span></span><br></pre></td></tr></table></figure><h5 id="有序集合"><a href="#有序集合" class="headerlink" title="有序集合"></a>有序集合</h5><p>在集合的基础上，为每元素排序；元素的排序需要根据另外一个值来进行比较，所以，对于有序集合，每一个元素有两个值，即：值和分数，分数专门用来做排序。</p><h6 id="zadd"><a href="#zadd" class="headerlink" title="zadd()"></a>zadd()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zadd(name, *args, **kwargs)</span></span><br><span class="line"><span class="comment"># 在name对应的有序集合中添加元素</span></span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">     <span class="comment"># zadd(&#x27;zz&#x27;, &#x27;n1&#x27;, 1, &#x27;n2&#x27;, 2)</span></span><br><span class="line">     <span class="comment"># 或</span></span><br><span class="line">     <span class="comment"># zadd(&#x27;zz&#x27;, n1=11, n2=22)</span></span><br></pre></td></tr></table></figure><h6 id="zcard"><a href="#zcard" class="headerlink" title="zcard()"></a>zcard()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zcard(name)</span></span><br><span class="line"><span class="comment"># 获取name对应的有序集合元素的数量</span></span><br></pre></td></tr></table></figure><h6 id="zcount"><a href="#zcount" class="headerlink" title="zcount()"></a>zcount()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zcount(name, min, max)</span></span><br><span class="line"><span class="comment"># 获取name对应的有序集合中分数 在 [min,max] 之间的个数</span></span><br></pre></td></tr></table></figure><h6 id="zincrby"><a href="#zincrby" class="headerlink" title="zincrby()"></a>zincrby()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zincrby(name, value, amount)</span></span><br><span class="line"><span class="comment"># 自增name对应的有序集合的 name 对应的分数</span></span><br></pre></td></tr></table></figure><h6 id="zrange"><a href="#zrange" class="headerlink" title="zrange()"></a>zrange()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zrange( name, start, end, desc=False, withscores=False, score_cast_func=float)</span></span><br><span class="line"><span class="comment"># 按照索引范围获取name对应的有序集合的元素</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis的name</span></span><br><span class="line">    <span class="comment"># start，有序集合索引起始位置（非分数）</span></span><br><span class="line">    <span class="comment"># end，有序集合索引结束位置（非分数）</span></span><br><span class="line">    <span class="comment"># desc，排序规则，默认按照分数从小到大排序</span></span><br><span class="line">    <span class="comment"># withscores，是否获取元素的分数，默认只获取元素的值</span></span><br><span class="line">    <span class="comment"># score_cast_func，对分数进行数据转换的函数</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 更多：</span></span><br><span class="line">    <span class="comment"># 从大到小排序</span></span><br><span class="line">    <span class="comment"># zrevrange(name, start, end, withscores=False, score_cast_func=float)</span></span><br><span class="line"> </span><br><span class="line">    <span class="comment"># 按照分数范围获取name对应的有序集合的元素</span></span><br><span class="line">    <span class="comment"># zrangebyscore(name, min, max, start=None, num=None, withscores=False, score_cast_func=float)</span></span><br><span class="line">    <span class="comment"># 从大到小排序</span></span><br><span class="line">    <span class="comment"># zrevrangebyscore(name, max, min, start=None, num=None, withscores=False, score_cast_func=float)</span></span><br></pre></td></tr></table></figure><h6 id="zrank"><a href="#zrank" class="headerlink" title="zrank()"></a>zrank()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zrank(name, value)</span></span><br><span class="line"><span class="comment"># 获取某个值在 name对应的有序集合中的排行（从 0 开始）</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 更多：</span></span><br><span class="line">    <span class="comment"># zrevrank(name, value)，从大到小排序</span></span><br></pre></td></tr></table></figure><h6 id="zrangebylex"><a href="#zrangebylex" class="headerlink" title="zrangebylex()"></a>zrangebylex()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zrangebylex(name, min, max, start=None, num=None)</span></span><br><span class="line"><span class="comment"># 当有序集合的所有成员都具有相同的分值时，有序集合的元素会根据成员的 值 （lexicographical ordering）来进行排序，而这个命令则可以返回给定的有序集合键 key 中， 元素的值介于 min 和 max 之间的成员</span></span><br><span class="line"><span class="comment"># 对集合中的每个成员进行逐个字节的对比（byte-by-byte compare）， 并按照从低到高的顺序， 返回排序后的集合成员。 如果两个字符串有一部分内容是相同的话， 那么命令会认为较长的字符串比较短的字符串要大</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 参数：</span></span><br><span class="line">    <span class="comment"># name，redis的name</span></span><br><span class="line">    <span class="comment"># min，左区间（值）。 + 表示正无限； - 表示负无限； ( 表示开区间； [ 则表示闭区间</span></span><br><span class="line">    <span class="comment"># min，右区间（值）</span></span><br><span class="line">    <span class="comment"># start，对结果进行分片处理，索引位置</span></span><br><span class="line">    <span class="comment"># num，对结果进行分片处理，索引后面的num个元素</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 如：</span></span><br><span class="line">    <span class="comment"># ZADD myzset 0 aa 0 ba 0 ca 0 da 0 ea 0 fa 0 ga</span></span><br><span class="line">    <span class="comment"># r.zrangebylex(&#x27;myzset&#x27;, &quot;-&quot;, &quot;[ca&quot;) 结果为：[&#x27;aa&#x27;, &#x27;ba&#x27;, &#x27;ca&#x27;]</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 更多：</span></span><br><span class="line">    <span class="comment"># 从大到小排序</span></span><br><span class="line">    <span class="comment"># zrevrangebylex(name, max, min, start=None, num=None)</span></span><br></pre></td></tr></table></figure><h6 id="zrem"><a href="#zrem" class="headerlink" title="zrem()"></a>zrem()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zrem(name, values)</span></span><br><span class="line"><span class="comment"># 删除name对应的有序集合中值是values的成员</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 如：zrem(&#x27;zz&#x27;, [&#x27;s1&#x27;, &#x27;s2&#x27;])</span></span><br></pre></td></tr></table></figure><h6 id="zremrangebyrank"><a href="#zremrangebyrank" class="headerlink" title="zremrangebyrank()"></a>zremrangebyrank()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zremrangebyrank(name, min, max)</span></span><br><span class="line"><span class="comment"># 根据排行范围删除</span></span><br></pre></td></tr></table></figure><h6 id="zremrangebyscore"><a href="#zremrangebyscore" class="headerlink" title="zremrangebyscore()"></a>zremrangebyscore()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zremrangebyscore(name, min, max)</span></span><br><span class="line"><span class="comment"># 根据分数范围删除</span></span><br></pre></td></tr></table></figure><h6 id="zremrangebylex"><a href="#zremrangebylex" class="headerlink" title="zremrangebylex()"></a>zremrangebylex()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zremrangebylex(name, min, max)</span></span><br><span class="line"><span class="comment"># 根据值返回删除</span></span><br></pre></td></tr></table></figure><h6 id="zscore"><a href="#zscore" class="headerlink" title="zscore()"></a>zscore()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zscore(name, value)</span></span><br><span class="line"><span class="comment"># 获取name对应有序集合中 value 对应的分数</span></span><br></pre></td></tr></table></figure><h6 id="zinterstore"><a href="#zinterstore" class="headerlink" title="zinterstore()"></a>zinterstore()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zinterstore(dest, keys, aggregate=None)</span></span><br><span class="line"><span class="comment"># 获取两个有序集合的交集，如果遇到相同值不同分数，则按照aggregate进行操作</span></span><br><span class="line"><span class="comment"># aggregate的值为:  SUM  MIN  MAX</span></span><br></pre></td></tr></table></figure><h6 id="zunionstore"><a href="#zunionstore" class="headerlink" title="zunionstore()"></a>zunionstore()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zunionstore(dest, keys, aggregate=None)</span></span><br><span class="line"><span class="comment"># 获取两个有序集合的并集，如果遇到相同值不同分数，则按照aggregate进行操作</span></span><br><span class="line"><span class="comment"># aggregate的值为:  SUM  MIN  MAX</span></span><br></pre></td></tr></table></figure><h6 id="zscan-和-zscan-iter"><a href="#zscan-和-zscan-iter" class="headerlink" title="zscan() 和 zscan_iter()"></a>zscan() 和 zscan_iter()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：zscan(name, cursor=0, match=None, count=None, score_cast_func=float)</span></span><br><span class="line"><span class="comment"># 语法：zscan_iter(name, match=None, count=None,score_cast_func=float)</span></span><br><span class="line"><span class="comment"># 同字符串相似，相较于字符串新增score_cast_func，用来对分数进行操作</span></span><br></pre></td></tr></table></figure><h5 id="其他常用操作"><a href="#其他常用操作" class="headerlink" title="其他常用操作"></a>其他常用操作</h5><h6 id="delete"><a href="#delete" class="headerlink" title="delete()"></a>delete()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：delete(*names)</span></span><br><span class="line"><span class="comment"># 根据删除redis中的任意数据类型</span></span><br></pre></td></tr></table></figure><h6 id="exists"><a href="#exists" class="headerlink" title="exists()"></a>exists()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：exists(name)</span></span><br><span class="line"><span class="comment"># 检测redis的name是否存在</span></span><br></pre></td></tr></table></figure><h6 id="keys"><a href="#keys" class="headerlink" title="keys()"></a>keys()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：keys(pattern=&#x27;*&#x27;)</span></span><br><span class="line"><span class="comment"># 根据模型获取redis的name</span></span><br><span class="line"> </span><br><span class="line"><span class="comment"># 更多：</span></span><br><span class="line">    <span class="comment"># KEYS * 匹配数据库中所有 key 。</span></span><br><span class="line">    <span class="comment"># KEYS h?llo 匹配 hello ， hallo 和 hxllo 等。</span></span><br><span class="line">    <span class="comment"># KEYS h*llo 匹配 hllo 和 heeeeello 等。</span></span><br><span class="line">    <span class="comment"># KEYS h[ae]llo 匹配 hello 和 hallo ，但不匹配 hillo</span></span><br></pre></td></tr></table></figure><h6 id="expire"><a href="#expire" class="headerlink" title="expire()"></a>expire()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：expire(name ,time)</span></span><br><span class="line"><span class="comment"># 为某个redis的某个name设置超时时间</span></span><br></pre></td></tr></table></figure><h6 id="rename"><a href="#rename" class="headerlink" title="rename()"></a>rename()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：rename(src, dst)	</span></span><br><span class="line"><span class="comment"># 对redis的name重命名为</span></span><br></pre></td></tr></table></figure><h6 id="move"><a href="#move" class="headerlink" title="move()"></a>move()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：move(name, db))</span></span><br><span class="line"><span class="comment"># 将redis的某个值移动到指定的db下</span></span><br></pre></td></tr></table></figure><h6 id="randomkey"><a href="#randomkey" class="headerlink" title="randomkey()"></a>randomkey()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：randomkey()</span></span><br><span class="line"><span class="comment"># 随机获取一个redis的name（不删除）</span></span><br></pre></td></tr></table></figure><h6 id="type"><a href="#type" class="headerlink" title="type()"></a>type()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：type(name)</span></span><br><span class="line"><span class="comment"># 获取name对应值的类型</span></span><br></pre></td></tr></table></figure><h6 id="scan-和scan-iter"><a href="#scan-和scan-iter" class="headerlink" title="scan()和scan_iter()"></a>scan()和scan_iter()</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 语法：scan(cursor=0, match=None, count=None)</span></span><br><span class="line"><span class="comment"># 语法：scan_iter(match=None, count=None)</span></span><br><span class="line"><span class="comment"># 同字符串操作，用于增量迭代获取key</span></span><br></pre></td></tr></table></figure><h4 id="管道"><a href="#管道" class="headerlink" title="管道"></a>管道</h4><p>redis-py默认在执行每次请求都会创建（连接池申请连接）和断开（归还连接池）一次连接操作，如果想要在一次请求中指定多个命令，则可以使用pipline实现一次请求指定多个命令，并且默认情况下一次pipline 是原子性操作。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"> </span><br><span class="line">pool = redis.ConnectionPool(host=<span class="string">&#x27;10.211.55.4&#x27;</span>, port=<span class="number">6379</span>)</span><br><span class="line"> </span><br><span class="line">r = redis.Redis(connection_pool=pool)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># pipe = r.pipeline(transaction=False)</span></span><br><span class="line">pipe = r.pipeline(transaction=<span class="literal">True</span>)</span><br><span class="line">pipe.multi()</span><br><span class="line">pipe.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;alex&#x27;</span>)</span><br><span class="line">pipe.set(<span class="string">&#x27;role&#x27;</span>, <span class="string">&#x27;sb&#x27;</span>)</span><br><span class="line"> </span><br><span class="line">pipe.execute()</span><br></pre></td></tr></table></figure><h6 id="实现计数器"><a href="#实现计数器" class="headerlink" title="实现计数器"></a>实现计数器</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line">conn = redis.Redis(host=<span class="string">&#x27;192.168.1.41&#x27;</span>,port=<span class="number">6379</span>)</span><br><span class="line"></span><br><span class="line">conn.set(<span class="string">&#x27;count&#x27;</span>,<span class="number">1000</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> conn.pipeline() <span class="keyword">as</span> pipe:</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 先监视，自己的值没有被修改过</span></span><br><span class="line">    conn.watch(<span class="string">&#x27;count&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 事务开始</span></span><br><span class="line">    pipe.multi()</span><br><span class="line">    old_count = conn.get(<span class="string">&#x27;count&#x27;</span>)</span><br><span class="line">    count = int(old_count)</span><br><span class="line">    <span class="keyword">if</span> count &gt; <span class="number">0</span>:  <span class="comment"># 有库存</span></span><br><span class="line">        pipe.set(<span class="string">&#x27;count&#x27;</span>, count - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 执行，把所有命令一次性推送过去</span></span><br><span class="line">    pipe.execute()</span><br></pre></td></tr></table></figure><h4 id="发布订阅"><a href="#发布订阅" class="headerlink" title="发布订阅"></a>发布订阅</h4><p><img data-src="/images/425762-20160121152411125-1838441844.png" alt="img"></p><p>发布者：服务器</p><p>订阅者：Dashboad和数据处理</p><h6 id="Demo"><a href="#Demo" class="headerlink" title="Demo"></a>Demo</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> redis</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RedisHelper</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.__conn = redis.Redis(host=<span class="string">&#x27;10.211.55.4&#x27;</span>)</span><br><span class="line">        self.chan_sub = <span class="string">&#x27;fm104.5&#x27;</span></span><br><span class="line">        self.chan_pub = <span class="string">&#x27;fm104.5&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">public</span>(<span class="params">self, msg</span>):</span></span><br><span class="line">        self.__conn.publish(self.chan_pub, msg)</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">subscribe</span>(<span class="params">self</span>):</span></span><br><span class="line">        pub = self.__conn.pubsub()</span><br><span class="line">        pub.subscribe(self.chan_sub)</span><br><span class="line">        pub.parse_response()</span><br><span class="line">        <span class="keyword">return</span> pub</span><br><span class="line"></span><br><span class="line">RedisHelper</span><br></pre></td></tr></table></figure><h6 id="订阅者"><a href="#订阅者" class="headerlink" title="订阅者"></a>订阅者</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> monitor.RedisHelper <span class="keyword">import</span> RedisHelper</span><br><span class="line"> </span><br><span class="line">obj = RedisHelper()</span><br><span class="line">redis_sub = obj.subscribe()</span><br><span class="line"> </span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    msg= redis_sub.parse_response()</span><br><span class="line">    <span class="keyword">print</span> msg</span><br></pre></td></tr></table></figure><h6 id="发布者"><a href="#发布者" class="headerlink" title="发布者"></a>发布者</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> monitor.RedisHelper <span class="keyword">import</span> RedisHelper</span><br><span class="line"> </span><br><span class="line">obj = RedisHelper()</span><br><span class="line">obj.public(<span class="string">&#x27;hello&#x27;</span>)</span><br></pre></td></tr></table></figure><h4 id="sentinel"><a href="#sentinel" class="headerlink" title="sentinel"></a>sentinel</h4><p>redis重的sentinel主要用于在redis主从复制中，如果master顾上，则自动将slave替换成master</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> redis.sentinel <span class="keyword">import</span> Sentinel</span><br><span class="line"> </span><br><span class="line"><span class="comment"># 连接哨兵服务器(主机名也可以用域名)</span></span><br><span class="line">sentinel = Sentinel([(<span class="string">&#x27;10.211.55.20&#x27;</span>, <span class="number">26379</span>),</span><br><span class="line">                     (<span class="string">&#x27;10.211.55.20&#x27;</span>, <span class="number">26380</span>),</span><br><span class="line">                     ],</span><br><span class="line">                    socket_timeout=<span class="number">0.5</span>)</span><br><span class="line"> </span><br><span class="line"><span class="comment"># # 获取主服务器地址</span></span><br><span class="line"><span class="comment"># master = sentinel.discover_master(&#x27;mymaster&#x27;)</span></span><br><span class="line"><span class="comment"># print(master)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># # # 获取从服务器地址</span></span><br><span class="line"><span class="comment"># slave = sentinel.discover_slaves(&#x27;mymaster&#x27;)</span></span><br><span class="line"><span class="comment"># print(slave)</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment"># # # 获取主服务器进行写入</span></span><br><span class="line"><span class="comment"># master = sentinel.master_for(&#x27;mymaster&#x27;)</span></span><br><span class="line"><span class="comment"># master.set(&#x27;foo&#x27;, &#x27;bar&#x27;)</span></span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="comment"># # # # 获取从服务器进行读取（默认是round-roubin）</span></span><br><span class="line"><span class="comment"># slave = sentinel.slave_for(&#x27;mymaster&#x27;, password=&#x27;redis_auth_pass&#x27;)</span></span><br><span class="line"><span class="comment"># r_ret = slave.get(&#x27;foo&#x27;)</span></span><br><span class="line"><span class="comment"># print(r_ret)</span></span><br></pre></td></tr></table></figure><p>更多参见：<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FuZHltY2N1cmR5L3JlZGlzLXB5Lw==">https://github.com/andymccurdy/redis-py/<i class="fa fa-external-link-alt"></i></span></p><p><span class="exturl" data-url="aHR0cDovL2RvYy5yZWRpc2ZhbnMuY29tLw==">http://doc.redisfans.com/<i class="fa fa-external-link-alt"></i></span></p></div><div class="popular-posts-header">相关文章</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="/ade73181.html" rel="bookmark">Redis介绍与优势对比</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/8aa6b5c4.html" rel="bookmark">给你讲个关于Redis的故事</a></div></li></ul><footer class="post-footer"><div class="reward-container"><div>打赏个鸡腿</div><button onclick='document.querySelector(".post-reward").classList.toggle("active")'>赞赏</button><div class="post-reward"><div><img src="/images/wechatpay.jpg" alt="托小尼 微信"> <span>微信</span></div><div><img src="/images/alipay.jpg" alt="托小尼 支付宝"> <span>支付宝</span></div></div></div><div class="post-tags"><a href="/tags/redis/" rel="tag"><i class="fa fa-tag"></i> redis</a> <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag"><i class="fa fa-tag"></i> 数据库</a> <a href="/tags/%E8%BF%9E%E6%8E%A5%E6%B1%A0/" rel="tag"><i class="fa fa-tag"></i> 连接池</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E6%A8%A1%E5%BC%8F/" rel="tag"><i class="fa fa-tag"></i> 操作模式</a> <a href="/tags/string%E6%93%8D%E4%BD%9C/" rel="tag"><i class="fa fa-tag"></i> string操作</a> <a href="/tags/hash%E6%93%8D%E4%BD%9C/" rel="tag"><i class="fa fa-tag"></i> hash操作</a> <a href="/tags/list%E6%93%8D%E4%BD%9C/" rel="tag"><i class="fa fa-tag"></i> list操作</a> <a href="/tags/set%E6%93%8D%E4%BD%9C/" rel="tag"><i class="fa fa-tag"></i> set操作</a> <a href="/tags/%E6%9C%89%E5%BA%8F%E9%9B%86%E5%90%88%E6%93%8D%E4%BD%9C/" rel="tag"><i class="fa fa-tag"></i> 有序集合操作</a> <a href="/tags/%E7%AE%A1%E9%81%93/" rel="tag"><i class="fa fa-tag"></i> 管道</a></div><div class="post-nav"><div class="post-nav-item"><a href="/38deb4fa.html" rel="prev" title="强推一个抠图python神库(含在线抠图)"><i class="fa fa-chevron-left"></i> 强推一个抠图python神库(含在线抠图)</a></div><div class="post-nav-item"><a href="/ade73181.html" rel="next" title="Redis介绍与优势对比">Redis介绍与优势对比 <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="comments"><div id="SOHUCS"></div></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><span class="exturl" data-url="aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbg==">豫ICP备17028303号-1 </span><img src="http://www.beian.gov.cn/portal/download" style="display:inline-block"><span class="exturl" data-url="aHR0cDovL3d3dy5iZWlhbi5nb3YuY24vcG9ydGFsL3JlZ2lzdGVyU3lzdGVtSW5mbz9yZWNvcmRjb2RlPTE3MDI4MzAz">豫公网安备 41102402000095号</span></div><div class="copyright">&copy; <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Tony Yu</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="站点总字数">1.3m</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">19:54</span></span></div></div></footer><script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1.15.0/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>NexT.utils.loadComments('#SOHUCS', () => {
    NexT.utils.getScript('https://changyan.sohu.com/upload/changyan.js', () => {
      window.changyan.api.config({
        appid: 'cyu11Umgd',
        conf : '0f296687f6a61e82028fd7c6ddf32ab9'
      });
    });
  });</script><script src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script></body></html>