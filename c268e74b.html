<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.1.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/56x56logo.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/56x56logo.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/images/400x400logo.png" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"><script class="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"www.diandian100.cn",root:"/",scheme:"Gemini",version:"8.0.0",exturl:!0,sidebar:{position:"left",display:"always",padding:18,offset:12},copycode:!0,bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!0,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"fadeInDown",post_body:"fadeInDown",coll_header:"fadeInLeft",sidebar:"fadeInUp"}},prism:!1,i18n:{placeholder:"搜索...",empty:"没有找到任何搜索结果：${query}",hits_time:"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）",hits:"找到 ${hits} 个搜索结果"},path:"search.xml",localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1}}</script><meta name="description" content="Linux的网络功能相当强悍，一时之间我们无法了解所有的网络命令，在配置服务器基础环境时，先了解下网络参数设定命令。  ifconfig　　查询、设置网卡和ip等参数 ifup,ifdown    脚本命令，更简单的方式启动关闭网络 ip　　符合指令，直接修改上述功能"><meta property="og:type" content="article"><meta property="og:title" content="Linux系统基础优化及常用命令"><meta property="og:url" content="https://www.diandian100.cn/c268e74b.html"><meta property="og:site_name" content="点点开发技术分享"><meta property="og:description" content="Linux的网络功能相当强悍，一时之间我们无法了解所有的网络命令，在配置服务器基础环境时，先了解下网络参数设定命令。  ifconfig　　查询、设置网卡和ip等参数 ifup,ifdown    脚本命令，更简单的方式启动关闭网络 ip　　符合指令，直接修改上述功能"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://raw.githubusercontent.com/tonyu2019/PicGo/master/20190807104957.png"><meta property="og:image" content="https://raw.githubusercontent.com/tonyu2019/PicGo/master/20190807120121.png"><meta property="og:image" content="https://raw.githubusercontent.com/tonyu2019/PicGo/master/20190807120837.png"><meta property="og:image" content="https://raw.githubusercontent.com/tonyu2019/PicGo/master/20190807160644.png"><meta property="article:published_time" content="2019-08-07T01:15:00.000Z"><meta property="article:modified_time" content="2020-09-04T01:00:24.000Z"><meta property="article:author" content="托小尼"><meta property="article:tag" content="定时任务"><meta property="article:tag" content="ip"><meta property="article:tag" content="Linux命令"><meta property="article:tag" content="ifconfig"><meta property="article:tag" content="ifup"><meta property="article:tag" content="ifdown"><meta property="article:tag" content="xshell"><meta property="article:tag" content="添加用户"><meta property="article:tag" content="切换用户"><meta property="article:tag" content="useradd"><meta property="article:tag" content="groupadd"><meta property="article:tag" content="userdel"><meta property="article:tag" content="软连接"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://raw.githubusercontent.com/tonyu2019/PicGo/master/20190807104957.png"><link rel="canonical" href="https://www.diandian100.cn/c268e74b.html"><script class="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>Linux系统基础优化及常用命令 | 点点开发技术分享</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3b57832214417f66931e694d19fd60b9";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>body{margin-top:2rem}.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header,.use-motion .sidebar{visibility:visible}.use-motion .footer,.use-motion .header,.use-motion .site-brand-container .toggle{opacity:initial}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line{transform:scaleX(1)}.search-pop-overlay,.sidebar-nav{display:none}.sidebar-panel{display:block}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">点点开发技术分享</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">记录个人日常开发笔记与技巧</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-development"><a href="/categories/rd/" rel="section"><i class="fa fa-code fa-fw"></i>开发</a></li><li class="menu-item menu-item-frontend"><a href="/categories/fe/" rel="section"><i class="fab fa-html5 fa-fw"></i>前端</a></li><li class="menu-item menu-item-database"><a href="/categories/db/" rel="section"><i class="fa fa-database fa-fw"></i>数据库</a></li><li class="menu-item menu-item-os"><a href="/categories/os/" rel="section"><i class="fab fa-linux fa-fw"></i>系统</a></li><li class="menu-item menu-item-other"><a href="/categories/other/" rel="section"><i class="far fa-paper-plane fa-fw"></i>其他</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><section class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux%E7%9A%84%E7%BD%91%E7%BB%9C%E5%8A%9F%E8%83%BD"><span class="nav-number">1.</span> <span class="nav-text">Linux的网络功能</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E5%8D%A1%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E8%AF%A6%E8%A7%A3"><span class="nav-number">1.1.</span> <span class="nav-text">网卡配置文件详解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ifup-ifdown%E5%91%BD%E4%BB%A4"><span class="nav-number">1.2.</span> <span class="nav-text">ifup,ifdown命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ifup"><span class="nav-number">1.2.1.</span> <span class="nav-text">ifup</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%82%E6%95%B0"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ifdown"><span class="nav-number">1.2.2.</span> <span class="nav-text">ifdown</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-1"><span class="nav-number">1.2.2.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-1"><span class="nav-number">1.2.2.2.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-1"><span class="nav-number">1.2.2.3.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ifconfig%E5%91%BD%E4%BB%A4"><span class="nav-number">1.3.</span> <span class="nav-text">ifconfig命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-2"><span class="nav-number">1.3.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-2"><span class="nav-number">1.3.2.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-2"><span class="nav-number">1.3.3.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ip%E5%91%BD%E4%BB%A4"><span class="nav-number">1.4.</span> <span class="nav-text">ip命令</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E7%AE%A1%E7%90%86%E4%B8%8E%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E7%AF%87"><span class="nav-number">2.</span> <span class="nav-text">用户管理与文件权限篇</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%94%A8%E6%88%B7"><span class="nav-number">2.1.</span> <span class="nav-text">创建普通用户</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#useradd"><span class="nav-number">2.1.1.</span> <span class="nav-text">useradd</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-3"><span class="nav-number">2.1.1.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%89%E9%A1%B9"><span class="nav-number">2.1.1.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-3"><span class="nav-number">2.1.1.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-3"><span class="nav-number">2.1.1.4.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#passwd"><span class="nav-number">2.1.2.</span> <span class="nav-text">passwd</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-4"><span class="nav-number">2.1.2.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-1"><span class="nav-number">2.1.2.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-4"><span class="nav-number">2.1.2.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E6%89%A9%E5%B1%95"><span class="nav-number">2.1.2.4.</span> <span class="nav-text">知识扩展</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-4"><span class="nav-number">2.1.2.5.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7"><span class="nav-number">2.2.</span> <span class="nav-text">切换用户</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#groupadd%E5%91%BD%E4%BB%A4"><span class="nav-number">2.2.1.</span> <span class="nav-text">groupadd命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-5"><span class="nav-number">2.2.1.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-2"><span class="nav-number">2.2.1.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-5"><span class="nav-number">2.2.1.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-5"><span class="nav-number">2.2.1.4.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#userdel%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="nav-number">2.3.</span> <span class="nav-text">userdel删除用户</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-6"><span class="nav-number">2.3.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-3"><span class="nav-number">2.3.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-6"><span class="nav-number">2.3.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-6"><span class="nav-number">2.3.4.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sudo%E5%91%BD%E4%BB%A4"><span class="nav-number">2.4.</span> <span class="nav-text">sudo命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-7"><span class="nav-number">2.4.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-4"><span class="nav-number">2.4.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-7"><span class="nav-number">2.4.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-7"><span class="nav-number">2.4.4.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90"><span class="nav-number">3.</span> <span class="nav-text">文件与目录权限</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E6%9D%83%E9%99%90"><span class="nav-number">3.1.</span> <span class="nav-text">什么是权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux%E6%9D%83%E9%99%90%E7%9A%84%E8%A7%82%E5%AF%9F"><span class="nav-number">3.2.</span> <span class="nav-text">Linux权限的观察</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90"><span class="nav-number">3.3.</span> <span class="nav-text">文件权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95%E6%9D%83%E9%99%90"><span class="nav-number">3.4.</span> <span class="nav-text">目录权限</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B%E7%94%A8%E6%88%B7%E6%9D%83%E9%99%90%E5%91%BD%E4%BB%A4"><span class="nav-number">3.5.</span> <span class="nav-text">查看用户权限命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#id"><span class="nav-number">3.5.1.</span> <span class="nav-text">id</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-8"><span class="nav-number">3.5.1.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-5"><span class="nav-number">3.5.1.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-8"><span class="nav-number">3.5.1.3.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E5%B1%9E%E6%80%A7"><span class="nav-number">3.6.</span> <span class="nav-text">修改文件权限属性</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#chown"><span class="nav-number">3.6.1.</span> <span class="nav-text">chown</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-9"><span class="nav-number">3.6.1.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-6"><span class="nav-number">3.6.1.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-8"><span class="nav-number">3.6.1.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-9"><span class="nav-number">3.6.1.4.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#chgrp"><span class="nav-number">3.6.2.</span> <span class="nav-text">chgrp</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-10"><span class="nav-number">3.6.2.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-7"><span class="nav-number">3.6.2.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-9"><span class="nav-number">3.6.2.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-10"><span class="nav-number">3.6.2.4.</span> <span class="nav-text">实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%9D%83%E9%99%90%E7%9A%84%E5%91%BD%E4%BB%A4"><span class="nav-number">3.7.</span> <span class="nav-text">修改权限的命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#chmod"><span class="nav-number">3.7.1.</span> <span class="nav-text">chmod</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-11"><span class="nav-number">3.7.1.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-8"><span class="nav-number">3.7.1.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-10"><span class="nav-number">3.7.1.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E6%89%A9%E5%B1%95%E5%92%8C%E5%AE%9E%E4%BE%8B"><span class="nav-number">3.7.1.4.</span> <span class="nav-text">知识扩展和实例</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AF%E8%BF%9E%E6%8E%A5"><span class="nav-number">3.8.</span> <span class="nav-text">软连接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ln"><span class="nav-number">3.8.1.</span> <span class="nav-text">ln</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-12"><span class="nav-number">3.8.1.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-9"><span class="nav-number">3.8.1.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-11"><span class="nav-number">3.8.1.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-11"><span class="nav-number">3.8.1.4.</span> <span class="nav-text">实例</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86"><span class="nav-number">3.8.1.5.</span> <span class="nav-text">扩展知识</span></a><ol class="nav-child"><li class="nav-item nav-level-6"><a class="nav-link" href="#%E7%A1%AC%E9%93%BE%E6%8E%A5"><span class="nav-number">3.8.1.5.1.</span> <span class="nav-text">硬链接</span></a></li></ol></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AC%A6%E5%8F%B7%E9%93%BE%E6%8E%A5"><span class="nav-number">3.8.1.6.</span> <span class="nav-text">符号链接</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#PS1%E5%8F%98%E9%87%8F"><span class="nav-number">3.8.2.</span> <span class="nav-text">PS1变量</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tar%E8%A7%A3%E5%8E%8B%E5%91%BD%E4%BB%A4"><span class="nav-number">3.9.</span> <span class="nav-text">tar解压命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-13"><span class="nav-number">3.9.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-10"><span class="nav-number">3.9.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-12"><span class="nav-number">3.9.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-12"><span class="nav-number">3.9.4.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#netstat%E5%91%BD%E4%BB%A4"><span class="nav-number">3.10.</span> <span class="nav-text">netstat命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-14"><span class="nav-number">3.10.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-%E5%B8%B8%E7%94%A8"><span class="nav-number">3.10.2.</span> <span class="nav-text">选项 (常用)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-13"><span class="nav-number">3.10.3.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ps%E5%91%BD%E4%BB%A4"><span class="nav-number">3.11.</span> <span class="nav-text">ps命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-15"><span class="nav-number">3.12.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-11"><span class="nav-number">3.13.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kill%E5%91%BD%E4%BB%A4"><span class="nav-number">3.14.</span> <span class="nav-text">kill命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-16"><span class="nav-number">3.14.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-12"><span class="nav-number">3.14.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-13"><span class="nav-number">3.14.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-14"><span class="nav-number">3.14.4.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#killall%E5%91%BD%E4%BB%A4"><span class="nav-number">3.15.</span> <span class="nav-text">killall命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-17"><span class="nav-number">3.15.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-13"><span class="nav-number">3.15.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-14"><span class="nav-number">3.15.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-15"><span class="nav-number">3.15.4.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SELinux%E5%8A%9F%E8%83%BD"><span class="nav-number">3.16.</span> <span class="nav-text">SELinux功能</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iptables%E9%98%B2%E7%81%AB%E5%A2%99"><span class="nav-number">3.17.</span> <span class="nav-text">iptables防火墙</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux%E4%B8%AD%E6%96%87%E6%98%BE%E7%A4%BA%E8%AE%BE%E7%BD%AE%EF%BC%88%E9%98%B2%E6%AD%A2%E4%B8%AD%E6%96%87%E4%B9%B1%E7%A0%81%EF%BC%89"><span class="nav-number">3.18.</span> <span class="nav-text">Linux中文显示设置（防止中文乱码）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#df%E5%91%BD%E4%BB%A4"><span class="nav-number">3.19.</span> <span class="nav-text">df命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-18"><span class="nav-number">3.19.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-14"><span class="nav-number">3.19.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-15"><span class="nav-number">3.19.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-16"><span class="nav-number">3.19.4.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#tree%E5%91%BD%E4%BB%A4"><span class="nav-number">3.20.</span> <span class="nav-text">tree命令</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-19"><span class="nav-number">3.20.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-15"><span class="nav-number">3.20.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-16"><span class="nav-number">3.20.3.</span> <span class="nav-text">参数</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E4%B8%BB%E6%9C%BA%E5%90%8D"><span class="nav-number">3.21.</span> <span class="nav-text">设置主机名</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DNS"><span class="nav-number">3.22.</span> <span class="nav-text">DNS</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8BLinux%E7%9A%84dns%EF%BC%8C%E5%94%AF%E4%B8%80%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">3.22.1.</span> <span class="nav-text">查看Linux的dns，唯一配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9C%AC%E5%9C%B0%E5%BC%BA%E5%88%B6dns%E8%A7%A3%E6%9E%90%E6%96%87%E4%BB%B6-etc-hosts"><span class="nav-number">3.22.2.</span> <span class="nav-text">本地强制dns解析文件&#x2F;etc&#x2F;hosts</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#nslookup%E5%91%BD%E4%BB%A4"><span class="nav-number">3.23.</span> <span class="nav-text">nslookup命令</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A1%E5%88%92%E4%BB%BB%E5%8A%A1crond%E6%9C%8D%E5%8A%A1"><span class="nav-number">3.24.</span> <span class="nav-text">计划任务crond服务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AF%AD%E6%B3%95-20"><span class="nav-number">3.24.1.</span> <span class="nav-text">语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E9%A1%B9-16"><span class="nav-number">3.24.2.</span> <span class="nav-text">选项</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0-17"><span class="nav-number">3.24.3.</span> <span class="nav-text">参数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9F%A5%E8%AF%86%E6%89%A9%E5%B1%95-1"><span class="nav-number">3.24.4.</span> <span class="nav-text">知识扩展</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E4%BE%8B-17"><span class="nav-number">3.24.5.</span> <span class="nav-text">实例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BF%85%E9%A1%BB%E6%8E%8C%E6%8F%A1%E7%9A%84-etc%E4%B8%8B%E7%9A%84linux%E7%9B%AE%E5%BD%95%E7%9F%A5%E8%AF%86"><span class="nav-number">3.25.</span> <span class="nav-text">必须掌握的&#x2F;etc下的linux目录知识</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E5%8F%98%E9%87%8F"><span class="nav-number">3.26.</span> <span class="nav-text">环境变量</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A0%E5%85%A5-PATH"><span class="nav-number">3.26.1.</span> <span class="nav-text">加入$PATH</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E8%BD%AF%E8%BF%9E%E6%8E%A5"><span class="nav-number">3.26.2.</span> <span class="nav-text">使用软连接</span></a></li></ol></li></ol></li></ol></div></section><section class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="托小尼" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">托小尼</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">189</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">30</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">1156</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cDovL3dwYS5xcS5jb20vbXNncmQ/dj0zJnVpbj02NDY1NDc5ODkmc2l0ZT1xcSZtZW51PXllcw==" title="QQ → http:&#x2F;&#x2F;wpa.qq.com&#x2F;msgrd?v&#x3D;3&amp;uin&#x3D;646547989&amp;site&#x3D;qq&amp;menu&#x3D;yes"><i class="fab fa-qq fa-fw"></i>QQ</span> </span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOnRvbnl5dUB2aXAucXEuY29t" title="E-Mail → mailto:tonyyu@vip.qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span></span></div></section></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Rvbnl1MjAxOQ==" title="关注我" aria-label="关注我"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.diandian100.cn/c268e74b.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="托小尼"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="点点开发技术分享"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Linux系统基础优化及常用命令</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2019-08-07 09:15:00" itemprop="dateCreated datePublished" datetime="2019-08-07T09:15:00+08:00">2019-08-07</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar-check"></i> </span><span class="post-meta-item-text">更新于</span> <time title="修改时间：2020-09-04 09:00:24" itemprop="dateModified" datetime="2020-09-04T09:00:24+08:00">2020-09-04</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/os/" itemprop="url" rel="index"><span itemprop="name">os</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/os/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Changyan：</span> <a title="changyan" href="/c268e74b.html#SOHUCS" itemprop="discussionUrl"><span id="changyan_count_unit" class="post-comments-count hc-comment-count" data-xid="c268e74b.html" itemprop="commentCount"></span></a></span></div><div class="post-meta"><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>38k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>34 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>Linux的网络功能相当强悍，一时之间我们无法了解所有的网络命令，在配置服务器基础环境时，先了解下网络参数设定命令。</p><ul><li><code>ifconfig</code>　　查询、设置网卡和<code>ip</code>等参数</li><li><code>ifup</code>,<code>ifdown</code> 脚本命令，更简单的方式启动关闭网络</li><li><code>ip</code>　　符合指令，直接修改上述功能</li></ul><a id="more"></a><h2 id="Linux的网络功能"><a href="#Linux的网络功能" class="headerlink" title="Linux的网络功能"></a>Linux的网络功能</h2><p>在我们刚装好<code>linux</code>的时候，需要用<code>xshell</code>进行远程连接，那就得获取<code>ip</code>地址，有时候网卡默认是没启动的，<code>Linux</code>也就拿不到<code>ip</code>地址，因此我们得手动启动网卡</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#编辑网卡配置文件</span></span><br><span class="line">vim /etc/sysconfig/network<span class="literal">-scripts</span>/ifcfg<span class="literal">-eth0</span> </span><br><span class="line"><span class="comment">#修改配置参数</span></span><br><span class="line">ONBOOT=yes</span><br></pre></td></tr></table></figure><h3 id="网卡配置文件详解"><a href="#网卡配置文件详解" class="headerlink" title="网卡配置文件详解"></a>网卡配置文件详解</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 网络配置文件：</span></span><br><span class="line">/etc/sysconfig/network</span><br><span class="line"></span><br><span class="line"><span class="comment"># 网络接口配置文件：</span></span><br><span class="line">/etc/sysconfig/network<span class="literal">-scripts</span>/ifcfg<span class="literal">-INTERFACE_NAME</span></span><br><span class="line">DEVICE=: 关联的设备名称，要与文件名的后半部“INTERFACE_NAME”保持一致; </span><br><span class="line">BOOTPROTO=&#123;<span class="keyword">static</span>|none|dhcp|bootp&#125;: 引导协议；要使用静态地址，使用<span class="keyword">static</span>或none；dhcp表示使用DHCP服务器获取地址；</span><br><span class="line">IPADDR=: IP地址</span><br><span class="line">NETMASK=：子网掩码</span><br><span class="line">GATEWAY=：设定默认网关；</span><br><span class="line">ONBOOT=：开机时是否自动激活此网络接口；</span><br><span class="line">HWADDR=： 硬件地址，要与硬件中的地址保持一致；可省；</span><br><span class="line">USERCTL=&#123;yes|no&#125;: 是否允许普通用户控制此接口；</span><br><span class="line">PEERDNS=&#123;yes|no&#125;: 是否在BOOTPROTO为dhcp时接受由DHCP服务器指定的DNS地址；</span><br></pre></td></tr></table></figure><h3 id="ifup-ifdown命令"><a href="#ifup-ifdown命令" class="headerlink" title="ifup,ifdown命令"></a><code>ifup</code>,<code>ifdown</code>命令</h3><p><code>ifup</code>和<code>ifdown</code>是直接连接到<code>/etc/sysconfig/network-scripts</code>目录下搜索对应的网卡文件，例如<code>ifcfg-eth0</code>然后加以设置</p><h4 id="ifup"><a href="#ifup" class="headerlink" title="ifup"></a><code>ifup</code></h4><p><strong><code>ifup</code>命令</strong>用于激活指定的网络接口。</p><h5 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifup(参数)</span><br></pre></td></tr></table></figure><h5 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h5><p>网络接口：要激活的网络接口。</p><h5 id="实例"><a href="#实例" class="headerlink" title="实例"></a>实例</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifup eth0   <span class="comment">#激活eth0</span></span><br></pre></td></tr></table></figure><h4 id="ifdown"><a href="#ifdown" class="headerlink" title="ifdown"></a><code>ifdown</code></h4><p><strong><code>ifdown</code>命令</strong>用于禁用指定的网络接口。</p><h5 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifdown(参数)</span><br></pre></td></tr></table></figure><h5 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h5><p>网络接口：要禁用的网络接口。</p><h5 id="实例-1"><a href="#实例-1" class="headerlink" title="实例"></a>实例</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifdown eth0  <span class="comment">#禁用eth0</span></span><br></pre></td></tr></table></figure><h3 id="ifconfig命令"><a href="#ifconfig命令" class="headerlink" title="ifconfig命令"></a><code>ifconfig</code>命令</h3><p><strong><code>ifconfig</code>命令</strong>被用于配置和显示Linux内核中网络接口的网络参数。用<code>ifconfig</code>命令配置的网卡信息，在网卡重启后机器重启后，配置就不存在。要想将上述的配置信息永远的存的电脑里，那就要修改网卡的配置文件了。</p><h4 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig(参数)</span><br></pre></td></tr></table></figure><h4 id="参数-2"><a href="#参数-2" class="headerlink" title="参数"></a>参数</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">add&lt;地址&gt;：设置网络设备IPv6的ip地址；</span><br><span class="line"><span class="built_in">del</span>&lt;地址&gt;：删除网络设备IPv6的IP地址；</span><br><span class="line">down：关闭指定的网络设备；</span><br><span class="line">&lt;hw&lt;网络设备类型&gt;&lt;硬件地址&gt;：设置网络设备的类型与硬件地址；</span><br><span class="line">io_addr&lt;I/O地址&gt;：设置网络设备的I/O地址；</span><br><span class="line">irq&lt;IRQ地址&gt;：设置网络设备的IRQ；</span><br><span class="line">media&lt;网络媒介类型&gt;：设置网络设备的媒介类型；</span><br><span class="line">mem_start&lt;内存地址&gt;：设置网络设备在主内存所占用的起始地址；</span><br><span class="line">metric&lt;数目&gt;：指定在计算数据包的转送次数时，所要加上的数目；</span><br><span class="line">mtu&lt;字节&gt;：设置网络设备的MTU；</span><br><span class="line">netmask&lt;子网掩码&gt;：设置网络设备的子网掩码；</span><br><span class="line">tunnel&lt;地址&gt;：建立IPv4与IPv6之间的隧道通信地址；</span><br><span class="line">up：启动指定的网络设备；</span><br><span class="line"><span class="literal">-broadcast</span>&lt;地址&gt;：将要送往指定地址的数据包当成广播数据包来处理；</span><br><span class="line"><span class="literal">-pointopoint</span>&lt;地址&gt;：与指定地址的网络设备建立直接连线，此模式具有保密功能；</span><br><span class="line"><span class="literal">-promisc</span>：关闭或启动指定网络设备的promiscuous模式；</span><br><span class="line">IP地址：指定网络设备的IP地址；</span><br><span class="line">网络设备：指定网络设备的名称。</span><br></pre></td></tr></table></figure><h4 id="实例-2"><a href="#实例-2" class="headerlink" title="实例"></a>实例</h4><p><strong>显示网络设备信息（激活状态的）：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># ifconfig</span></span><br><span class="line">eth0      Link encap:Ethernet  HWaddr <span class="number">00</span>:<span class="number">16</span>:<span class="number">3</span>E:<span class="number">00</span>:<span class="number">1</span>E:<span class="number">51</span>  </span><br><span class="line">          inet addr:<span class="number">10.160</span>.<span class="number">7.81</span>  Bcast:<span class="number">10.160</span>.<span class="number">15.255</span>  Mask:<span class="number">255.255</span>.<span class="number">240.0</span></span><br><span class="line">          UP BROADCAST RUNNING MULTICAST  MTU:<span class="number">1500</span>  Metric:<span class="number">1</span></span><br><span class="line">          RX packets:<span class="number">61430830</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">          TX packets:<span class="number">88534</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line">          collisions:<span class="number">0</span> txqueuelen:<span class="number">1000</span></span><br><span class="line">          RX bytes:<span class="number">3607197869</span> (<span class="number">3.3</span> GiB)  TX bytes:<span class="number">6115042</span> (<span class="number">5.8</span> MiB)</span><br><span class="line"></span><br><span class="line">lo        Link encap:Local Loopback  </span><br><span class="line">          inet addr:<span class="number">127.0</span>.<span class="number">0.1</span>  Mask:<span class="number">255.0</span>.<span class="number">0.0</span></span><br><span class="line">          UP LOOPBACK RUNNING  MTU:<span class="number">16436</span>  Metric:<span class="number">1</span></span><br><span class="line">          RX packets:<span class="number">56103</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> frame:<span class="number">0</span></span><br><span class="line">          TX packets:<span class="number">56103</span> errors:<span class="number">0</span> dropped:<span class="number">0</span> overruns:<span class="number">0</span> carrier:<span class="number">0</span></span><br><span class="line">          collisions:<span class="number">0</span> txqueuelen:<span class="number">0</span></span><br><span class="line">          RX bytes:<span class="number">5079451</span> (<span class="number">4.8</span> MiB)  TX bytes:<span class="number">5079451</span> (<span class="number">4.8</span> MiB)</span><br></pre></td></tr></table></figure><p>说明：</p><p>**<code>eth0</code>**表示第一块网卡，其中<code>HWaddr</code>表示网卡的物理地址，可以看到目前这个网卡的物理地址(MAC地址）是<code>00:16:3E:00:1E:51</code>。</p><p>**<code>inet addr</code>**用来表示网卡的<code>IP</code>地址，此网卡的<code>IP</code>地址是<code>10.160.7.81</code>，广播地址<code>Bcast:10.160.15.255</code>，掩码地址<code>Mask:255.255.240.0</code>。</p><p><strong>lo</strong>是表示主机的回环地址，这个一般是用来测试一个网络程序，但又不想让局域网或外网的用户能够查看，只能在此台主机上运行和查看所用的网络接口。比如把 <a target="_blank" rel="noopener" href="http://man.linuxde.net/httpd"><code>httpd</code></a>服务器的指定到回环地址，在浏览器输入127.0.0.1就能看到你所架WEB网站了。但只是您能看得到，局域网的其它主机或用户无从知道。</p><ul><li>第一行：连接类型：<code>Ethernet</code>（以太网）<code>HWaddr</code>（硬件<code>mac</code>地址）。</li><li>第二行：网卡的<code>IP</code>地址、子网、掩码。</li><li>第三行：<code>UP</code>（代表网卡开启状态）<code>RUNNING</code>（代表网卡的网线被接上）<code>MULTICAST</code>（支持组播）<code>MTU:1500</code>（最大传输单元）：<code>1500字节</code>。</li><li>第四、五行：接收、发送数据包情况统计。</li><li>第七行：接收、发送数据字节数统计信息。</li></ul><p><strong>启动关闭指定网卡：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 up</span><br><span class="line">ifconfig eth0 down</span><br></pre></td></tr></table></figure><p><code>ifconfig eth0 up</code>为启动网卡<code>eth0</code>，<code>ifconfig eth0 down</code>为关闭网卡<code>eth0</code>。<span class="exturl" data-url="aHR0cDovL21hbi5saW51eGRlLm5ldC9zc2g=">ssh<i class="fa fa-external-link-alt"></i></span>登陆<code>linux</code>服务器操作要小心，关闭了就不能开启了，除非你有多网卡。</p><p><strong>为网卡配置和删除<code>IPv6</code>地址：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 add <span class="number">33</span>ffe:<span class="number">3240</span>:<span class="number">800</span>:<span class="number">1005</span>::<span class="number">2</span>/<span class="number">64</span>    <span class="comment">#为网卡eth0配置IPv6地址</span></span><br><span class="line">ifconfig eth0 <span class="built_in">del</span> <span class="number">33</span>ffe:<span class="number">3240</span>:<span class="number">800</span>:<span class="number">1005</span>::<span class="number">2</span>/<span class="number">64</span>    <span class="comment">#为网卡eth0删除IPv6地址</span></span><br></pre></td></tr></table></figure><p><strong>用<code>ifconfig</code>修改MAC地址：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 hw ether <span class="number">00</span>:AA:BB:CC:dd:EE</span><br></pre></td></tr></table></figure><p><strong>配置<code>IP</code>地址：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># ifconfig eth0 192.168.2.10</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># ifconfig eth0 192.168.2.10 netmask 255.255.255.0</span></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># ifconfig eth0 192.168.2.10 netmask 255.255.255.0 broadcast 192.168.2.255</span></span><br></pre></td></tr></table></figure><p><strong>启用和关闭<code>arp</code>协议：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 arp    <span class="comment">#开启网卡eth0 的arp协议</span></span><br><span class="line">ifconfig eth0 <span class="literal">-arp</span>   <span class="comment">#关闭网卡eth0 的arp协议</span></span><br></pre></td></tr></table></figure><p><strong>设置最大传输单元：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig eth0 mtu <span class="number">1500</span>    <span class="comment">#设置能通过的最大数据包大小为 1500 bytes</span></span><br></pre></td></tr></table></figure><h3 id="ip命令"><a href="#ip命令" class="headerlink" title="ip命令"></a><code>ip</code>命令</h3><p><code>ip</code>是一个命令，不是<code>TCP/IP</code>那个<code>ip</code>，这个<code>ip</code>命令是结合了<code>ifconfig</code>和<code>route</code>两个命令的功能。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">ip addr show <span class="comment">#查看ip信息</span></span><br><span class="line"><span class="comment">#查看系统版本信息</span></span><br><span class="line"><span class="built_in">cat</span> /etc/redhat<span class="literal">-release</span> </span><br><span class="line">CentOS Linux release <span class="number">7.4</span>.<span class="number">1708</span> (Core) </span><br><span class="line"><span class="comment">#查看内核版本号</span></span><br><span class="line">uname <span class="literal">-r</span></span><br><span class="line"><span class="number">3.10</span>.<span class="number">0</span><span class="literal">-693</span>.el7.x86_64</span><br><span class="line"><span class="comment">#查看系统多少位</span></span><br><span class="line">uname <span class="literal">-m</span></span><br><span class="line">x86_64</span><br><span class="line"><span class="comment">#查看内核所有信息</span></span><br><span class="line">uname <span class="literal">-a</span></span><br></pre></td></tr></table></figure><h2 id="用户管理与文件权限篇"><a href="#用户管理与文件权限篇" class="headerlink" title="用户管理与文件权限篇"></a>用户管理与文件权限篇</h2><p>现代操作系统一般属于多用户的操作系统，也就是说，同一台机器可以为多个用户建立账户，一般这些用户都是为普通用户，这些普通用户能同时登录这台计算机，计算机对这些用户分配一定的资源。普通用户在所分配到的资源内进行各自的操作，相互之间不受影响。但是这些普通用户的权限是有限制的，且用户太多的话，管理就不便，从而引入<code>root</code>用户。此用户是唯一的，且拥有系统的所有权限。<code>root</code>用户所在的组称为<code>root</code>组。“组”是具有相似权限的多个用户的集合。</p><p><strong><code>root</code>的权利</strong></p><p><code>Linux</code>系统的特性就是可以满足多个用户，同时工作，因此<code>Linux</code>系统必须具备很好的安全性。在安装<code>RHEL7</code>时设置的<code>root</code>管理员密码，这个<code>root</code>管理员就是所有<code>UNIX</code>系统中的超级用户，它拥有最高的系统所有权，能够管理系统的各项功能，如添加/删除用户，启动/关闭进程，开启/禁用硬件设备等等。因此“能力越大，责任越大”，<code>root</code>权限必须很好的掌握，否则一个错误的命令可能会摧毁整个系统。</p><p><strong><code>root</code>为什么叫<code>root</code>？</strong></p><p>在<code>Linux</code>系统中，用户也有自己的<code>UID</code>身份账号且唯一<br>系统管理员<code>UID</code>为0<br>系统用户<code>UID</code>为1~999 <code>Linux</code>安装的服务程序都会创建独有的用户负责运行。<br>普通用户<code>UID</code>从1000开始：由管理员创建</p><p><strong>用户组<code>GID</code></strong></p><p>为了方便管理属于同一组的用户，<code>Linux</code> 系统中还引入了用户组的概念。通过使用用 户组号码(<code>GID</code>，<code>Group IDentification</code>)，我们可以把多个用户加入到同一个组中，从而方 便为组中的用户统一规划权限或指定任务。假设有一个公司中有多个部门，每个部门中又 有很多员工。如果只想让员工访问本部门内的资源，则可以针对部门而非具体的员工来设 置权限。例如，可以通过对技术部门设置权限，使得只有技术部门的员工可以访问公司的 数据库信息等。</p><p><code>Linux</code>管理员在创建用户时，将自动创建一个与其同名的用户组，这个用户组只有该用户一个人</p><p><strong><code>Linux/unix</code>是一个多用户、多任务的操作系统。</strong></p><p>**<code>root</code>**：默认在<code>Unix/linux</code>操作系统中拥有最高的管理权限。可以理解为<code>qq</code>群的群主</p><p><strong>普通用户</strong>：是管理员或者具备管理权限的用户所创建的，只能读、看，不能增、删、改。</p><h3 id="创建普通用户"><a href="#创建普通用户" class="headerlink" title="创建普通用户"></a>创建普通用户</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#添加用户</span></span><br><span class="line">useradd test </span><br><span class="line"><span class="comment">#设置密码       </span></span><br><span class="line">passwd redhat</span><br><span class="line"><span class="comment"># root用户可以修改其他所有人的密码，且不需要验证</span></span><br></pre></td></tr></table></figure><h4 id="useradd"><a href="#useradd" class="headerlink" title="useradd"></a><code>useradd</code></h4><p><strong><code>useradd</code>命令</strong>用于<code>Linux</code>中创建的新的系统用户。<code>useradd</code>可用来建立用户帐号。帐号建好之后，再用<code>passwd</code>设定帐号的密码．而可用<code>userdel</code>删除帐号。使用<code>useradd</code>指令所建立的帐号，实际上是保存在<code>/etc/passwd</code>文本文件中。</p><p>在<code>Slackware</code>中，<code>adduser</code>指令是个<code>script</code>程序，利用交谈的方式取得输入的用户帐号资料，然后再交由真正建立帐号的<code>useradd</code>命令建立新用户，如此可方便管理员建立用户帐号。在<code>Red Hat Linux</code>中，**<code>adduser</code>命令**则是<code>useradd</code>命令的符号连接，两者实际上是同一个指令。</p><h5 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd(选项)(参数)</span><br></pre></td></tr></table></figure><h5 id="选项"><a href="#选项" class="headerlink" title="选项"></a>选项</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-c</span>&lt;备注&gt;：加上备注文字。备注文字会保存在passwd的备注栏位中；</span><br><span class="line"><span class="literal">-d</span>&lt;登入目录&gt;：指定用户登入时的启始目录；</span><br><span class="line"><span class="literal">-D</span>：变更预设值；</span><br><span class="line"><span class="literal">-e</span>&lt;有效期限&gt;：指定帐号的有效期限；</span><br><span class="line"><span class="operator">-f</span>&lt;缓冲天数&gt;：指定在密码过期后多少天即关闭该帐号；</span><br><span class="line"><span class="literal">-g</span>&lt;群组&gt;：指定用户所属的群组；</span><br><span class="line"><span class="literal">-G</span>&lt;群组&gt;：指定用户所属的附加群组；</span><br><span class="line"><span class="literal">-m</span>：自动建立用户的登入目录；</span><br><span class="line"><span class="literal">-M</span>：不要自动建立用户的登入目录；</span><br><span class="line"><span class="literal">-n</span>：取消建立以用户名称为名的群组；</span><br><span class="line"><span class="literal">-r</span>：建立系统帐号；</span><br><span class="line"><span class="literal">-s</span>&lt;shell&gt;：指定用户登入后所使用的shell；</span><br><span class="line"><span class="literal">-u</span>&lt;uid&gt;：指定用户id。</span><br></pre></td></tr></table></figure><h5 id="参数-3"><a href="#参数-3" class="headerlink" title="参数"></a>参数</h5><p>用户名：要创建的用户名。</p><h5 id="实例-3"><a href="#实例-3" class="headerlink" title="实例"></a>实例</h5><p>新建用户加入组：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd –g sales jack –G company,employees    //<span class="literal">-g</span>：加入主要组、<span class="literal">-G</span>：加入次要组</span><br></pre></td></tr></table></figure><p>建立一个新用户账户，并设置ID：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd caojh <span class="literal">-u</span> <span class="number">544</span></span><br></pre></td></tr></table></figure><p>需要说明的是，设定<code>ID</code>值时尽量要大于500，以免冲突。因为<code>Linux</code>安装后会建立一些特殊用户，一般0到499之间的值留给<code>bin</code>、<code>mail</code>这样的系统账号。</p><h4 id="passwd"><a href="#passwd" class="headerlink" title="passwd"></a><code>passwd</code></h4><p><strong><code>passwd</code>命令</strong>用于设置用户的认证信息，包括用户密码、密码过期时间等。系统管理者则能用它管理系统用户的密码。只有管理者可以指定用户名称，一般用户只能变更自己的密码。</p><h5 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">passwd(选项)(参数)</span><br></pre></td></tr></table></figure><h5 id="选项-1"><a href="#选项-1" class="headerlink" title="选项"></a>选项</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-d</span>：删除密码，仅有系统管理者才能使用；</span><br><span class="line"><span class="operator">-f</span>：强制执行；</span><br><span class="line"><span class="literal">-k</span>：设置只有在密码过期失效后，方能更新；</span><br><span class="line"><span class="literal">-l</span>：锁住密码；</span><br><span class="line"><span class="literal">-s</span>：列出密码的相关信息，仅有系统管理者才能使用；</span><br><span class="line"><span class="literal">-u</span>：解开已上锁的帐号。</span><br></pre></td></tr></table></figure><h5 id="参数-4"><a href="#参数-4" class="headerlink" title="参数"></a>参数</h5><p>用户名：需要设置密码的用户名。</p><h5 id="知识扩展"><a href="#知识扩展" class="headerlink" title="知识扩展"></a>知识扩展</h5><p>与用户、组账户信息相关的文件</p><p>存放用户信息：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/passwd</span><br><span class="line">/etc/shadow</span><br></pre></td></tr></table></figure><p>存放组信息：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/<span class="built_in">group</span></span><br><span class="line">/etc/gshadow</span><br></pre></td></tr></table></figure><p>用户信息文件分析（每项用<code>:</code>隔开）</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">例如：jack:X:<span class="number">503</span>:<span class="number">504</span>:::/home/jack/:/bin/bash</span><br><span class="line">jack　　//用户名</span><br><span class="line">X　　//口令、密码</span><br><span class="line"><span class="number">503</span>　　//用户id（<span class="number">0</span>代表root、普通新建用户从<span class="number">500</span>开始）</span><br><span class="line"><span class="number">504</span>　　//所在组</span><br><span class="line">:　　//描述</span><br><span class="line">/home/jack/　　//用户主目录</span><br><span class="line">/bin/bash　　//用户缺省Shell</span><br></pre></td></tr></table></figure><p>组信息文件分析</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">例如：jack:<span class="variable">$</span>!<span class="variable">$</span>:???:<span class="number">13801</span>:<span class="number">0</span>:<span class="number">99999</span>:<span class="number">7</span>:*:*:</span><br><span class="line">jack　　//组名</span><br><span class="line"><span class="variable">$</span>!<span class="variable">$</span>　　//被加密的口令</span><br><span class="line"><span class="number">13801</span>　　//创建日期与今天相隔的天数</span><br><span class="line"><span class="number">0</span>　　//口令最短位数</span><br><span class="line"><span class="number">99999</span>　　//用户口令</span><br><span class="line"><span class="number">7</span>　　//到<span class="number">7</span>天时提醒</span><br><span class="line">*　　//禁用天数</span><br><span class="line">*　　//过期天数</span><br></pre></td></tr></table></figure><h5 id="实例-4"><a href="#实例-4" class="headerlink" title="实例"></a>实例</h5><p>如果是普通用户执行<code>passwd</code>只能修改自己的密码。如果新建用户后，要为新用户创建密码，则用<code>passwd</code>用户名，注意要以<code>root</code>用户的权限来创建。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># passwd linuxde    //更改或创建linuxde用户的密码；</span></span><br><span class="line">Changing password <span class="keyword">for</span> user linuxde.</span><br><span class="line">New UNIX password:          //请输入新密码；</span><br><span class="line">Retype new UNIX password:   //再输入一次；</span><br><span class="line">passwd: all authentication tokens updated successfully. //成功；</span><br></pre></td></tr></table></figure><p>普通用户如果想更改自己的密码，直接运行<code>passwd</code>即可，比如当前操作的用户是<code>linuxde</code>。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">linuxde</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> passwd</span><br><span class="line">Changing password <span class="keyword">for</span> user linuxde. //更改linuxde用户的密码；</span><br><span class="line">(current) UNIX password:   //请输入当前密码；</span><br><span class="line">New UNIX password:         //请输入新密码；</span><br><span class="line">Retype new UNIX password:  //确认新密码；</span><br><span class="line">passwd: all authentication tokens updated successfully. //更改成功；</span><br></pre></td></tr></table></figure><p>比如我们让某个用户不能修改密码，可以用<code>-l</code>选项来锁定：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># passwd -l linuxde    //锁定用户linuxde不能更改密码；</span></span><br><span class="line">Locking password <span class="keyword">for</span> user linuxde.</span><br><span class="line">passwd: Success           //锁定成功；</span><br><span class="line"></span><br><span class="line">[<span class="type">linuxde</span>@<span class="type">localhost</span> ~]<span class="comment"># su linuxde   //通过su切换到linuxde用户；</span></span><br><span class="line">[<span class="type">linuxde</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> passwd      //linuxde来更改密码；</span><br><span class="line">Changing password <span class="keyword">for</span> user linuxde.</span><br><span class="line">Changing password <span class="keyword">for</span> linuxde</span><br><span class="line">(current) UNIX password:          //输入linuxde的当前密码；</span><br><span class="line">passwd: Authentication token manipulation error     //失败，不能更改密码；</span><br></pre></td></tr></table></figure><p>再来一例：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># passwd -d linuxde  //清除linuxde用户密码；</span></span><br><span class="line">Removing password <span class="keyword">for</span> user linuxde.</span><br><span class="line">passwd: Success                         //清除成功；</span><br><span class="line"></span><br><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># passwd -S linuxde    //查询linuxde用户密码状态；</span></span><br><span class="line">Empty password.                         //空密码，也就是没有密码；</span><br></pre></td></tr></table></figure><p>注意：当我们清除一个用户的密码时，登录时就无需密码，这一点要加以注意。</p><h3 id="切换用户"><a href="#切换用户" class="headerlink" title="切换用户"></a>切换用户</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># su命令可以切换用户身份的需求，</span></span><br><span class="line">su - username</span><br><span class="line"></span><br><span class="line"><span class="comment"># su命令中间的-号很重要，意味着完全切换到新的用户，即环境变量信息也变更为新用户的信息</span></span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#先看下当前用户（我是谁）</span></span><br><span class="line">whoami</span><br><span class="line"><span class="comment">#切换用户</span></span><br><span class="line">su - oldboy</span><br><span class="line"><span class="comment">#退出用户登录</span></span><br><span class="line">logout</span><br><span class="line">ctrl + d</span><br></pre></td></tr></table></figure><ul><li>一般情况下，在生产环境避免直接用<code>root</code>用户，除非有特殊系统维护需求，使用完立刻退回普通用户</li><li>非交互式设置密码(<code>echo &quot;redhat&quot;|passwd --stdin 123456 &amp;&amp; history -c</code>)</li></ul><blockquote><p>Tip:<br>1.超级用户<code>root</code>切换普通用户无需密码,例如“群主”想踢谁就踢谁<br>2.普通用户切换<code>root</code>，需要输入密码<br>3.普通用户权限较小，只能基本查看信息<br>4.<code>$</code>符号是普通用户命令提示符，#是超级管理员的提示符</p></blockquote><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">tony</span>-<span class="type">PC</span>:~]<span class="comment">#</span></span><br><span class="line">root是当前用户，tony<span class="literal">-PC</span>是主机名，~代表当前路径，也是家目录</span><br></pre></td></tr></table></figure><h4 id="groupadd命令"><a href="#groupadd命令" class="headerlink" title="groupadd命令"></a><code>groupadd</code>命令</h4><p><code>group</code>命令用于创建用户组，为了更加高效的指派系统中各个用户的权限，在工作中常常添加几个用户到一个组里面，这样可以针对一类用户安排权限。<br>例如超哥以前在公司里，就负责添加<code>openLDAP</code>用户管理，偶尔台湾，美国的同事去上海协作，我就得给他们添加到it部门组里面，以至于他们有对服务器操作的权限。<br><code>groupadd it_dep</code></p><p><strong><code>groupadd</code>命令</strong>用于创建一个新的工作组，新工作组的信息将被添加到系统文件中。</p><h5 id="语法-5"><a href="#语法-5" class="headerlink" title="语法"></a>语法</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd(选项)(参数)</span><br></pre></td></tr></table></figure><h5 id="选项-2"><a href="#选项-2" class="headerlink" title="选项"></a>选项</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-g</span>：指定新建工作组的id；</span><br><span class="line"><span class="literal">-r</span>：创建系统工作组，系统工作组的组ID小于<span class="number">500</span>；</span><br><span class="line"><span class="literal">-K</span>：覆盖配置文件“/ect/login.defs”；</span><br><span class="line"><span class="literal">-o</span>：允许添加组ID号不唯一的工作组。</span><br></pre></td></tr></table></figure><h5 id="参数-5"><a href="#参数-5" class="headerlink" title="参数"></a>参数</h5><p>组名：指定新建工作组的组名。</p><h5 id="实例-5"><a href="#实例-5" class="headerlink" title="实例"></a>实例</h5><p>建立一个新组，并设置组<code>ID</code>加入系统：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd <span class="literal">-g</span> <span class="number">344</span> linuxde</span><br></pre></td></tr></table></figure><p>此时在<code>/etc/passwd</code>文件中产生一个组<code>ID</code>（<code>GID</code>）是344的项目。</p><h3 id="userdel删除用户"><a href="#userdel删除用户" class="headerlink" title="userdel删除用户"></a><code>userdel</code>删除用户</h3><p><strong><code>userdel</code>命令</strong>用于删除给定的用户，以及与用户相关的文件。若不加选项，则仅删除用户帐号，而不删除相关文件。</p><h4 id="语法-6"><a href="#语法-6" class="headerlink" title="语法"></a>语法</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel(选项)(参数)</span><br></pre></td></tr></table></figure><h4 id="选项-3"><a href="#选项-3" class="headerlink" title="选项"></a>选项</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="operator">-f</span>：强制删除用户，即使用户当前已登录；</span><br><span class="line"><span class="literal">-r</span>：删除用户的同时，删除与用户相关的所有文件(家目录)。</span><br></pre></td></tr></table></figure><h4 id="参数-6"><a href="#参数-6" class="headerlink" title="参数"></a>参数</h4><p>用户名：要删除的用户名。</p><h4 id="实例-6"><a href="#实例-6" class="headerlink" title="实例"></a>实例</h4><p><code>userdel</code>命令很简单，比如我们现在有个用户<code>linuxde</code>，其家目录位于<code>/var</code>目录中，现在我们来删除这个用户：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">userdel linuxde       //删除用户linuxde，但不删除其家目录及文件；</span><br><span class="line">userdel <span class="literal">-r</span> linuxde    //删除用户linuxde，其家目录及文件一并删除；</span><br></pre></td></tr></table></figure><p>请不要轻易用<code>-r</code>选项；他会删除用户的同时删除用户所有的文件和目录，切记如果用户目录下有重要的文件，在删除前请备份。</p><p>其实也有最简单的办法，但这种办法有点不安全，也就是直接在<code>/etc/passwd</code>中删除您想要删除用户的记录；但最好不要这样做，<code>/etc/passwd</code>是极为重要的文件，可能您一不小心会操作失误。</p><h3 id="sudo命令"><a href="#sudo命令" class="headerlink" title="sudo命令"></a><code>sudo</code>命令</h3><p><strong><code>sudo</code>命令</strong>用来以其他身份来执行命令，预设的身份为<code>root</code>。在<code>/etc/sudoers</code>中设置了可执行<code>sudo</code>指令的用户。若其未经授权的用户企图使用<code>sudo</code>，则会发出警告的邮件给管理员。用户使用<code>sudo</code>时，必须先输入密码，之后有5分钟的有效期限，超过期限则必须重新输入密码。</p><h4 id="语法-7"><a href="#语法-7" class="headerlink" title="语法"></a>语法</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo(选项)(参数)</span><br></pre></td></tr></table></figure><h4 id="选项-4"><a href="#选项-4" class="headerlink" title="选项"></a>选项</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-b</span>：在后台执行指令；</span><br><span class="line"><span class="literal">-h</span>：显示帮助；</span><br><span class="line"><span class="literal">-H</span>：将HOME环境变量设为新身份的HOME环境变量；</span><br><span class="line"><span class="literal">-k</span>：结束密码的有效期限，也就是下次再执行sudo时便需要输入密码；。</span><br><span class="line"><span class="literal">-l</span>：列出目前用户可执行与无法执行的指令；</span><br><span class="line"><span class="literal">-p</span>：改变询问密码的提示符号；</span><br><span class="line"><span class="literal">-s</span>&lt;shell&gt;：执行指定的shell；</span><br><span class="line"><span class="literal">-u</span>&lt;用户&gt;：以指定的用户作为新的身份。若不加上此参数，则预设以root作为新的身份；</span><br><span class="line"><span class="literal">-v</span>：延长密码有效期限<span class="number">5</span>分钟；</span><br><span class="line"><span class="literal">-V</span> ：显示版本信息。</span><br></pre></td></tr></table></figure><h4 id="参数-7"><a href="#参数-7" class="headerlink" title="参数"></a>参数</h4><p>指令：需要运行的指令和对应的参数。</p><h4 id="实例-7"><a href="#实例-7" class="headerlink" title="实例"></a>实例</h4><p>配置<code>sudo</code>必须通过编辑<code>/etc/sudoers</code>文件，而且只有超级用户才可以修改它，还必须使用<code>visudo</code>编辑。之所以使用<code>visudo</code>有两个原因，一是它能够防止两个用户同时修改它；二是它也能进行有限的语法检查。所以，即使只有你一个超级用户，你也最好用<code>visudo</code>来检查一下语法。</p><p><code>visudo</code>默认的是在<span class="exturl" data-url="aHR0cDovL21hbi5saW51eGRlLm5ldC92aQ==">vi<i class="fa fa-external-link-alt"></i></span>里打开配置文件，用vi来修改文件。我们可以在编译时修改这个默认项。<code>visudo</code>不会擅自保存带有语法错误的配置文件，它会提示你出现的问题，并询问该如何处理，就像：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; sudoers file: syntax error, line <span class="number">22</span> &lt;&lt;</span><br></pre></td></tr></table></figure><p>此时我们有三种选择：键入“<kbd>e</kbd>”是重新编辑，键入“<kbd>x</kbd>”是不保存退出，键入“<kbd>Q</kbd>”是退出并保存。如果真选择<kbd>Q</kbd>，那么<code>sudo</code>将不会再运行，直到错误被纠正。</p><p>现在，我们一起来看一下神秘的配置文件，学一下如何编写它。让我们从一个简单的例子开始：让用户<code>Foobar</code>可以通过<code>sudo</code>执行所有<code>root</code>可执行的命令。以<code>root</code>身份用<code>visudo</code>打开配置文件，可以看到类似下面几行：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Runas alias specification</span></span><br><span class="line"><span class="comment"># User privilege specificationroot    ALL=(ALL)ALL</span></span><br></pre></td></tr></table></figure><p>我们一看就明白个差不多了，<code>root</code>有所有权限，只要仿照现有<code>root</code>的例子就行，我们在下面加一行（最好用<kbd>tab</kbd>作为空白）：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foobar ALL=(ALL)    ALL</span><br></pre></td></tr></table></figure><p>保存退出后，切换到<code>foobar</code>用户，我们用它的身份执行命令：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">foobar</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> <span class="built_in">ls</span> /root</span><br><span class="line"><span class="built_in">ls</span>: /root: 权限不够</span><br><span class="line"></span><br><span class="line">[<span class="type">foobar</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sudo <span class="built_in">ls</span> /root</span><br><span class="line">PassWord:</span><br><span class="line">anaconda<span class="literal">-ks</span>.cfg Desktop install.log install.log.syslog</span><br></pre></td></tr></table></figure><p>好了，我们限制一下<code>foobar</code>的权利，不让他为所欲为。比如我们只想让他像<code>root</code>那样使用ls和<code>ifconfig</code>，把那一行改为：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foobar localhost=    /sbin/ifconfig,   /bin/<span class="built_in">ls</span></span><br></pre></td></tr></table></figure><p>再来执行命令：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">foobar</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sudo head <span class="literal">-5</span> /etc/shadow</span><br><span class="line">Password:</span><br><span class="line">Sorry, user foobar is not allowed to execute <span class="string">&#x27;/usr/bin/head -5 /etc/shadow&#x27;</span> as root on localhost.localdomain.</span><br><span class="line"></span><br><span class="line">[<span class="type">foobar</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sudo /sbin/ifconfigeth0      Linkencap:Ethernet HWaddr <span class="number">00</span>:<span class="number">14</span>:<span class="number">85</span>:EC:E9:<span class="number">9</span>B...</span><br></pre></td></tr></table></figure><p>现在让我们来看一下那三个<code>ALL</code>到底是什么意思。第一个<code>ALL</code>是指网络中的主机，我们后面把它改成了主机名，它指明<code>foobar</code>可以在此主机上执行后面的命令。第二个括号里的<code>ALL</code>是指目标用户，也就是以谁的身份去执行命令。最后一个<code>ALL</code>当然就是指命令名了。例如，我们想让<code>foobar</code>用户在<code>linux</code>主机上以<code>jimmy</code>或<code>rene</code>的身份执行<code>kill</code>命令，这样编写配置文件：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foobar    linux=(jimmy,rene)    /bin/<span class="built_in">kill</span></span><br></pre></td></tr></table></figure><p>但这还有个问题，<code>foobar</code>到底以<code>jimmy</code>还是<code>rene</code>的身份执行？这时我们应该想到了<code>sudo -u</code>了，它正是用在这种时候。 <code>foobar</code>可以使用<code>sudo -u jimmy kill PID</code>或者<code>sudo -u rene kill PID</code>，但这样挺麻烦，其实我们可以不必每次加<code>-u</code>，把<code>rene</code>或<code>jimmy</code>设为默认的目标用户即可。再在上面加一行：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Defaults:foobar    runas_default=rene</span><br></pre></td></tr></table></figure><p><code>Defaults</code>后面如果有冒号，是对后面用户的默认，如果没有，则是对所有用户的默认。就像配置文件中自带的一行：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Defaults    env_reset</span><br></pre></td></tr></table></figure><p>另一个问题是，很多时候，我们本来就登录了，每次使用<code>sudo</code>还要输入密码就显得烦琐了。我们可不可以不再输入密码呢？当然可以，我们这样修改配置文件：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foobar localhost=NOPASSWD:     /bin/<span class="built_in">cat</span>, /bin/<span class="built_in">ls</span></span><br></pre></td></tr></table></figure><p>再来<code>sudo</code>一下：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">foobar</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sudo <span class="built_in">ls</span> /rootanaconda<span class="literal">-ks</span>.cfg Desktop install.log</span><br><span class="line">install.log.syslog</span><br></pre></td></tr></table></figure><p>当然，你也可以说“某些命令用户<code>foobar</code>不可以运行”，通过使用!操作符，但这不是一个好主意。因为，用!操作符来从<code>ALL</code>中“剔出”一些命令一般是没什么效果的，一个用户完全可以把那个命令拷贝到别的地方，换一个名字后再来运行。</p><p><strong>日志与安全</strong></p><p><code>sudo</code>为安全考虑得很周到，不仅可以记录日志，还能在有必要时向系统管理员报告。但是，<code>sudo</code>的日志功能不是自动的，必须由管理员开启。这样来做：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch /var/log/sudo</span><br><span class="line">vi /etc/syslog.conf</span><br></pre></td></tr></table></figure><p>在<code>syslog.conf</code>最后面加一行（必须用<code>tab</code>分割开）并保存：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">local2.debug                    /var/log/sudo</span><br></pre></td></tr></table></figure><p>重启日志守候进程，</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ps</span> aux grep syslogd</span><br></pre></td></tr></table></figure><p>把得到的<code>syslogd</code>进程的<code>PID</code>（输出的第二列是<code>PID</code>）填入下面：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span> –HUP PID</span><br></pre></td></tr></table></figure><p>这样，<code>sudo</code>就可以写日志了：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">foobar</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sudo <span class="built_in">ls</span> /rootanaconda<span class="literal">-ks</span>.cfg</span><br><span class="line">Desktop install.log</span><br><span class="line">install.log.syslog</span><br><span class="line"><span class="variable">$cat</span> /var/log/sudoJul <span class="number">28</span> <span class="number">22</span>:<span class="number">52</span>:<span class="number">54</span> localhost sudo:   foobar :</span><br><span class="line">TTY=pts/<span class="number">1</span> ; <span class="built_in">pwd</span>=/home/foobar ; USER=root ; command=/bin/<span class="built_in">ls</span> /root</span><br></pre></td></tr></table></figure><p>不过，有一个小小的“缺陷”，<code>sudo</code>记录日志并不是很忠实：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">foobar</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sudo <span class="built_in">cat</span> /etc/shadow &gt; /dev/null</span><br><span class="line"><span class="built_in">cat</span> /var/log/sudo...Jul <span class="number">28</span> <span class="number">23</span>:<span class="number">10</span>:<span class="number">24</span> localhost sudo:   foobar : TTY=pts/<span class="number">1</span> ;</span><br><span class="line"><span class="built_in">PWD</span>=/home/foobar ; USER=root ; COMMAND=/bin/<span class="built_in">cat</span> /etc/shadow</span><br></pre></td></tr></table></figure><p>重定向没有被记录在案！为什么？因为在命令运行之前，shell把重定向的工作做完了，<code>sudo</code>根本就没看到重定向。这也有个好处，下面的手段不会得逞：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">foobar</span>@<span class="type">localhost</span> ~]<span class="variable">$</span> sudo <span class="built_in">ls</span> /root &gt; /etc/shadowbash: /etc/shadow: 权限不够</span><br></pre></td></tr></table></figure><p><code>sudo</code> 有自己的方式来保护安全。以<code>root</code>的身份执行<code>sudo-V</code>，查看一下<code>sudo</code>的设置。因为考虑到安全问题，一部分环境变量并没有传递给<code>sudo</code>后面的命令，或者被检查后再传递的，比如：<code>PATH</code>，<code>HOME</code>，<code>SHELL</code>等。当然，你也可以通过<code>sudoers</code>来配置这些环境变量。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用普通账户访问</span></span><br><span class="line"><span class="variable">$</span> <span class="built_in">ls</span> /root</span><br><span class="line"><span class="built_in">ls</span>: 无法打开目录<span class="string">&#x27;/root&#x27;</span>: 权限不够</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用sudo命令访问</span></span><br><span class="line"><span class="variable">$</span> sudo <span class="built_in">ls</span> /root</span><br><span class="line">[<span class="type">sudo</span>] test 的密码：</span><br><span class="line">test 不在 sudoers 文件中。此事将被报告。</span><br></pre></td></tr></table></figure><h2 id="文件与目录权限"><a href="#文件与目录权限" class="headerlink" title="文件与目录权限"></a>文件与目录权限</h2><p>Linux权限的目的是（保护账户的资料）</p><p>Linux权限主要依据三种身份来决定：</p><ul><li><code>user/owner</code> 文件使用者,文件属于哪个用户</li><li><code>group</code> 属组,文件属于哪个组</li><li><code>others</code> 既不是<code>user</code>，也不再<code>group</code>，就是<code>other</code>，其他人</li></ul><h3 id="什么是权限"><a href="#什么是权限" class="headerlink" title="什么是权限"></a>什么是权限</h3><p>在<code>Linux</code>中，每个文件都有所属的所有者，和所有组，并且规定了文件的所有者，所有组以及其他人对文件的，可读，可写，可执行等权限。</p><p>对于目录的权限来说，可读是读取目录文件列表，可写是表示在目录内新增，修改，删除文件。可执行表示可以进入目录</p><h3 id="Linux权限的观察"><a href="#Linux权限的观察" class="headerlink" title="Linux权限的观察"></a>Linux权限的观察</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">root@tony<span class="literal">-PC</span>:/media/tony/数据<span class="comment"># ls -l</span></span><br><span class="line">总用量 <span class="number">4</span></span><br><span class="line"></span><br><span class="line">drwxrwxrwx <span class="number">1</span> tony tony    <span class="number">0</span> <span class="number">8</span>月   <span class="number">6</span> <span class="number">10</span>:<span class="number">16</span> aaa</span><br><span class="line">d：				文件夹</span><br><span class="line">rwxrwxrwx：		权限</span><br><span class="line"><span class="number">1</span>：				文件链接数</span><br><span class="line">tony：			属主(所属用户)</span><br><span class="line">tony：			属组(所属用户组)</span><br><span class="line"><span class="number">0</span>：				文件(夹)大小</span><br><span class="line"><span class="number">8</span>月   <span class="number">6</span> <span class="number">10</span>:<span class="number">16</span>：  修改日期时间</span><br><span class="line">aaa： 			文件(夹)名</span><br><span class="line"></span><br><span class="line"><span class="literal">-rwxrwxrwx</span> <span class="number">1</span> tony tony    <span class="number">0</span> <span class="number">7</span>月  <span class="number">10</span> <span class="number">15</span>:<span class="number">30</span> aaa.txt</span><br><span class="line">-：				文件</span><br><span class="line">rwxrwxrwx：		权限</span><br><span class="line"><span class="number">1</span>：				文件链接数</span><br><span class="line">tony：			属主(所属用户)</span><br><span class="line">tony：			属组(所属用户组)</span><br><span class="line"><span class="number">0</span>：				文件(夹)大小</span><br><span class="line"><span class="number">7</span>月  <span class="number">10</span> <span class="number">15</span>:<span class="number">30</span>：  修改日期时间</span><br><span class="line">aaa.txt：		文件(夹)名</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>解读上述信息：</p><ol><li><p>文件类型</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-    一般文件</span><br><span class="line">d    文件夹</span><br><span class="line">l    软连接（快捷方式）</span><br><span class="line">b    块设备，存储媒体文件为主</span><br><span class="line">c    代表键盘,鼠标等设备</span><br></pre></td></tr></table></figure></li><li><p>权限，第一个字母为文件类型，后续9个字母，每3个一组，是三种身份的权限</p></li><li><p>文件链接数</p></li><li><p>文件拥有者-属主</p></li><li><p>文件拥有组-属组</p></li><li><p>文件大小</p></li><li><p>最后一次被修改的时间日期</p></li><li><p>文件名</p></li></ol><h3 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h3><p>我们已知三种身份权限（属主，属组，其他人），每种身份都有<code>rwx</code>的三种权限，系统还提供了数字计算权限。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">r</span>    read			<span class="number">4</span>			可读，可以用<span class="built_in">cat</span>等命令查看</span><br><span class="line">w    <span class="built_in">write</span>			<span class="number">2</span>			写入，可以编辑或者删除这个文件</span><br><span class="line">x    executable		<span class="number">1</span>			可以执行</span><br></pre></td></tr></table></figure><p>每种身份最低是0分，最高是r+w+x 7分</p><p>因此三种身份，最高权限是777，最低是000</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-rw</span><span class="literal">-r</span>-<span class="literal">-r</span>-- <span class="number">1</span> root tony    <span class="number">0</span> <span class="number">8</span>月   <span class="number">7</span> <span class="number">11</span>:<span class="number">28</span> bbb.txt</span><br><span class="line">因此可知bbb.txt的权限是</span><br><span class="line">属主是<span class="number">6</span> <span class="built_in">r</span>+w(<span class="number">4</span>+<span class="number">2</span>)</span><br><span class="line">属组是<span class="number">4</span>　<span class="built_in">r</span>(<span class="number">4</span>+<span class="number">2</span>)</span><br><span class="line">其他人是<span class="number">4</span>　<span class="built_in">r</span>(<span class="number">4</span>)</span><br></pre></td></tr></table></figure><h3 id="目录权限"><a href="#目录权限" class="headerlink" title="目录权限"></a>目录权限</h3><p><strong>权限这里测试不要用root实验！！！！root太牛逼了</strong></p><p><strong>请用普通用户执行！！！！！测试文件、文件夹权限操作，请用普通用户！</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">r</span>    可以对此目录执行<span class="built_in">ls</span>列出所有文件</span><br><span class="line">w    可以在这个目录创建文件</span><br><span class="line">x    可以<span class="built_in">cd</span>进入这个目录，或者查看详细信息</span><br></pre></td></tr></table></figure><p>权限与数字转化</p><p><img data-src="https://raw.githubusercontent.com/tonyu2019/PicGo/master/20190807104957.png"></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@tony<span class="literal">-PC</span>:/media/tony/数据<span class="comment"># ls -l /var/log/mysql/error.log</span></span><br><span class="line"><span class="literal">-rw</span><span class="literal">-r</span>----- <span class="number">1</span> mysql adm <span class="number">97207</span> <span class="number">8</span>月   <span class="number">7</span> <span class="number">11</span>:<span class="number">02</span> /var/log/mysql/error.log</span><br><span class="line"><span class="comment"># 表示error.log文件属主为mysql，属组为adm，只有mysql用户可以读取编写这个文件，adm组的用户只能读取这个文件，其他用户没有任何权限</span></span><br></pre></td></tr></table></figure><h3 id="查看用户权限命令"><a href="#查看用户权限命令" class="headerlink" title="查看用户权限命令"></a>查看用户权限命令</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看用户所属群主</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/media/tony/数据<span class="comment"># id root</span></span><br><span class="line">uid=<span class="number">0</span>(root) gid=<span class="number">0</span>(root) 组=<span class="number">0</span>(root)</span><br></pre></td></tr></table></figure><h4 id="id"><a href="#id" class="headerlink" title="id"></a><code>id</code></h4><p><strong><code>id</code>命令</strong>可以显示真实有效的用户<code>ID</code>(<code>UID</code>)和组<code>ID</code>(<code>GID</code>)。<code>UID</code> 是对一个用户的单一身份标识。组<code>ID</code>（<code>GID</code>）则对应多个<code>UID</code>。<code>id</code>命令已经默认预装在大多数<code>Linux</code>系统中。要使用它，只需要在你的控制台输入<code>id</code>。不带选项输入<code>id</code>会显示如下。结果会使用活跃用户。</p><p>当我们想知道某个用户的<code>UID</code>和<code>GID</code>时id命令是非常有用的。一些程序可能需要<code>UID/GID</code>来运行。<code>id</code>使我们更加容易地找出用户的<code>UID</code>以<code>GID</code>而不必在<code>/etc/group</code>文件中搜寻。如往常一样，你可以在控制台输入<code>man id</code>进入id的手册页来获取更多的详情。</p><h5 id="语法-8"><a href="#语法-8" class="headerlink" title="语法"></a>语法</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">id [-<span class="type">gGnru</span>][--<span class="type">help</span>][--<span class="type">version</span>][用户名称]</span><br></pre></td></tr></table></figure><h5 id="选项-5"><a href="#选项-5" class="headerlink" title="选项"></a>选项</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-g</span>或-<span class="literal">-group</span> 　 显示用户所属群组的ID。</span><br><span class="line"><span class="literal">-G</span>或-<span class="literal">-groups</span>   显示用户所属附加群组的ID。</span><br><span class="line"><span class="literal">-n</span>或-<span class="literal">-name</span> 　  显示用户，所属群组或附加群组的名称。</span><br><span class="line"><span class="literal">-r</span>或-<span class="literal">-real</span> 　  显示实际ID。</span><br><span class="line"><span class="literal">-u</span>或-<span class="literal">-user</span> 　  显示用户ID。</span><br><span class="line"><span class="literal">-help</span> 　       显示帮助。</span><br><span class="line"><span class="literal">-version</span> 　    显示版本信息。</span><br></pre></td></tr></table></figure><h5 id="实例-8"><a href="#实例-8" class="headerlink" title="实例"></a>实例</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># id</span></span><br><span class="line">uid=<span class="number">0</span>(root) gid=<span class="number">0</span>(root) groups=<span class="number">0</span>(root),<span class="number">1</span>(bin),<span class="number">2</span>(daemon),<span class="number">3</span>(sys),<span class="number">4</span>(adm),<span class="number">6</span>(disk),<span class="number">10</span>(wheel)</span><br></pre></td></tr></table></figure><p>解释：用户<code>root</code>的<code>UID</code>号码 = 0，<code>GID</code>号码 = 0。用户<code>root</code>是下面组的成员：</p><ul><li><code>root</code>组<code>GID</code>号是：0</li><li><code>bin</code>组<code>GID</code>号是：1</li><li><code>daemon</code>组<code>GID</code>号是：2</li><li><code>sys</code>组<code>GID</code>号是：3</li><li><code>adm</code>组<code>GID</code>号是：4</li><li><code>disk</code>组<code>GID</code>号是：6</li><li><code>wheel</code>组<code>GID</code>号是：10</li></ul><p>打印用户名、<code>UID</code> 和该用户所属的所有组，要这么做，我们可以使用 <code>-a</code> 选项：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># id -a</span></span><br><span class="line">uid=<span class="number">0</span>(root) gid=<span class="number">0</span>(root) groups=<span class="number">0</span>(root),<span class="number">1</span>(bin),<span class="number">2</span>(daemon),<span class="number">3</span>(sys),<span class="number">4</span>(adm),<span class="number">6</span>(disk),<span class="number">10</span>(wheel)</span><br></pre></td></tr></table></figure><p>输出所有不同的组<code>ID</code> ，有效的，真实的和补充的，我们可以使用 <code>-G</code> 选项来实现：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># id -G</span></span><br><span class="line"><span class="number">0</span> <span class="number">1</span> <span class="number">2</span> <span class="number">3</span> <span class="number">4</span> <span class="number">6</span> <span class="number">10</span></span><br></pre></td></tr></table></figure><p>结果只会显示<code>GID</code>号。你可以和<code>/etc/group</code>文件比较。下面是<code>/etc/group</code>文件的示例内容：</p><p>只输出有效的组<code>ID</code>，通过使用 <code>-g</code> 选项来只输出有效组<code>ID</code>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># id -g</span></span><br><span class="line"><span class="number">0</span></span><br></pre></td></tr></table></figure><p>输出特定用户信息，我们可以输出特定的用户信息相关的<code>UID</code>和<code>GID</code>。只需要在<code>id</code>命令后跟上用户名：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">localhost</span> ~]<span class="comment"># id www</span></span><br><span class="line">uid=<span class="number">500</span>(www) gid=<span class="number">500</span>(www) groups=<span class="number">500</span>(www)</span><br></pre></td></tr></table></figure><h3 id="修改文件权限属性"><a href="#修改文件权限属性" class="headerlink" title="修改文件权限属性"></a>修改文件权限属性</h3><p>普通用户只能修改自己的文件名，时间与权限（注意）<br>因此修改其他用户权限，只能用最<code>nb</code>的<code>root</code>用户</p><h4 id="chown"><a href="#chown" class="headerlink" title="chown"></a><code>chown</code></h4><p><strong><code>chown</code>命令</strong>改变某个文件或目录的所有者和所属的组，该命令可以向某个用户授权，使该用户变成指定文件的所有者或者改变文件所属的组。用户可以是用户或者是用户D，用户组可以是组名或组<span class="exturl" data-url="aHR0cDovL21hbi5saW51eGRlLm5ldC9pZA==">id<i class="fa fa-external-link-alt"></i></span>。文件名可以使由空格分开的文件列表，在文件名中可以包含通配符。</p><p>只有文件主和超级用户才可以便用该命令。</p><h5 id="语法-9"><a href="#语法-9" class="headerlink" title="语法"></a>语法</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown(选项)(参数)</span><br></pre></td></tr></table></figure><h5 id="选项-6"><a href="#选项-6" class="headerlink" title="选项"></a>选项</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-c</span>或——changes：效果类似“<span class="literal">-v</span>”参数，但仅回报更改的部分；</span><br><span class="line"><span class="operator">-f</span>或-<span class="literal">-quite</span>或——silent：不显示错误信息；</span><br><span class="line"><span class="literal">-h</span>或-<span class="literal">-no</span><span class="literal">-dereference</span>：只对符号连接的文件作修改，而不更改其他任何相关文件；</span><br><span class="line"><span class="literal">-R</span>或——recursive：递归处理，将指定目录下的所有文件及子目录一并处理；</span><br><span class="line"><span class="literal">-v</span>或——version：显示指令执行过程；</span><br><span class="line">-<span class="literal">-dereference</span>：效果和“<span class="literal">-h</span>”参数相同；</span><br><span class="line">-<span class="literal">-help</span>：在线帮助；</span><br><span class="line">-<span class="literal">-reference</span>=&lt;参考文件或目录&gt;：把指定文件或目录的拥有者与所属群组全部设成和参考文件或目录的拥有者与所属群组相同；</span><br><span class="line">-<span class="literal">-version</span>：显示版本信息。</span><br></pre></td></tr></table></figure><h5 id="参数-8"><a href="#参数-8" class="headerlink" title="参数"></a>参数</h5><p>用户：组：指定所有者和所属工作组。当省略“：组”，仅改变文件所有者；<br>文件：指定要改变所有者和工作组的文件列表。支持多个文件和目标，支持shell通配符。</p><h5 id="实例-9"><a href="#实例-9" class="headerlink" title="实例"></a>实例</h5><p>将目录<code>/usr/meng</code>及其下面的所有文件、子目录的文件主改成 <code>liu</code>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chown <span class="literal">-R</span> liu /usr/meng</span><br></pre></td></tr></table></figure><p>修改<code>bbb.txt</code>文件所属用户为<code>root</code></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看该文件初始所属用户</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/aaa<span class="comment"># ls -l bbb.txt</span></span><br><span class="line"><span class="literal">-rw</span><span class="literal">-r</span>-<span class="literal">-r</span>-- <span class="number">1</span> tony tony    <span class="number">0</span> <span class="number">8</span>月   <span class="number">7</span> <span class="number">11</span>:<span class="number">28</span> bbb.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#执行切换所属用户</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/aaa<span class="comment"># chown root bbb.txt</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/aaa<span class="comment"># ls -l bbb.txt</span></span><br><span class="line"><span class="literal">-rw</span><span class="literal">-r</span>-<span class="literal">-r</span>-- <span class="number">1</span> root tony    <span class="number">0</span> <span class="number">8</span>月   <span class="number">7</span> <span class="number">11</span>:<span class="number">28</span> bbb.txt</span><br></pre></td></tr></table></figure><h4 id="chgrp"><a href="#chgrp" class="headerlink" title="chgrp"></a><code>chgrp</code></h4><p><strong><code>chgrp</code>命令</strong>用来改变文件或目录所属的用户组。该命令用来改变指定文件所属的用户组。其中，组名可以是用户组的<code>id</code>，也可以是用户组的组名。文件名可以 是由空格分开的要改变属组的文件列表，也可以是由通配符描述的文件集合。如果用户不是该文件的文件主或超级用户(<code>root</code>)，则不能改变该文件的组。</p><p>在<code>UNIX</code>系统家族里，文件或目录权限的掌控以拥有者及所属群组来管理。您可以使用<code>chgrp</code>指令去变更文件与目录的所属群组，设置方式采用群组名称或群组识别码皆可。</p><h5 id="语法-10"><a href="#语法-10" class="headerlink" title="语法"></a>语法</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chgrp(选项)(参数)</span><br></pre></td></tr></table></figure><h5 id="选项-7"><a href="#选项-7" class="headerlink" title="选项"></a>选项</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-c</span>或——changes：效果类似“<span class="literal">-v</span>”参数，但仅回报更改的部分；</span><br><span class="line"><span class="operator">-f</span>或-<span class="literal">-quiet</span>或——silent：不显示错误信息；</span><br><span class="line"><span class="literal">-h</span>或-<span class="literal">-no</span><span class="literal">-dereference</span>：只对符号连接的文件作修改，而不是该其他任何相关文件；</span><br><span class="line"><span class="literal">-R</span>或——recursive：递归处理，将指令目录下的所有文件及子目录一并处理；</span><br><span class="line"><span class="literal">-v</span>或——verbose：显示指令执行过程；</span><br><span class="line">-<span class="literal">-reference</span>=&lt;参考文件或目录&gt;：把指定文件或目录的所属群组全部设成和参考文件或目录的所属群组相同；</span><br></pre></td></tr></table></figure><h5 id="参数-9"><a href="#参数-9" class="headerlink" title="参数"></a>参数</h5><ul><li>组：指定新工作名称；</li><li>文件：指定要改变所属组的文件列表。多个文件或者目录之间使用空格隔开。</li></ul><h5 id="实例-10"><a href="#实例-10" class="headerlink" title="实例"></a>实例</h5><p>将<code>/usr/meng</code>及其子目录下的所有文件的用户组改为mengxin</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chgrp <span class="literal">-R</span> mengxin /usr/meng</span><br></pre></td></tr></table></figure><p>修改<code>bbb.txt</code>所属组为<code>root</code></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 初始所属组为tony</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/aaa<span class="comment"># ls -l bbb.txt</span></span><br><span class="line"><span class="literal">-rw</span><span class="literal">-r</span>-<span class="literal">-r</span>-- <span class="number">1</span> root tony <span class="number">0</span> <span class="number">8</span>月   <span class="number">7</span> <span class="number">11</span>:<span class="number">28</span> bbb.txt</span><br><span class="line"></span><br><span class="line"><span class="comment"># 修改所属组为root</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/aaa<span class="comment"># chgrp root bbb.txt</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/aaa<span class="comment"># ls -l bbb.txt</span></span><br><span class="line"><span class="literal">-rw</span><span class="literal">-r</span>-<span class="literal">-r</span>-- <span class="number">1</span> root root <span class="number">0</span> <span class="number">8</span>月   <span class="number">7</span> <span class="number">11</span>:<span class="number">28</span> bbb.txt</span><br></pre></td></tr></table></figure><h3 id="修改权限的命令"><a href="#修改权限的命令" class="headerlink" title="修改权限的命令"></a>修改权限的命令</h3><h4 id="chmod"><a href="#chmod" class="headerlink" title="chmod"></a><code>chmod</code></h4><p><strong><code>chmod</code>命令</strong>用来变更文件或目录的权限。在<code>UNIX</code>系统家族里，文件或目录权限的控制分别以读取、写入、执行3种一般权限来区分，另有3种特殊权限可供运用。用户可以使用<code>chmod</code>指令去变更文件与目录的权限，设置方式采用文字或数字代号皆可。符号连接的权限无法变更，如果用户对符号连接修改权限，其改变会作用在被连接的原始文件。</p><p>权限范围的表示法如下：</p><p><code>u</code> <code>User</code>，即文件或目录的拥有者；<br><code>g</code> <code>Group</code>，即文件或目录的所属群组；<br><code>o</code> <code>Other</code>，除了文件或目录拥有者或所属群组之外，其他用户皆属于这个范围；<br><code>a</code> <code>All</code>，即全部的用户，包含拥有者，所属群组以及其他用户；<br><code>r</code> 读取权限，数字代号为“4”;<br><code>w</code> 写入权限，数字代号为“2”；<br><code>x</code> 执行或切换权限，数字代号为“1”；<br><code>-</code> 不具任何权限，数字代号为“0”；<br><code>s</code> 特殊功能说明：变更文件或目录的权限。</p><h5 id="语法-11"><a href="#语法-11" class="headerlink" title="语法"></a>语法</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod(选项)(参数)</span><br></pre></td></tr></table></figure><h5 id="选项-8"><a href="#选项-8" class="headerlink" title="选项"></a>选项</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-c</span>或——changes：效果类似“<span class="literal">-v</span>”参数，但仅回报更改的部分；</span><br><span class="line"><span class="operator">-f</span>或-<span class="literal">-quiet</span>或——silent：不显示错误信息；</span><br><span class="line"><span class="literal">-R</span>或——recursive：递归处理，将指令目录下的所有文件及子目录一并处理；</span><br><span class="line"><span class="literal">-v</span>或——verbose：显示指令执行过程；</span><br><span class="line">-<span class="literal">-reference</span>=&lt;参考文件或目录&gt;：把指定文件或目录的所属群组全部设成和参考文件或目录的所属群组相同；</span><br><span class="line">&lt;权限范围&gt;+&lt;权限设置&gt;：开启权限范围的文件或目录的该选项权限设置；</span><br><span class="line">&lt;权限范围&gt;-&lt;权限设置&gt;：关闭权限范围的文件或目录的该选项权限设置；</span><br><span class="line">&lt;权限范围&gt;=&lt;权限设置&gt;：指定权限范围的文件或目录的该选项权限设置；</span><br></pre></td></tr></table></figure><h5 id="参数-10"><a href="#参数-10" class="headerlink" title="参数"></a>参数</h5><p>权限模式：指定文件的权限模式；<br>文件：要改变权限的文件。</p><h5 id="知识扩展和实例"><a href="#知识扩展和实例" class="headerlink" title="知识扩展和实例"></a>知识扩展和实例</h5><p><code>Linux</code>用 户分为：拥有者、组群(<code>Group</code>)、其他（<code>other</code>），<code>Linux</code>系统中，预设的情況下，系统中所有的帐号与一般身份使用者，以及<code>root</code>的相关信 息， 都是记录在<code>/etc/passwd</code>文件中。每个人的密码则是记录在<code>/etc/shadow</code>文件下。 此外，所有的组群名称记录在<code>/etc/group</code>內！</p><p><code>linux</code>文件的用户权限的分析图</p><p><img data-src="https://raw.githubusercontent.com/tonyu2019/PicGo/master/20190807120121.png"></p><p>例：<code>rwx　rw-　r--</code></p><p>r=读取属性　　//值＝4<br>w=写入属性　　//值＝2<br>x=执行属性　　//值＝1</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">chmod u+x,g+w f01　　//为文件f01设置自己可以执行，组员可以写入的权限</span><br><span class="line">chmod u=rwx,g=rw,o=<span class="built_in">r</span> f01</span><br><span class="line">chmod <span class="number">764</span> f01</span><br><span class="line">chmod a+x f01　　//对文件f01的u,g,o都设置可执行属性</span><br></pre></td></tr></table></figure><p>文件的属主和属组属性设置</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chown user:market f01　　//把文件f01给uesr，添加到market组</span><br><span class="line">ll <span class="literal">-d</span> f1  查看目录f1的属性</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">chmod [身份]　　 [参数] 　　[文件]</span><br><span class="line">　　　　u(user)　　 +(添加)　　</span><br><span class="line">　　　　g(<span class="built_in">group</span>)　  -(减去)</span><br><span class="line">　　　　o(other)　　=(赋值)</span><br><span class="line">　　　　a(all)</span><br></pre></td></tr></table></figure><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">当前权限</span><br><span class="line"><span class="literal">-rw</span><span class="literal">-rw</span><span class="literal">-r</span>-- <span class="number">1</span> root root <span class="number">0</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">16</span>:<span class="number">41</span> pyyu.txt</span><br><span class="line">方法<span class="number">1</span></span><br><span class="line">减去属主的写权限</span><br><span class="line">chmod u<span class="literal">-w</span> pyyu.txt</span><br><span class="line">查看权限</span><br><span class="line"><span class="literal">-r</span>-<span class="literal">-rw</span><span class="literal">-r</span>-- <span class="number">1</span> root root <span class="number">0</span> <span class="number">8</span>月  <span class="number">11</span> <span class="number">16</span>:<span class="number">41</span> pyyu.txt</span><br><span class="line"></span><br><span class="line">方法<span class="number">2</span></span><br><span class="line">属主添加可读可写可执行权限</span><br><span class="line">chmod <span class="number">700</span> pyyu.txt</span><br><span class="line"></span><br><span class="line">属主可读可写可执行</span><br><span class="line">属组可读可执行</span><br><span class="line">其他人可读可执行</span><br><span class="line">chmod <span class="number">755</span> pyyu.txt</span><br></pre></td></tr></table></figure><p>修改文件名，修改文件更改日期</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">mv</span> pyyu.txt chaoge.txt</span><br><span class="line"><span class="comment">#触摸，修改时间</span></span><br><span class="line">touch chaoge.txt</span><br></pre></td></tr></table></figure><h3 id="软连接"><a href="#软连接" class="headerlink" title="软连接"></a>软连接</h3><p>软连接也叫做符号链接，类似于<code>windows</code>的快捷方式。</p><p>常用于安装软件的快捷方式配置，如<code>python</code>，<code>nginx</code>等</p><h4 id="ln"><a href="#ln" class="headerlink" title="ln"></a><code>ln</code></h4><p><strong><code>ln</code>命令</strong>用来为文件创件连接，连接类型分为硬连接和符号连接两种，默认的连接类型是硬连接。如果要创建符号连接必须使用”-s”选项。</p><p>注意：符号链接文件不是一个独立的文件，它的许多属性依赖于源文件，所以给符号链接文件设置存取权限是没有意义的。</p><h5 id="语法-12"><a href="#语法-12" class="headerlink" title="语法"></a>语法</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln(选项)(参数)</span><br></pre></td></tr></table></figure><h5 id="选项-9"><a href="#选项-9" class="headerlink" title="选项"></a>选项</h5><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-b</span>或-<span class="literal">-backup</span>：删除，覆盖目标文件之前的备份；</span><br><span class="line"><span class="literal">-d</span>或<span class="operator">-F</span>或——directory：建立目录的硬连接；</span><br><span class="line"><span class="operator">-f</span>或——force：强行建立文件或目录的连接，不论文件或目录是否存在；</span><br><span class="line"><span class="literal">-i</span>或——interactive：覆盖既有文件之前先询问用户；</span><br><span class="line"><span class="literal">-n</span>或-<span class="literal">-no</span><span class="literal">-dereference</span>：把符号连接的目的目录视为一般文件；</span><br><span class="line"><span class="literal">-s</span>或——symbolic：对源文件建立符号连接，而非硬连接；</span><br><span class="line"><span class="literal">-S</span>&lt;字尾备份字符串&gt;或-<span class="literal">-suffix</span>=&lt;字尾备份字符串&gt;：用<span class="string">&quot;-b&quot;</span>参数备份目标文件后，备份文件的字尾会被加上一个备份字符串，预设的备份字符串是符号“~”，用户可通过“<span class="literal">-S</span>”参数来改变它；</span><br><span class="line"><span class="literal">-v</span>或——verbose：显示指令执行过程；</span><br><span class="line"><span class="literal">-V</span>&lt;备份方式&gt;或-<span class="literal">-version</span><span class="literal">-control</span>=&lt;备份方式&gt;：用“<span class="literal">-b</span>”参数备份目标文件后，备份文件的字尾会被加上一个备份字符串，这个字符串不仅可用“<span class="literal">-S</span>”参数变更，当使用“<span class="literal">-V</span>”参数&lt;备份方式&gt;指定不同备份方式时，也会产生不同字尾的备份字符串；</span><br><span class="line">-<span class="literal">-help</span>：在线帮助；</span><br><span class="line">-<span class="literal">-version</span>：显示版本信息。</span><br></pre></td></tr></table></figure><h5 id="参数-11"><a href="#参数-11" class="headerlink" title="参数"></a>参数</h5><ul><li>源文件：指定连接的源文件。如果使用<code>-s</code>选项创建符号连接，则“源文件”可以是文件或者目录。创建硬连接时，则“源文件”参数只能是文件；</li><li>目标文件：指定源文件的目标连接文件。</li></ul><h5 id="实例-11"><a href="#实例-11" class="headerlink" title="实例"></a>实例</h5><p>将目录<code>/usr/mengqc/mub1</code>下的文件<code>m2.c</code>链接到目录<code>/usr/liu</code>下的文件<code>a2.c</code></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/mengqc</span><br><span class="line">ln /mub1/m2.c /usr/liu/a2.c</span><br></pre></td></tr></table></figure><p>在执行<code>ln</code>命令之前，目录<code>/usr/liu</code>中不存在<code>a2.c</code>文件。执行<code>ln</code>之后，在<code>/usr/liu</code>目录中才有<code>a2.c</code>这一项，表明<code>m2.c</code>和<code>a2.c</code>链接起来（注意，二者在物理上是同一文件），利用<code>ls -l</code>命令可以看到链接数的变化。</p><p>在目录<code>/usr/liu</code>下建立一个符号链接文件<code>abc</code>，使它指向目录<code>/usr/mengqc/mub1</code></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln <span class="literal">-s</span> /usr/mengqc/mub1 /usr/liu/abc</span><br></pre></td></tr></table></figure><p>执行该命令后，<code>/usr/mengqc/mub1</code>代表的路径将存放在名为<code>/usr/liu/abc</code>的文件中。</p><h5 id="扩展知识"><a href="#扩展知识" class="headerlink" title="扩展知识"></a>扩展知识</h5><p>Linux具有为一个文件起多个名字的功能，称为链接。被链接的文件可以存放在相同的目录下，但是必须有不同的文件名，而不用在硬盘上为同样的数据重复备份。另外，被链接的文件也可以有相同的文件名，但是存放在不同的目录下，这样只要对一个目录下的该文件进行修改，就可以完成对所有目录下同名链接文件的修改。对于某个文件的各链接文件，我们可以给它们指定不同的存取权限，以控制对信息的共享和增强安全性。</p><p>文件链接有两种形式，即硬链接和符号链接。</p><h6 id="硬链接"><a href="#硬链接" class="headerlink" title="硬链接"></a>硬链接</h6><p>建立硬链接时，在另外的目录或本目录中增加目标文件的一个目录项，这样，一个文件就登记在多个目录中。如图所示的m2.c文件就在目录mub1和liu中都建立了目录项。</p><p>创建硬链接后，己经存在的文件的I节点号（Inode）会被多个目录文件项使用。一个文件的硬链接数可以在目录的长列表格式的第二列中看到，无额外链接的文件的链接数为l。</p><p>在默认情况下，ln命令创建硬链接。ln命令会增加链接数，<span class="exturl" data-url="aHR0cDovL21hbi5saW51eGRlLm5ldC9ybQ==">rm<i class="fa fa-external-link-alt"></i></span>命令会减少链接数。一个文件除非链接数为0，否则不会从文件系统中被物理地删除。</p><p>对硬链接有如下限制：</p><ul><li>不能对目录文件做硬链接。</li><li>不能在不同的文件系统之间做硬链接。就是说，链接文件和被链接文件必须位于同一个文件系统中。</li></ul><h5 id="符号链接"><a href="#符号链接" class="headerlink" title="符号链接"></a>符号链接</h5><p>符号链接也称为软链接，是将一个路径名链接到一个文件。这些文件是一种特别类型的文件。事实上，它只是一个文本文件（如图中的<code>abc</code>文件），其中包含它提供链接的另一个文件的路径名，如图中虚线箭头所示。另一个文件是实际包含所有数据的文件。所有读、写文件内容的命令被用于符号链接时，将沿着链接方向前进来访问实际的文件。</p><p><img data-src="https://raw.githubusercontent.com/tonyu2019/PicGo/master/20190807120837.png"></p><p>与硬链接不同的是，符号链接确实是一个新文件，当然它具有不同的I节点号；而硬链接并没有建立新文件。</p><p>符号链接没有硬链接的限制，可以对目录文件做符号链接，也可以在不同文件系统之间做符号链接。</p><p>用<code>ln -s</code>命令建立符号链接时，源文件最好用绝对路径名。这样可以在任何工作目录下进行符号链接。而当源文件用相对路径时，如果当前的工作路径与要创建的符号链接文件所在路径不同，就不能进行链接。</p><p>符号链接保持了链接与源文件或目录之间的区别：</p><ul><li>删除源文件或目录，只删除了数据，不会删除链接。一旦以同样文件名创建了源文件，链接将继续指向该文件的新数据。</li><li>在目录长列表中，符号链接作为一种特殊的文件类型显示出来，其第一个字母是l。</li><li>符号链接的大小是其链接文件的路径名中的字节数。</li><li>当用<code>ln -s</code>命令列出文件时，可以看到符号链接名后有一个箭头指向源文件或目录，例如<code>lrwxrwxrwx … 14 jun 20 10:20 /etc/motd-&gt;/original_file</code>其中，表示“文件大小”的数字“14”恰好说明源文件名<code>original_file</code>由14个字符构成。</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">ln <span class="literal">-s</span> 目标文件  软连接名</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>.存在文件/tmp/test.txt</span><br><span class="line">[<span class="type">root</span>@<span class="type">master</span> <span class="type">tmp</span>]<span class="comment"># ls -l</span></span><br><span class="line"><span class="literal">-rw</span><span class="literal">-r</span>-<span class="literal">-r</span>-- <span class="number">1</span> root root     <span class="number">10</span> <span class="number">10</span>月 <span class="number">15</span> <span class="number">21</span>:<span class="number">23</span> test.txt</span><br><span class="line"></span><br><span class="line"><span class="number">2</span>.在/home目录中建立软连接，指向/tmp/test.txt文件</span><br><span class="line">ln <span class="literal">-s</span> /tmp/test.txt my_test</span><br><span class="line"></span><br><span class="line"><span class="number">3</span>.查看软连接信息</span><br><span class="line">lrwxrwxrwx <span class="number">1</span> root root <span class="number">13</span> <span class="number">10</span>月 <span class="number">15</span> <span class="number">21</span>:<span class="number">35</span> my_test -&gt; /tmp/test.txt</span><br><span class="line"></span><br><span class="line"><span class="number">4</span>.通过软连接查看文件</span><br><span class="line"><span class="built_in">cat</span> my_test</span><br><span class="line"></span><br><span class="line">my_test只是/tmp/test.txt的一个别名，因此删除my_test不会影响/tmp/test.txt，但是删除了本尊，</span><br><span class="line">快捷方式就无意义不存在了</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>创建软连接并加入环境变量</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看环境变量</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/aaa<span class="comment"># echo $PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入以上目录可以发现，这些目录中很多都是软连接</span></span><br><span class="line">如：lrwxrwxrwx <span class="number">1</span> root root <span class="number">9</span> <span class="number">2</span>月  <span class="number">23</span> <span class="number">01</span>:<span class="number">32</span> /usr/bin/python -&gt; python2.<span class="number">7</span></span><br><span class="line">我们可以看到 /usr/bin/python软连接实际指向的是ptyhon2.<span class="number">7</span>解释器，如果把需要的软件软连接都放入/usr/bin等于自动把该软件加入到了环境变量</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将 /opt/php7.2加入环境变量有两种方法</span></span><br><span class="line">第一种PATH加入该路径</span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/php7.<span class="number">2</span></span><br><span class="line">第二种方法创建软连接，将软连接放入已加入环境变量的目录中</span><br><span class="line">ln <span class="literal">-s</span> /opt/php7.<span class="number">2</span>/php /usr/bin/php7.<span class="number">2</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h4 id="PS1变量"><a href="#PS1变量" class="headerlink" title="PS1变量"></a><code>PS1</code>变量</h4><p><code>Linux</code>命令提示符由<code>PS1</code>环境变量控制</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">tony_pc</span> ~]<span class="comment"># echo $PS1</span></span><br><span class="line">[\<span class="type">u</span><span class="selector-tag">@</span>\<span class="type">h</span> \<span class="type">W</span>]\<span class="variable">$</span></span><br><span class="line"></span><br><span class="line">可以自行调整全局变量/etc/profile文件用于永久生效 PS1=<span class="string">&#x27;[\u@\h \W\t]\$&#x27;</span></span><br><span class="line">\d　　日期</span><br><span class="line">\H　　完整主机名</span><br><span class="line">\h　　主机名第一个名字</span><br><span class="line">\t　　时间<span class="number">24</span>小时制HHMMSS</span><br><span class="line">\T　　时间<span class="number">12</span>小时制</span><br><span class="line">\A　　时间<span class="number">24</span>小时制HHMM</span><br><span class="line">\u　　当前用户账号名</span><br><span class="line">\v　　BASH的版本</span><br><span class="line">\w　　完整工作目录</span><br><span class="line">\W　　利用basename取得工作目录名</span><br><span class="line">\<span class="comment">#　　下达的第几个命令</span></span><br><span class="line">\<span class="variable">$</span>　　提示字符，root为<span class="comment">#，普通用户为$</span></span><br><span class="line">PS1 &gt; 变量名</span><br><span class="line"><span class="variable">$PS1</span> &gt; 查看变量内容</span><br><span class="line">PS1=新内容 重新赋值</span><br><span class="line"></span><br><span class="line">变量赋值，查看</span><br><span class="line">name=<span class="string">&#x27;chaoge&#x27;</span></span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$name</span></span><br><span class="line"></span><br><span class="line">PS1显示ip地址</span><br><span class="line">export PS1=<span class="string">&quot;[\u@\h `/sbin/ifconfig ens33 | sed -nr &#x27;s/.*inet (addr:)?(([0-9]*\.)&#123;3&#125;[0-9]*).*/\2/p&#x27;` \w]\<span class="variable">$</span>&quot;</span></span><br></pre></td></tr></table></figure><h3 id="tar解压命令"><a href="#tar解压命令" class="headerlink" title="tar解压命令"></a><code>tar</code>解压命令</h3><p><strong>tar命令</strong>可以为<code>linux</code>的文件和目录创建档案。利用<code>tar</code>，可以为某一特定文件创建档案（备份文件），也可以在档案中改变文件，或者向档案中加入新的文件。<code>tar</code>最初被用来在磁带上创建档案，现在，用户可以在任何设备上创建档案。利用<code>tar</code>命令，可以把一大堆的文件和目录全部打包成一个文件，这对于备份文件或将几个文件组合成为一个文件以便于网络传输是非常有用的。</p><p>首先要弄清两个概念：打包和压缩。打包是指将一大堆文件或目录变成一个总的文件；压缩则是将一个大的文件通过一些压缩算法变成一个小文件。</p><p>为什么要区分这两个概念呢？这源于<code>Linux</code>中很多压缩程序只能针对一个文件进行压缩，这样当你想要压缩一大堆文件时，你得先将这一大堆文件先打成一个包（<code>tar</code>命令），然后再用压缩程序进行压缩（<code>gzip/bzip2</code>命令）。</p><blockquote><p>注意：</p><p><code>tar</code> 命令：用来压缩和解压文件。<code>tar</code>本身不具有压缩功能。他是调用压缩功能实现的。</p><p>如果要实现压缩可以在用<code>tar</code>打包后使用<code>gzip</code>命令进行压缩；或者直接使用<code>tar</code>选项中的<code>-z</code>或<code>-j</code>来压缩文件</p></blockquote><h4 id="语法-13"><a href="#语法-13" class="headerlink" title="语法"></a>语法</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar(选项)(参数)</span><br></pre></td></tr></table></figure><h4 id="选项-10"><a href="#选项-10" class="headerlink" title="选项"></a>选项</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-A</span>或-<span class="literal">-catenate</span>：新增文件到以存在的备份文件；</span><br><span class="line"><span class="literal">-B</span>：设置区块大小；</span><br><span class="line"><span class="literal">-c</span>或-<span class="literal">-create</span>：建立新的备份文件；</span><br><span class="line"><span class="literal">-C</span> &lt;目录&gt;：这个选项用在解压缩，若要在特定目录解压缩，可以使用这个选项。</span><br><span class="line"><span class="literal">-d</span>：记录文件的差别；</span><br><span class="line"><span class="literal">-x</span>或-<span class="literal">-extract</span>或-<span class="literal">-get</span>：从备份文件中还原文件；</span><br><span class="line"><span class="literal">-t</span>或-<span class="literal">-list</span>：列出备份文件的内容；</span><br><span class="line"><span class="literal">-z</span>或-<span class="literal">-gzip</span>或-<span class="literal">-ungzip</span>：通过gzip指令处理备份文件；</span><br><span class="line"><span class="literal">-Z</span>或-<span class="literal">-compress</span>或-<span class="literal">-uncompress</span>：通过compress指令处理备份文件；</span><br><span class="line"><span class="operator">-f</span>&lt;备份文件&gt;或-<span class="operator">-file</span>=&lt;备份文件&gt;：指定备份文件；</span><br><span class="line"><span class="literal">-v</span>或-<span class="literal">-verbose</span>：显示指令执行过程；</span><br><span class="line"><span class="literal">-r</span>：添加文件到已经压缩的文件；</span><br><span class="line"><span class="literal">-u</span>：添加改变了和现有的文件到已经存在的压缩文件；</span><br><span class="line"><span class="literal">-j</span>：支持bzip2解压文件；</span><br><span class="line"><span class="literal">-v</span>：显示操作过程；</span><br><span class="line"><span class="literal">-l</span>：文件系统边界设置；</span><br><span class="line"><span class="literal">-k</span>：保留原有文件不覆盖；</span><br><span class="line"><span class="literal">-m</span>：保留文件不被覆盖；</span><br><span class="line"><span class="literal">-w</span>：确认压缩文件的正确性；</span><br><span class="line"><span class="literal">-p</span>或-<span class="literal">-same</span><span class="literal">-permissions</span>：用原来的文件权限还原文件；</span><br><span class="line"><span class="literal">-P</span>或-<span class="literal">-absolute</span><span class="literal">-names</span>：文件名使用绝对名称，不移除文件名称前的“/”号；</span><br><span class="line"><span class="literal">-N</span> &lt;日期格式&gt; 或 -<span class="literal">-newer</span>=&lt;日期时间&gt;：只将较指定日期更新的文件保存到备份文件里；</span><br><span class="line">-<span class="literal">-exclude</span>=&lt;范本样式&gt;：排除符合范本样式的文件。</span><br></pre></td></tr></table></figure><h4 id="参数-12"><a href="#参数-12" class="headerlink" title="参数"></a>参数</h4><p>文件或目录：指定要打包的文件或目录列表。</p><h4 id="实例-12"><a href="#实例-12" class="headerlink" title="实例"></a>实例</h4><p><strong>将文件全部打包成<code>tar</code>包</strong>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar <span class="literal">-cvf</span> log.tar log2012.log    仅打包，不压缩！ </span><br><span class="line">tar <span class="literal">-zcvf</span> log.tar.gz log2012.log   打包后，以 gzip 压缩 </span><br><span class="line">tar <span class="literal">-jcvf</span> log.tar.bz2 log2012.log  打包后，以 bzip2 压缩 </span><br></pre></td></tr></table></figure><p>在选项<code>f</code>之后的文件档名是自己取的，我们习惯上都用 <code>.tar</code> 来作为辨识。 如果加<code>z</code>选项，则以<code>.tar.gz</code>或<code>.tgz</code>来代表<code>gzip</code>压缩过的tar包；如果加<code>j</code>选项，则以<code>.tar.bz2</code>来作为<code>tar</code>包名。</p><p><strong>查阅上述tar包内有哪些文件</strong>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar <span class="literal">-ztvf</span> log.tar.gz</span><br></pre></td></tr></table></figure><p>由于我们使用 <code>gzip</code> 压缩的<code>log.tar.gz</code>，所以要查阅<code>log.tar.gz</code>包内的文件时，就得要加上<code>z</code>这个选项了。</p><p><strong>将tar包解压缩</strong>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar <span class="literal">-zxvf</span> /opt/soft/test/log.tar.gz</span><br></pre></td></tr></table></figure><p>在预设的情况下，我们可以将压缩档在任何地方解开的</p><p><strong>只将tar内的部分文件解压出来</strong>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar <span class="literal">-zxvf</span> /opt/soft/test/log30.tar.gz log2013.log</span><br></pre></td></tr></table></figure><p>我可以透过<code>tar -ztvf</code>来查阅 <code>tar</code> 包内的文件名称，如果单只要一个文件，就可以透过这个方式来解压部分文件！</p><p><strong>文件备份下来，并且保存其权限</strong>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar <span class="literal">-zcvpf</span> log31.tar.gz log2014.log log2015.log log2016.log</span><br></pre></td></tr></table></figure><p>这个<code>-p</code>的属性是很重要的，尤其是当您要保留原本文件的属性时。</p><p><strong>在文件夹当中，比某个日期新的文件才备份</strong>：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar <span class="literal">-N</span> <span class="string">&quot;2012/11/13&quot;</span> <span class="literal">-zcvf</span> log17.tar.gz test</span><br></pre></td></tr></table></figure><p><strong>备份文件夹内容是排除部分文件：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -<span class="literal">-exclude</span> scf/service <span class="literal">-zcvf</span> scf.tar.gz scf/*</span><br></pre></td></tr></table></figure><p><strong>其实最简单的使用 tar 就只要记忆底下的方式即可：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">压　缩：tar <span class="literal">-jcv</span> <span class="operator">-f</span> filename.tar.bz2 要被压缩的文件或目录名称</span><br><span class="line">查　询：tar <span class="literal">-jtv</span> <span class="operator">-f</span> filename.tar.bz2</span><br><span class="line">解压缩：tar <span class="literal">-jxv</span> <span class="operator">-f</span> filename.tar.bz2 <span class="literal">-C</span> 欲解压缩的目录</span><br></pre></td></tr></table></figure><p><strong>压缩当前目录所有<code>jpg</code>结尾的文件</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">tar <span class="literal">-cf</span> all_pic.tar *.jpg </span><br><span class="line"><span class="comment">#压缩当前目录所有jpg结尾的文件</span></span><br></pre></td></tr></table></figure><h3 id="netstat命令"><a href="#netstat命令" class="headerlink" title="netstat命令"></a><code>netstat</code>命令</h3><p><code>netstat</code>命令用来打印<code>Linux</code>中网络系统的状态信息，可让你得知整个<code>Linux</code>系统的网络情况。</p><h4 id="语法-14"><a href="#语法-14" class="headerlink" title="语法"></a>语法</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat(选项)</span><br></pre></td></tr></table></figure><h4 id="选项-常用"><a href="#选项-常用" class="headerlink" title="选项 (常用)"></a>选项 (常用)</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-t</span>或-<span class="literal">-tcp</span>：显示TCP传输协议的连线状况；</span><br><span class="line"><span class="literal">-u</span>或-<span class="literal">-udp</span>：显示UDP传输协议的连线状况；</span><br><span class="line"><span class="literal">-n</span>或-<span class="literal">-numeric</span>：直接使用ip地址，而不通过域名服务器；</span><br><span class="line"><span class="literal">-l</span>或-<span class="literal">-listening</span>：显示监控中的服务器的Socket；</span><br><span class="line"><span class="literal">-p</span>或-<span class="literal">-programs</span>：显示正在使用Socket的程序识别码和程序名称；</span><br><span class="line"><span class="literal">-a</span>或-<span class="literal">-all</span>：显示所有连线中的Socket；</span><br></pre></td></tr></table></figure><h4 id="实例-13"><a href="#实例-13" class="headerlink" title="实例"></a>实例</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">tony_pic</span> ~ <span class="number">10</span>:<span class="number">21</span>:<span class="number">59</span>]<span class="comment">#netstat -tunlp</span></span><br><span class="line">Active Internet connections (only servers)</span><br><span class="line">Proto Recv<span class="literal">-Q</span> <span class="built_in">Send-Q</span> Local Address           Foreign Address         State       PID/Program name    </span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">111</span>             <span class="number">0.0</span>.<span class="number">0.0</span>:*               LISTEN      <span class="number">1</span>/systemd           </span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">22</span>              <span class="number">0.0</span>.<span class="number">0.0</span>:*               LISTEN      <span class="number">814</span>/sshd            </span><br><span class="line">tcp6       <span class="number">0</span>      <span class="number">0</span> :::<span class="number">111</span>                  :::*                    LISTEN      <span class="number">2703</span>/rpcbind        </span><br><span class="line">tcp6       <span class="number">0</span>      <span class="number">0</span> :::<span class="number">3306</span>                 :::*                    LISTEN      <span class="number">29269</span>/mysqld        </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">758</span>             <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">2703</span>/rpcbind        </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">111</span>             <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">2703</span>/rpcbind        </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">10.141</span>.<span class="number">32.137</span>:<span class="number">123</span>       <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">484</span>/ntpd            </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">123</span>           <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">484</span>/ntpd            </span><br><span class="line">udp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">123</span>             <span class="number">0.0</span>.<span class="number">0.0</span>:*                           <span class="number">484</span>/ntpd            </span><br><span class="line">udp6       <span class="number">0</span>      <span class="number">0</span> :::<span class="number">758</span>                  :::*                                <span class="number">2703</span>/rpcbind        </span><br><span class="line">udp6       <span class="number">0</span>      <span class="number">0</span> :::<span class="number">111</span>                  :::*                                <span class="number">2703</span>/rpcbind        </span><br><span class="line">udp6       <span class="number">0</span>      <span class="number">0</span> :::<span class="number">123</span>                  :::*                                <span class="number">484</span>/ntpd </span><br></pre></td></tr></table></figure><p>查看ssh的网络连接</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@tony<span class="literal">-PC</span>:/tmp/test<span class="comment"># netstat -tunlp | grep ssh</span></span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">22</span>              <span class="number">0.0</span>.<span class="number">0.0</span>:*               LISTEN      <span class="number">2592</span>/sshd           </span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6010</span>          <span class="number">0.0</span>.<span class="number">0.0</span>:*               LISTEN      <span class="number">5366</span>/sshd: tony@pts </span><br><span class="line">tcp6       <span class="number">0</span>      <span class="number">0</span> :::<span class="number">22</span>                   :::*                    LISTEN      <span class="number">2592</span>/sshd           </span><br><span class="line">tcp6       <span class="number">0</span>      <span class="number">0</span> ::<span class="number">1</span>:<span class="number">6010</span>                :::*                    LISTEN      <span class="number">5366</span>/sshd: tony@pts </span><br></pre></td></tr></table></figure><p>查看80端口是否开启</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@tony<span class="literal">-PC</span>:/tmp/test<span class="comment"># netstat -tunlp |grep 80</span></span><br><span class="line">tcp        <span class="number">0</span>      <span class="number">0</span> <span class="number">0.0</span>.<span class="number">0.0</span>:<span class="number">80</span>              <span class="number">0.0</span>.<span class="number">0.0</span>:*               LISTEN      <span class="number">2607</span>/nginx: master  </span><br></pre></td></tr></table></figure><h3 id="ps命令"><a href="#ps命令" class="headerlink" title="ps命令"></a><code>ps</code>命令</h3><p><strong><code>ps</code>命令</strong>用于报告当前系统的进程状态。可以搭配<code>kill</code>指令随时中断、删除不必要的程序。<code>ps</code>命令是最基本同时也是非常强大的进程查看命令，使用该命令可以确定有哪些进程正在运行和运行的状态、进程是否结束、进程有没有僵死、哪些进程占用了过多的资源等等，总之大部分信息都是可以通过执行该命令得到的。</p><h3 id="语法-15"><a href="#语法-15" class="headerlink" title="语法"></a>语法</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ps</span>(选项)</span><br></pre></td></tr></table></figure><h3 id="选项-11"><a href="#选项-11" class="headerlink" title="选项"></a>选项</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-a</span>：显示所有终端机下执行的程序，除了阶段作业领导者之外。</span><br><span class="line">a：显示现行终端机下的所有程序，包括其他用户的程序。</span><br><span class="line"><span class="literal">-A</span>：显示所有程序。</span><br><span class="line"><span class="literal">-c</span>：显示<span class="built_in">CLS</span>和PRI栏位。</span><br><span class="line">c：列出程序时，显示每个程序真正的指令名称，而不包含路径，选项或常驻服务的标示。</span><br><span class="line"><span class="literal">-C</span>&lt;指令名称&gt;：指定执行指令的名称，并列出该指令的程序的状况。</span><br><span class="line"><span class="literal">-d</span>：显示所有程序，但不包括阶段作业领导者的程序。</span><br><span class="line"><span class="literal">-e</span>：此选项的效果和指定<span class="string">&quot;A&quot;</span>选项相同。</span><br><span class="line">e：列出程序时，显示每个程序所使用的环境变量。</span><br><span class="line"><span class="operator">-f</span>：显示UID,PPIP,C与STIME栏位。</span><br><span class="line">f：用ASCII字符显示树状结构，表达程序间的相互关系。</span><br><span class="line"><span class="literal">-g</span>&lt;群组名称&gt;：此选项的效果和指定<span class="string">&quot;-G&quot;</span>选项相同，当亦能使用阶段作业领导者的名称来指定。</span><br><span class="line">g：显示现行终端机下的所有程序，包括群组领导者的程序。</span><br><span class="line"><span class="literal">-G</span>&lt;群组识别码&gt;：列出属于该群组的程序的状况，也可使用群组名称来指定。</span><br><span class="line"><span class="built_in">h</span>：不显示标题列。</span><br><span class="line"><span class="literal">-H</span>：显示树状结构，表示程序间的相互关系。</span><br><span class="line"><span class="literal">-j</span>或j：采用工作控制的格式显示程序状况。</span><br><span class="line"><span class="literal">-l</span>或l：采用详细的格式来显示程序状况。</span><br><span class="line">L：列出栏位的相关信息。</span><br><span class="line"><span class="literal">-m</span>或m：显示所有的执行绪。</span><br><span class="line">n：以数字来表示USER和WCHAN栏位。</span><br><span class="line"><span class="literal">-N</span>：显示所有的程序，除了执行<span class="built_in">ps</span>指令终端机下的程序之外。</span><br><span class="line"><span class="literal">-p</span>&lt;程序识别码&gt;：指定程序识别码，并列出该程序的状况。</span><br><span class="line">p&lt;程序识别码&gt;：此选项的效果和指定<span class="string">&quot;-p&quot;</span>选项相同，只在列表格式方面稍有差异。</span><br><span class="line"><span class="built_in">r</span>：只列出现行终端机正在执行中的程序。</span><br><span class="line"><span class="literal">-s</span>&lt;阶段作业&gt;：指定阶段作业的程序识别码，并列出隶属该阶段作业的程序的状况。</span><br><span class="line">s：采用程序信号的格式显示程序状况。</span><br><span class="line">S：列出程序时，包括已中断的子程序资料。</span><br><span class="line"><span class="literal">-t</span>&lt;终端机编号&gt;：指定终端机编号，并列出属于该终端机的程序的状况。</span><br><span class="line">t&lt;终端机编号&gt;：此选项的效果和指定<span class="string">&quot;-t&quot;</span>选项相同，只在列表格式方面稍有差异。</span><br><span class="line"><span class="literal">-T</span>：显示现行终端机下的所有程序。</span><br><span class="line"><span class="literal">-u</span>&lt;用户识别码&gt;：此选项的效果和指定<span class="string">&quot;-U&quot;</span>选项相同。</span><br><span class="line">u：以用户为主的格式来显示程序状况。</span><br><span class="line"><span class="literal">-U</span>&lt;用户识别码&gt;：列出属于该用户的程序的状况，也可使用用户名称来指定。</span><br><span class="line">U&lt;用户名称&gt;：列出属于该用户的程序的状况。</span><br><span class="line">v：采用虚拟内存的格式显示程序状况。</span><br><span class="line"><span class="literal">-V</span>或V：显示版本信息。</span><br><span class="line"><span class="literal">-w</span>或w：采用宽阔的格式来显示程序状况。　</span><br><span class="line">x：显示所有程序，不以终端机来区分。</span><br><span class="line">X：采用旧式的Linux i386登陆格式显示程序状况。</span><br><span class="line"><span class="literal">-y</span>：配合选项<span class="string">&quot;-l&quot;</span>使用时，不显示F(flag)栏位，并以RSS栏位取代ADDR栏位　。</span><br><span class="line">-&lt;程序识别码&gt;：此选项的效果和指定<span class="string">&quot;p&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-cols</span>&lt;每列字符数&gt;：设置每列的最大字符数。</span><br><span class="line">-<span class="literal">-columns</span>&lt;每列字符数&gt;：此选项的效果和指定<span class="string">&quot;--cols&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-cumulative</span>：此选项的效果和指定<span class="string">&quot;S&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-deselect</span>：此选项的效果和指定<span class="string">&quot;-N&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-forest</span>：此选项的效果和指定<span class="string">&quot;f&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-headers</span>：重复显示标题列。</span><br><span class="line">-<span class="literal">-help</span>：在线帮助。</span><br><span class="line">-<span class="literal">-info</span>：显示排错信息。</span><br><span class="line">-<span class="literal">-lines</span>&lt;显示列数&gt;：设置显示画面的列数。</span><br><span class="line">-<span class="literal">-no</span><span class="literal">-headers</span>：此选项的效果和指定<span class="string">&quot;h&quot;</span>选项相同，只在列表格式方面稍有差异。</span><br><span class="line">-<span class="literal">-group</span>&lt;群组名称&gt;：此选项的效果和指定<span class="string">&quot;-G&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-Group</span>&lt;群组识别码&gt;：此选项的效果和指定<span class="string">&quot;-G&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-pid</span>&lt;程序识别码&gt;：此选项的效果和指定<span class="string">&quot;-p&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-rows</span>&lt;显示列数&gt;：此选项的效果和指定<span class="string">&quot;--lines&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-sid</span>&lt;阶段作业&gt;：此选项的效果和指定<span class="string">&quot;-s&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-tty</span>&lt;终端机编号&gt;：此选项的效果和指定<span class="string">&quot;-t&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-user</span>&lt;用户名称&gt;：此选项的效果和指定<span class="string">&quot;-U&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-User</span>&lt;用户识别码&gt;：此选项的效果和指定<span class="string">&quot;-U&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-version</span>：此选项的效果和指定<span class="string">&quot;-V&quot;</span>选项相同。</span><br><span class="line">-<span class="literal">-widty</span>&lt;每列字符数&gt;：此选项的效果和指定<span class="string">&quot;-cols&quot;</span>选项相同。</span><br></pre></td></tr></table></figure><p>由于<code>ps</code>命令能够支持的系统类型相当的多，所以选项多的离谱！</p><p>示例：查询<code>python</code>的运行进程</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">root@tony<span class="literal">-PC</span>:/tmp/test<span class="comment"># ps -ef | grep python</span></span><br><span class="line">tony      <span class="number">5138</span>  <span class="number">4050</span>  <span class="number">0</span> <span class="number">09</span>:<span class="number">20</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> /usr/bin/python3 /usr/share/system<span class="literal">-config</span><span class="literal">-printer</span>/applet.py</span><br><span class="line">tony     <span class="number">21213</span> <span class="number">21186</span>  <span class="number">0</span> <span class="number">15</span>:<span class="number">37</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> /usr/bin/python3 /usr/bin/onboard <span class="literal">-e</span> -<span class="literal">-layout</span> Small</span><br><span class="line">root     <span class="number">21657</span> <span class="number">13542</span>  <span class="number">0</span> <span class="number">15</span>:<span class="number">40</span> pts/<span class="number">0</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> python3 gen/test.py</span><br><span class="line">root     <span class="number">21659</span> <span class="number">10907</span>  <span class="number">0</span> <span class="number">15</span>:<span class="number">40</span> pts/<span class="number">1</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> grep python</span><br></pre></td></tr></table></figure><p>关掉<code>python</code>运行的<code>gen/test.py</code>进程：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">root@tony<span class="literal">-PC</span>:/tmp/test<span class="comment"># kill 21657</span></span><br><span class="line"></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/test<span class="comment"># ps -ef | grep python</span></span><br><span class="line">tony      <span class="number">5138</span>  <span class="number">4050</span>  <span class="number">0</span> <span class="number">09</span>:<span class="number">20</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> /usr/bin/python3 /usr/share/system<span class="literal">-config</span><span class="literal">-printer</span>/applet.py</span><br><span class="line">tony     <span class="number">21213</span> <span class="number">21186</span>  <span class="number">0</span> <span class="number">15</span>:<span class="number">37</span> ?        <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> /usr/bin/python3 /usr/bin/onboard <span class="literal">-e</span> -<span class="literal">-layout</span> Small</span><br><span class="line">root     <span class="number">21661</span> <span class="number">10907</span>  <span class="number">0</span> <span class="number">15</span>:<span class="number">41</span> pts/<span class="number">1</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> grep python</span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="kill命令"><a href="#kill命令" class="headerlink" title="kill命令"></a><code>kill</code>命令</h3><p><strong>kill命令</strong>用来删除执行中的程序或工作。<code>kill</code>可将指定的信息送至程序。预设的信息为<code>SIGTERM</code>(15),可将指定程序终止。若仍无法终止该程序，可使用<code>SIGKILL</code>(9)信息尝试强制删除程序。程序或工作的编号可利用<code>ps</code>指令或<code>job</code>指令查看。</p><h4 id="语法-16"><a href="#语法-16" class="headerlink" title="语法"></a>语法</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">kill</span>(选项)(参数)</span><br></pre></td></tr></table></figure><h4 id="选项-12"><a href="#选项-12" class="headerlink" title="选项"></a>选项</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-a</span>：当处理当前进程时，不限制命令名和进程号的对应关系；</span><br><span class="line"><span class="literal">-l</span> &lt;信息编号&gt;：若不加&lt;信息编号&gt;选项，则<span class="literal">-l</span>参数会列出全部的信息名称；</span><br><span class="line"><span class="literal">-p</span>：指定<span class="built_in">kill</span> 命令只打印相关进程的进程号，而不发送任何信号；</span><br><span class="line"><span class="literal">-s</span> &lt;信息名称或编号&gt;：指定要送出的信息；</span><br><span class="line"><span class="literal">-u</span>：指定用户。</span><br></pre></td></tr></table></figure><h4 id="参数-13"><a href="#参数-13" class="headerlink" title="参数"></a>参数</h4><p>进程或作业识别号：指定要删除的进程或作业。</p><h4 id="实例-14"><a href="#实例-14" class="headerlink" title="实例"></a>实例</h4><p>列出所有信号名称：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">kill</span> <span class="literal">-l</span></span><br><span class="line"> <span class="number">1</span>) SIGHUP       <span class="number">2</span>) SIGINT       <span class="number">3</span>) SIGQUIT      <span class="number">4</span>) SIGILL</span><br><span class="line"> <span class="number">5</span>) SIGTRAP      <span class="number">6</span>) SIGABRT      <span class="number">7</span>) SIGBUS       <span class="number">8</span>) SIGFPE</span><br><span class="line"> <span class="number">9</span>) SIGKILL     <span class="number">10</span>) SIGUSR1     <span class="number">11</span>) SIGSEGV     <span class="number">12</span>) SIGUSR2</span><br><span class="line"><span class="number">13</span>) SIGPIPE     <span class="number">14</span>) SIGALRM     <span class="number">15</span>) SIGTERM     <span class="number">16</span>) SIGSTKFLT</span><br><span class="line"><span class="number">17</span>) SIGCHLD     <span class="number">18</span>) SIGCONT     <span class="number">19</span>) SIGSTOP     <span class="number">20</span>) SIGTSTP</span><br><span class="line"><span class="number">21</span>) SIGTTIN     <span class="number">22</span>) SIGTTOU     <span class="number">23</span>) SIGURG      <span class="number">24</span>) SIGXCPU</span><br><span class="line"><span class="number">25</span>) SIGXFSZ     <span class="number">26</span>) SIGVTALRM   <span class="number">27</span>) SIGPROF     <span class="number">28</span>) SIGWINCH</span><br><span class="line"><span class="number">29</span>) SIGIO       <span class="number">30</span>) SIGPWR      <span class="number">31</span>) SIGSYS      <span class="number">34</span>) SIGRTMIN</span><br><span class="line"><span class="number">35</span>) SIGRTMIN+<span class="number">1</span>  <span class="number">36</span>) SIGRTMIN+<span class="number">2</span>  <span class="number">37</span>) SIGRTMIN+<span class="number">3</span>  <span class="number">38</span>) SIGRTMIN+<span class="number">4</span></span><br><span class="line"><span class="number">39</span>) SIGRTMIN+<span class="number">5</span>  <span class="number">40</span>) SIGRTMIN+<span class="number">6</span>  <span class="number">41</span>) SIGRTMIN+<span class="number">7</span>  <span class="number">42</span>) SIGRTMIN+<span class="number">8</span></span><br><span class="line"><span class="number">43</span>) SIGRTMIN+<span class="number">9</span>  <span class="number">44</span>) SIGRTMIN+<span class="number">10</span> <span class="number">45</span>) SIGRTMIN+<span class="number">11</span> <span class="number">46</span>) SIGRTMIN+<span class="number">12</span></span><br><span class="line"><span class="number">47</span>) SIGRTMIN+<span class="number">13</span> <span class="number">48</span>) SIGRTMIN+<span class="number">14</span> <span class="number">49</span>) SIGRTMIN+<span class="number">15</span> <span class="number">50</span>) SIGRTMAX<span class="literal">-14</span></span><br><span class="line"><span class="number">51</span>) SIGRTMAX<span class="literal">-13</span> <span class="number">52</span>) SIGRTMAX<span class="literal">-12</span> <span class="number">53</span>) SIGRTMAX<span class="literal">-11</span> <span class="number">54</span>) SIGRTMAX<span class="literal">-10</span></span><br><span class="line"><span class="number">55</span>) SIGRTMAX<span class="literal">-9</span>  <span class="number">56</span>) SIGRTMAX<span class="literal">-8</span>  <span class="number">57</span>) SIGRTMAX<span class="literal">-7</span>  <span class="number">58</span>) SIGRTMAX<span class="literal">-6</span></span><br><span class="line"><span class="number">59</span>) SIGRTMAX<span class="literal">-5</span>  <span class="number">60</span>) SIGRTMAX<span class="literal">-4</span>  <span class="number">61</span>) SIGRTMAX<span class="literal">-3</span>  <span class="number">62</span>) SIGRTMAX<span class="literal">-2</span></span><br><span class="line"><span class="number">63</span>) SIGRTMAX<span class="literal">-1</span>  <span class="number">64</span>) SIGRTMAX</span><br></pre></td></tr></table></figure><p>只有第9种信号(<code>SIGKILL</code>)才可以无条件终止进程，其他信号进程都有权利忽略，<strong>下面是常用的信号：</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">HUP     <span class="number">1</span>    终端断线</span><br><span class="line">INT     <span class="number">2</span>    中断（同 Ctrl + C）</span><br><span class="line">QUIT    <span class="number">3</span>    退出（同 Ctrl + \）</span><br><span class="line">TERM   <span class="number">15</span>    终止</span><br><span class="line"><span class="built_in">KILL</span>    <span class="number">9</span>    强制终止</span><br><span class="line">CONT   <span class="number">18</span>    继续（与STOP相反， fg/bg命令）</span><br><span class="line">STOP   <span class="number">19</span>    暂停（同 Ctrl + Z）</span><br></pre></td></tr></table></figure><p>先用<code>ps</code>查找进程，然后用kill杀掉：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ps</span> <span class="literal">-ef</span> | grep vim</span><br><span class="line">root      <span class="number">3268</span>  <span class="number">2884</span>  <span class="number">0</span> <span class="number">16</span>:<span class="number">21</span> pts/<span class="number">1</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> vim install.log</span><br><span class="line">root      <span class="number">3370</span>  <span class="number">2822</span>  <span class="number">0</span> <span class="number">16</span>:<span class="number">21</span> pts/<span class="number">0</span>    <span class="number">00</span>:<span class="number">00</span>:<span class="number">00</span> grep vim</span><br><span class="line"></span><br><span class="line"><span class="built_in">kill</span> <span class="number">3268</span></span><br><span class="line"><span class="built_in">kill</span> <span class="number">3268</span></span><br><span class="line"><span class="literal">-bash</span>: <span class="built_in">kill</span>: (<span class="number">3268</span>) - 没有那个进程</span><br></pre></td></tr></table></figure><h3 id="killall命令"><a href="#killall命令" class="headerlink" title="killall命令"></a><code>killall</code>命令</h3><p><strong><code>killall</code>命令</strong>使用进程的名称来杀死进程，使用此指令可以杀死一组同名进程。我们可以使用<code>kill</code>命令杀死指定进程<code>PID</code>的进程，如果要找到我们需要杀死的进程，我们还需要在之前使用<code>ps</code>等命令再配合<code>grep</code>来查找进程，而<code>killall</code>把这两个过程合二为一，是一个很好用的命令。</p><h4 id="语法-17"><a href="#语法-17" class="headerlink" title="语法"></a>语法</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall(选项)(参数)</span><br></pre></td></tr></table></figure><h4 id="选项-13"><a href="#选项-13" class="headerlink" title="选项"></a>选项</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-e</span>：对长名称进行精确匹配；</span><br><span class="line"><span class="literal">-l</span>：忽略大小写的不同；</span><br><span class="line"><span class="literal">-p</span>：杀死进程所属的进程组；</span><br><span class="line"><span class="literal">-i</span>：交互式杀死进程，杀死进程前需要进行确认；</span><br><span class="line"><span class="literal">-l</span>：打印所有已知信号列表；</span><br><span class="line"><span class="literal">-q</span>：如果没有进程被杀死。则不输出任何信息；</span><br><span class="line"><span class="literal">-r</span>：使用正规表达式匹配要杀死的进程名称；</span><br><span class="line"><span class="literal">-s</span>：用指定的进程号代替默认信号“SIGTERM”；</span><br><span class="line"><span class="literal">-u</span>：杀死指定用户的进程。</span><br></pre></td></tr></table></figure><h4 id="参数-14"><a href="#参数-14" class="headerlink" title="参数"></a>参数</h4><p>进程名称：指定要杀死的进程名称。</p><h4 id="实例-15"><a href="#实例-15" class="headerlink" title="实例"></a>实例</h4><p>杀死所有同名进程</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">killall vi</span><br></pre></td></tr></table></figure><h3 id="SELinux功能"><a href="#SELinux功能" class="headerlink" title="SELinux功能"></a><code>SELinux</code>功能</h3><p><code>SELinux(Security-Enhanced Linux)</code> 是美国国家安全局（<code>NSA</code>）对于强制访问控制的实现，这个功能管理员又爱又恨，大多数生产环境也是关闭的做法，安全手段使用其他方法。</p><p>大多数<code>ssh</code>连接不上虚拟机，都是因为防火墙和<code>selinux</code>阻挡了</p><p>永久关闭方式：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.修改配置文件，永久生效关闭selinux</span><br><span class="line"><span class="built_in">cp</span> /etc/selinux/config /etc/selinux/config.bak <span class="comment">#修改前备份</span></span><br><span class="line"><span class="number">2</span>.修改方式可以vim编辑,找到</span><br><span class="line"><span class="comment"># This file controls the state of SELinux on the system.</span></span><br><span class="line"><span class="comment"># SELINUX= can take one of these three values:</span></span><br><span class="line"><span class="comment">#     enforcing - SELinux security policy is enforced.</span></span><br><span class="line"><span class="comment">#     permissive - SELinux prints warnings instead of enforcing.</span></span><br><span class="line"><span class="comment">#     disabled - No SELinux policy is loaded.</span></span><br><span class="line">SELINUX=disabled</span><br><span class="line"><span class="number">3</span>.用sed替换</span><br><span class="line">sed <span class="literal">-i</span> <span class="string">&#x27;s/SELINUX=enforcing/SELINUX=disabled/&#x27;</span> /etc/selinux/config</span><br><span class="line"><span class="number">4</span>.检查状态</span><br><span class="line">grep <span class="string">&quot;SELINUX=disabled&quot;</span> /etc/selinux/config</span><br><span class="line"><span class="comment">#出现结果即表示修改成功</span></span><br></pre></td></tr></table></figure><p>临时关闭<code>selinux</code>(命令行修改，重启失效)：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">getenforce <span class="comment">#获取selinux状态</span></span><br><span class="line"><span class="comment">#修改selinux状态</span></span><br><span class="line">setenforce </span><br><span class="line">usage:  setenforce [ <span class="type">Enforcing</span> | <span class="type">Permissive</span> | <span class="number">1</span> | <span class="number">0</span> ]</span><br><span class="line">数字<span class="number">0</span> 表示permissive，给出警告，不会阻止，等同disabled</span><br><span class="line">数字<span class="number">1</span>表示enforcing，表示开启</span><br></pre></td></tr></table></figure><p>Tip:</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">修改selinux配置后，想要生效还得重启系统，技巧就是（修改配置文件+命令行修改，达到立即生效）</span><br><span class="line"></span><br><span class="line">生产环境的服务器是禁止随意重启的！！！！</span><br></pre></td></tr></table></figure><h3 id="iptables防火墙"><a href="#iptables防火墙" class="headerlink" title="iptables防火墙"></a><code>iptables</code>防火墙</h3><p>在学习阶段，关闭防火墙可以更方便的学习，在企业环境中，一般只有配置外网<code>ip</code>的<code>linux</code>服务器才会开启防火墙，但是对于高并发流量的业务服务器仍然是不能开启的，会有很大性能损失，因此需要更<code>nb</code>的硬件防火墙。</p><p>关闭防火墙具体操作如下：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">centos7默认已经使用firewall作为防火墙了</span><br><span class="line"><span class="number">1</span>.关闭防火墙</span><br><span class="line">systemctl status firewalld <span class="comment">#查看防火墙状态</span></span><br><span class="line">systemctl stop firewalld    <span class="comment">#关闭防火墙</span></span><br><span class="line">systemctl disable firewalld<span class="comment">#关闭防火墙开机启动systemctl is-enabled firewalld.service#检查防火墙是否启动</span></span><br><span class="line"> </span><br></pre></td></tr></table></figure><h3 id="Linux中文显示设置（防止中文乱码）"><a href="#Linux中文显示设置（防止中文乱码）" class="headerlink" title="Linux中文显示设置（防止中文乱码）"></a><code>Linux</code>中文显示设置（防止中文乱码）</h3><p>此项优化为可选项，根据个人情况选择是否调整<code>Linux</code>系统的字符集，字符集就是一套文字符号以及编码。</p><p><code>Linux</code>下常用字符集有：</p><ul><li><code>GBK</code>　　实际企业应用较少</li><li><code>UTF-8</code>　　广泛支持，<code>MYSQL</code>也使用<code>UTF-8</code>，企业广泛使用</li></ul><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看系统当前字符集echo $LANGlocale#检查xshell crt的字符集#命令修改字符集</span></span><br><span class="line"><span class="comment"># vim /etc/profile.d/locale.sh</span></span><br><span class="line">export LC_CTYPE=zh_CN.UTF<span class="literal">-8</span></span><br><span class="line">export LC_ALL=zh_CN.UTF<span class="literal">-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/locale.conf</span></span><br><span class="line">LANG=zh_CN.UTF<span class="literal">-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/sysconfig/i18n</span></span><br><span class="line">LANG=zh_CN.UTF<span class="literal">-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/environment</span></span><br><span class="line">LANG=zh_CN.UTF<span class="literal">-8</span></span><br><span class="line">LC_ALL=zh_CN.UTF<span class="literal">-8</span></span><br></pre></td></tr></table></figure><p>英文版本</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vim /etc/profile.d/locale.sh</span></span><br><span class="line">export LC_CTYPE=en_US.UTF<span class="literal">-8</span></span><br><span class="line">export LC_ALL=en_US.UTF<span class="literal">-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/locale.conf</span></span><br><span class="line">LANG=en_US.UTF<span class="literal">-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/sysconfig/i18n</span></span><br><span class="line">LANG=en_US.UTF<span class="literal">-8</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># vim /etc/environment</span></span><br><span class="line">LANG=en_US.UTF<span class="literal">-8</span></span><br><span class="line">LC_ALL=en_US.UTF<span class="literal">-8</span></span><br><span class="line"> </span><br><span class="line"><span class="number">2</span>.更改后查看系统语言变量locale</span><br></pre></td></tr></table></figure><p>乱码核心解决办法</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>.系统字符集utf8</span><br><span class="line"><span class="number">2</span>.xshell字符集utf8</span><br><span class="line"><span class="number">3</span>.文件字符集一致zh_CN.UTF<span class="literal">-8</span></span><br></pre></td></tr></table></figure><h3 id="df命令"><a href="#df命令" class="headerlink" title="df命令"></a><code>df</code>命令</h3><p><strong><code>df</code>命令</strong>用于显示磁盘分区上的可使用的磁盘空间。默认显示单位为<code>KB</code>。可以利用该命令来获取硬盘被占用了多少空间，目前还剩下多少空间等信息。</p><h4 id="语法-18"><a href="#语法-18" class="headerlink" title="语法"></a>语法</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">df(选项)(参数)</span><br></pre></td></tr></table></figure><h4 id="选项-14"><a href="#选项-14" class="headerlink" title="选项"></a>选项</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-a</span>或-<span class="literal">-all</span>：包含全部的文件系统；</span><br><span class="line">-<span class="literal">-block</span><span class="literal">-size</span>=&lt;区块大小&gt;：以指定的区块大小来显示区块数目；</span><br><span class="line"><span class="literal">-h</span>或-<span class="literal">-human</span><span class="literal">-readable</span>：以可读性较高的方式来显示信息；</span><br><span class="line"><span class="literal">-H</span>或-<span class="literal">-si</span>：与<span class="literal">-h</span>参数相同，但在计算时是以<span class="number">1000</span> Bytes为换算单位而非<span class="number">1024</span> Bytes；</span><br><span class="line"><span class="literal">-i</span>或-<span class="literal">-inodes</span>：显示inode的信息；</span><br><span class="line"><span class="literal">-k</span>或-<span class="literal">-kilobytes</span>：指定区块大小为<span class="number">1024</span>字节；</span><br><span class="line"><span class="literal">-l</span>或-<span class="literal">-local</span>：仅显示本地端的文件系统；</span><br><span class="line"><span class="literal">-m</span>或-<span class="literal">-megabytes</span>：指定区块大小为<span class="number">1048576</span>字节；</span><br><span class="line">-<span class="literal">-no</span><span class="literal">-sync</span>：在取得磁盘使用信息前，不要执行sync指令，此为预设值；</span><br><span class="line"><span class="literal">-P</span>或-<span class="literal">-portability</span>：使用POSIX的输出格式；</span><br><span class="line">-<span class="literal">-sync</span>：在取得磁盘使用信息前，先执行sync指令；</span><br><span class="line"><span class="literal">-t</span>&lt;文件系统类型&gt;或-<span class="literal">-type</span>=&lt;文件系统类型&gt;：仅显示指定文件系统类型的磁盘信息；</span><br><span class="line"><span class="literal">-T</span>或-<span class="literal">-print</span><span class="literal">-type</span>：显示文件系统的类型；</span><br><span class="line"><span class="literal">-x</span>&lt;文件系统类型&gt;或-<span class="literal">-exclude</span><span class="literal">-type</span>=&lt;文件系统类型&gt;：不要显示指定文件系统类型的磁盘信息；</span><br><span class="line">-<span class="literal">-help</span>：显示帮助；</span><br><span class="line">-<span class="literal">-version</span>：显示版本信息。</span><br></pre></td></tr></table></figure><h4 id="参数-15"><a href="#参数-15" class="headerlink" title="参数"></a>参数</h4><p>文件：指定文件系统上的文件。</p><h4 id="实例-16"><a href="#实例-16" class="headerlink" title="实例"></a>实例</h4><p>查看系统磁盘设备，默认是<code>KB</code>为单位：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">LinServ</span>-<span class="number">1</span> ~]<span class="comment"># df</span></span><br><span class="line">文件系统               <span class="number">1</span>K-块        已用     可用 已用% 挂载点</span><br><span class="line">/dev/sda2            <span class="number">146294492</span>  <span class="number">28244432</span> <span class="number">110498708</span>  <span class="number">21</span>% /</span><br><span class="line">/dev/sda1              <span class="number">1019208</span>     <span class="number">62360</span>    <span class="number">904240</span>   <span class="number">7</span>% /boot</span><br><span class="line">tmpfs                  <span class="number">1032204</span>         <span class="number">0</span>   <span class="number">1032204</span>   <span class="number">0</span>% /dev/shm</span><br><span class="line">/dev/sdb1            <span class="number">2884284108</span> <span class="number">218826068</span> <span class="number">2518944764</span>   <span class="number">8</span>% /data1</span><br></pre></td></tr></table></figure><p>使用<code>-h</code>选项以<code>KB</code>以上的单位来显示，可读性高：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">LinServ</span>-<span class="number">1</span> ~]<span class="comment"># df -h</span></span><br><span class="line">文件系统              容量  已用 可用 已用% 挂载点</span><br><span class="line">/dev/sda2             <span class="number">140</span>G   <span class="number">27</span>G  <span class="number">106</span>G  <span class="number">21</span>% /</span><br><span class="line">/dev/sda1             <span class="number">996</span>M   <span class="number">61</span>M  <span class="number">884</span>M   <span class="number">7</span>% /boot</span><br><span class="line">tmpfs                <span class="number">1009</span>M     <span class="number">0</span> <span class="number">1009</span>M   <span class="number">0</span>% /dev/shm</span><br><span class="line">/dev/sdb1             <span class="number">2.7</span>T  <span class="number">209</span>G  <span class="number">2.4</span>T   <span class="number">8</span>% /data1</span><br></pre></td></tr></table></figure><p>查看全部文件系统：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[<span class="type">root</span>@<span class="type">LinServ</span>-<span class="number">1</span> ~]<span class="comment"># df -a</span></span><br><span class="line">文件系统               <span class="number">1</span>K-块        已用     可用 已用% 挂载点</span><br><span class="line">/dev/sda2            <span class="number">146294492</span>  <span class="number">28244432</span> <span class="number">110498708</span>  <span class="number">21</span>% /</span><br><span class="line">proc                         <span class="number">0</span>         <span class="number">0</span>         <span class="number">0</span>   -  /proc</span><br><span class="line">sysfs                        <span class="number">0</span>         <span class="number">0</span>         <span class="number">0</span>   -  /sys</span><br><span class="line">devpts                       <span class="number">0</span>         <span class="number">0</span>         <span class="number">0</span>   -  /dev/pts</span><br><span class="line">/dev/sda1              <span class="number">1019208</span>     <span class="number">62360</span>    <span class="number">904240</span>   <span class="number">7</span>% /boot</span><br><span class="line">tmpfs                  <span class="number">1032204</span>         <span class="number">0</span>   <span class="number">1032204</span>   <span class="number">0</span>% /dev/shm</span><br><span class="line">/dev/sdb1            <span class="number">2884284108</span> <span class="number">218826068</span> <span class="number">2518944764</span>   <span class="number">8</span>% /data1</span><br><span class="line">none                         <span class="number">0</span>         <span class="number">0</span>         <span class="number">0</span>   -  /proc/sys/fs/binfmt_misc</span><br></pre></td></tr></table></figure><h3 id="tree命令"><a href="#tree命令" class="headerlink" title="tree命令"></a><code>tree</code>命令</h3><p><strong><code>tree</code>命令</strong>以树状图列出目录的内容。</p><h4 id="语法-19"><a href="#语法-19" class="headerlink" title="语法"></a>语法</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tree(选项)(参数)</span><br></pre></td></tr></table></figure><h4 id="选项-15"><a href="#选项-15" class="headerlink" title="选项"></a>选项</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-a</span>：显示所有文件和目录；</span><br><span class="line"><span class="literal">-A</span>：使用ASNI绘图字符显示树状图而非以ASCII字符组合；</span><br><span class="line"><span class="literal">-C</span>：在文件和目录清单加上色彩，便于区分各种类型；</span><br><span class="line"><span class="literal">-d</span>：先是目录名称而非内容；</span><br><span class="line"><span class="literal">-D</span>：列出文件或目录的更改时间；</span><br><span class="line"><span class="operator">-f</span>：在每个文件或目录之前，显示完整的相对路径名称；</span><br><span class="line"><span class="operator">-F</span>：在执行文件，目录，Socket，符号连接，管道名称名称，各自加上<span class="string">&quot;*&quot;</span>，<span class="string">&quot;/&quot;</span>，<span class="string">&quot;@&quot;</span>，<span class="string">&quot;|&quot;</span>号；</span><br><span class="line"><span class="literal">-g</span>：列出文件或目录的所属群组名称，没有对应的名称时，则显示群组识别码；</span><br><span class="line"><span class="literal">-i</span>：不以阶梯状列出文件和目录名称；</span><br><span class="line"><span class="literal">-l</span>：&lt;范本样式&gt; 不显示符号范本样式的文件或目录名称；</span><br><span class="line"><span class="literal">-l</span>：如遇到性质为符号连接的目录，直接列出该连接所指向的原始目录；</span><br><span class="line"><span class="literal">-n</span>：不在文件和目录清单加上色彩；</span><br><span class="line"><span class="literal">-N</span>：直接列出文件和目录名称，包括控制字符；</span><br><span class="line"><span class="literal">-p</span>：列出权限标示；</span><br><span class="line"><span class="literal">-P</span>：&lt;范本样式&gt; 只显示符合范本样式的文件和目录名称；</span><br><span class="line"><span class="literal">-q</span>：用“？”号取代控制字符，列出文件和目录名称；</span><br><span class="line"><span class="literal">-s</span>：列出文件和目录大小；</span><br><span class="line"><span class="literal">-t</span>：用文件和目录的更改时间排序；</span><br><span class="line"><span class="literal">-u</span>：列出文件或目录的拥有者名称，没有对应的名称时，则显示用户识别码；</span><br><span class="line"><span class="literal">-x</span>：将范围局限在现行的文件系统中，若指定目录下的某些子目录，其存放于另一个文件系统上，则将该目录予以排除在寻找范围外。</span><br></pre></td></tr></table></figure><h4 id="参数-16"><a href="#参数-16" class="headerlink" title="参数"></a>参数</h4><p>目录：执行<code>tree</code>指令，它会列出指定目录下的所有文件，包括子目录里的文件。</p><h3 id="设置主机名"><a href="#设置主机名" class="headerlink" title="设置主机名"></a>设置主机名</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前主机名</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/test<span class="comment"># hostname</span></span><br><span class="line">tony<span class="literal">-PC</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置主机名</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/test<span class="comment"># hostnamectl set-hostname Tony-PC</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/test<span class="comment"># hostname</span></span><br><span class="line">Tony<span class="literal">-PC</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h3 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a><code>DNS</code></h3><p><code>DNS</code>（<code>Domain Name System</code>，域名系统），万维网上作为域名和<code>IP</code>地址相互映射的一个分布式数据库，能够使用户更方便的访问互联网，而不用去记住能够被机器直接读取的<code>IP</code>数串。<br>通过域名，最终得到该域名对应的<code>IP</code>地址的过程叫做域名解析（或主机名解析）。</p><h4 id="查看Linux的dns，唯一配置文件"><a href="#查看Linux的dns，唯一配置文件" class="headerlink" title="查看Linux的dns，唯一配置文件"></a>查看<code>Linux</code>的<code>dns</code>，唯一配置文件</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">配置文件</span><br><span class="line"><span class="built_in">cat</span> /etc/resolv.conf</span><br><span class="line"><span class="comment">#dns服务器地址</span></span><br><span class="line">nameserver <span class="number">10.10</span>.<span class="number">10.254</span></span><br><span class="line">nameserver <span class="number">114.114</span>.<span class="number">114.114</span></span><br></pre></td></tr></table></figure><h4 id="本地强制dns解析文件-etc-hosts"><a href="#本地强制dns解析文件-etc-hosts" class="headerlink" title="本地强制dns解析文件/etc/hosts"></a>本地强制<code>dns</code>解析文件<code>/etc/hosts</code></h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">指定本地解析：</span><br><span class="line">/etc/hosts</span><br><span class="line">主机IP    主机名    主机别名</span><br><span class="line"><span class="number">127.0</span>.<span class="number">0.1</span>        www.pyyuc.cn        </span><br></pre></td></tr></table></figure><h3 id="nslookup命令"><a href="#nslookup命令" class="headerlink" title="nslookup命令"></a><code>nslookup</code>命令</h3><p><strong><code>nslookup</code>命令</strong>是常用域名查询工具，就是查<code>DNS</code>信息用的命令。</p><p><code>nslookup4</code>有两种工作模式，即“交互模式”和“非交互模式”。在“交互模式”下，用户可以向域名服务器查询各类主机、域名的信息，或者输出域名中的主机列表。而在“非交互模式”下，用户可以针对一个主机或域名仅仅获取特定的名称或所需信息。</p><p>进入交互模式，直接输入<code>nslookup</code>命令，不加任何参数，则直接进入交互模式，此时<code>nslookup</code>会连接到默认的域名服务器（即<code>/etc/resolv.conf</code>的第一个<code>dns</code>地址）。或者输入<code>nslookup -nameserver/ip</code>。进入非交互模式，就直接输入<code>nslookup 域名</code>就可以了。</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#解析</span></span><br><span class="line">nslookup www.oldboyedu.com</span><br></pre></td></tr></table></figure><h3 id="计划任务crond服务"><a href="#计划任务crond服务" class="headerlink" title="计划任务crond服务"></a>计划任务<code>crond</code>服务</h3><p><strong><code>crontab</code>命令</strong>被用来提交和管理用户的需要周期性执行的任务，与<code>windows</code>下的计划任务类似，当安装完成操作系统后，默认会安装此服务工具，并且会自动启动<code>crond</code>进程，<code>crond</code>进程每分钟会定期检查是否有要执行的任务，如果有要执行的任务，则自动执行该任务。</p><h4 id="语法-20"><a href="#语法-20" class="headerlink" title="语法"></a>语法</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">crontab(选项)(参数)</span><br></pre></td></tr></table></figure><h4 id="选项-16"><a href="#选项-16" class="headerlink" title="选项"></a>选项</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="literal">-e</span>：编辑该用户的计时器设置；</span><br><span class="line"><span class="literal">-l</span>：列出该用户的计时器设置；</span><br><span class="line"><span class="literal">-r</span>：删除该用户的计时器设置；</span><br><span class="line"><span class="literal">-u</span>&lt;用户名称&gt;：指定要设定计时器的用户名称。</span><br></pre></td></tr></table></figure><h4 id="参数-17"><a href="#参数-17" class="headerlink" title="参数"></a>参数</h4><p><code>crontab</code>文件：指定包含待执行任务的<code>crontab</code>文件。</p><p><img data-src="https://raw.githubusercontent.com/tonyu2019/PicGo/master/20190807160644.png"></p><h4 id="知识扩展-1"><a href="#知识扩展-1" class="headerlink" title="知识扩展"></a>知识扩展</h4><p><code>Linux</code>下的任务调度分为两类：<strong>系统任务调度</strong>和<strong>用户任务调度</strong>。</p><p><strong>系统任务调度：</strong>系统周期性所要执行的工作，比如写缓存数据到硬盘、日志清理等。在<code>/etc</code>目录下有一个<code>crontab</code>文件，这个就是系统任务调度的配置文件。</p><p><code>/etc/crontab</code>文件包括下面几行：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SHELL=/bin/bash</span><br><span class="line">PATH=/sbin:/bin:/usr/sbin:/usr/bin</span><br><span class="line">MAILTO=<span class="string">&quot;&quot;</span>HOME=/</span><br><span class="line"></span><br><span class="line"><span class="comment"># run-parts</span></span><br><span class="line"><span class="number">51</span> * * * * root run<span class="literal">-parts</span> /etc/cron.hourly</span><br><span class="line"><span class="number">24</span> <span class="number">7</span> * * * root run<span class="literal">-parts</span> /etc/cron.daily</span><br><span class="line"><span class="number">22</span> <span class="number">4</span> * * <span class="number">0</span> root run<span class="literal">-parts</span> /etc/cron.weekly</span><br><span class="line"><span class="number">42</span> <span class="number">4</span> <span class="number">1</span> * * root run<span class="literal">-parts</span> /etc/cron.monthly</span><br></pre></td></tr></table></figure><blockquote><p>注意：</p><ol><li><p>查看计划任务的执行：<code>tail -f /var/log/cron</code></p></li><li><p>写计划任务时，命令必须加上绝对路径，否则会出现这种情况：从日志中看，确实触发了计划任务的执行，但是命令却没有执行成功，比如<code>* * * * * reboot</code>就会出现这种情况，需要将<code>reboot</code>写成<code>/usr/sbin/reboot</code></p></li><li><p>计划任务执行的命令 是否存在，软件是否安装</p></li><li><p>确保<code>crontab</code>服务运行</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl status cron</span><br><span class="line"></span><br><span class="line">ps -ef|grep crond</span><br></pre></td></tr></table></figure></li><li><p>检测<code>crontab</code>是否开机启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">systemctl is-enabled crond</span><br></pre></td></tr></table></figure></li><li><p>所有命令一定要用绝对路径来写！</p></li></ol></blockquote><p>前四行是用来配置<code>crond</code>任务运行的环境变量，第一行<code>SHELL</code>变量指定了系统要使用哪个<code>shell</code>，这里是<code>bash</code>，第二行<code>PATH</code>变量指定了系统执行命令的路径，第三行<code>MAILTO</code>变量指定了<code>crond</code>的任务执行信息将通过电子邮件发送给<code>root</code>用户，如果<code>MAILTO</code>变量的值为空，则表示不发送任务执行信息给用户，第四行的HOME变量指定了在执行命令或者脚本时使用的主目录。</p><p><strong>用户任务调度：</strong>用户定期要执行的工作，比如用户数据备份、定时邮件提醒等。用户可以使用 <code>crontab</code> 工具来定制自己的计划任务。所有用户定义的<code>crontab</code>文件都被保存在<code>/var/spool/cron</code>目录中。其文件名与用户名一致，使用者权限文件如下：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/etc/cron.deny     该文件中所列用户不允许使用crontab命令</span><br><span class="line">/etc/cron.allow    该文件中所列用户允许使用crontab命令</span><br><span class="line">/var/spool/cron/   所有用户crontab文件存放的目录,以用户名命名</span><br></pre></td></tr></table></figure><p><code>crontab</code>文件的含义：用户所建立的<code>crontab</code>文件中，每一行都代表一项任务，每行的每个字段代表一项设置，它的格式共分为六个字段，前五段是时间设定段，第六段是要执行的命令段，格式如下：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">minute   hour   day   month   week   command     顺序：分 时 日 月 周</span><br></pre></td></tr></table></figure><p>其中：</p><ul><li><code>minute</code>： 表示分钟，可以是从0到59之间的任何整数。</li><li><code>hour</code>：表示小时，可以是从0到23之间的任何整数。</li><li><code>day</code>：表示日期，可以是从1到31之间的任何整数。</li><li><code>month</code>：表示月份，可以是从1到12之间的任何整数。</li><li><code>week</code>：表示星期几，可以是从0到7之间的任何整数，这里的0或7代表星期日。</li><li><code>command</code>：要执行的命令，可以是系统命令，也可以是自己编写的脚本文件。</li></ul><p>在以上各个字段中，还可以使用以下特殊字符：</p><ul><li>星号（*）：代表所有可能的值，例如month字段如果是星号，则表示在满足其它字段的制约条件后每月都执行该命令操作。</li><li>逗号（,）：可以用逗号隔开的值指定一个列表范围，例如，“1,2,5,7,8,9”</li><li>中杠（-）：可以用整数之间的中杠表示一个整数范围，例如“2-6”表示“2,3,4,5,6”</li><li>正斜线（/）：可以用正斜线指定时间的间隔频率，例如“0-23/2”表示每两小时执行一次。同时正斜线可以和星号一起使用，例如*/10，如果用在<code>minute</code>字段，表示每十分钟执行一次。</li></ul><p><strong>crond服务</strong></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/sbin/service crond <span class="built_in">start</span>    //启动服务</span><br><span class="line">/sbin/service crond stop     //关闭服务</span><br><span class="line">/sbin/service crond restart  //重启服务</span><br><span class="line">/sbin/service crond reload   //重新载入配置</span><br></pre></td></tr></table></figure><p>查看<code>crontab</code>服务状态：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service crond status</span><br></pre></td></tr></table></figure><p>手动启动<code>crontab</code>服务：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service crond <span class="built_in">start</span></span><br></pre></td></tr></table></figure><p>查看<code>crontab</code>服务是否已设置为开机启动，执行命令：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ntsysv</span><br></pre></td></tr></table></figure><p>加入开机自动启动：</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chkconfig –level <span class="number">35</span> crond on</span><br></pre></td></tr></table></figure><h4 id="实例-17"><a href="#实例-17" class="headerlink" title="实例"></a>实例</h4><p>每1分钟执行一次<code>command</code></p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* * * * * command</span><br></pre></td></tr></table></figure><p>每小时的第3和第15分钟执行</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>,<span class="number">15</span> * * * * command</span><br></pre></td></tr></table></figure><p>在上午8点到11点的第3和第15分钟执行</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>,<span class="number">15</span> <span class="number">8</span><span class="literal">-11</span> * * * command</span><br></pre></td></tr></table></figure><p>每隔两天的上午8点到11点的第3和第15分钟执行</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>,<span class="number">15</span> <span class="number">8</span><span class="literal">-11</span> */<span class="number">2</span> * * command</span><br></pre></td></tr></table></figure><p>每个星期一的上午8点到11点的第3和第15分钟执行</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">3</span>,<span class="number">15</span> <span class="number">8</span><span class="literal">-11</span> * * <span class="number">1</span> command</span><br></pre></td></tr></table></figure><p>每晚的21:30重启smb</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">30</span> <span class="number">21</span> * * * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure><p>每月1、10、22日的4 : 45重启smb</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">45</span> <span class="number">4</span> <span class="number">1</span>,<span class="number">10</span>,<span class="number">22</span> * * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure><p>每周六、周日的1:10重启smb</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">10</span> <span class="number">1</span> * * <span class="number">6</span>,<span class="number">0</span> /etc/init.d/smb restart</span><br></pre></td></tr></table></figure><p>每天18 : 00至23 : 00之间每隔30分钟重启smb</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span>,<span class="number">30</span> <span class="number">18</span><span class="literal">-23</span> * * * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure><p>每星期六的晚上11:00 pm重启smb</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="number">23</span> * * <span class="number">6</span> /etc/init.d/smb restart</span><br></pre></td></tr></table></figure><p>每一小时重启smb</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* */<span class="number">1</span> * * * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure><p>晚上11点到早上7点之间，每隔一小时重启smb</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">* <span class="number">23</span><span class="literal">-7</span>/<span class="number">1</span> * * * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure><p>每月的4号与每周一到周三的11点重启smb</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="number">11</span> <span class="number">4</span> * mon<span class="literal">-wed</span> /etc/init.d/smb restart</span><br></pre></td></tr></table></figure><p>一月一号的4点重启smb</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">0</span> <span class="number">4</span> <span class="number">1</span> jan * /etc/init.d/smb restart</span><br></pre></td></tr></table></figure><p>每小时执行<code>/etc/cron.hourly</code>目录内的脚本</p><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">01</span> * * * * root run<span class="literal">-parts</span> /etc/cron.hourly</span><br></pre></td></tr></table></figure><h3 id="必须掌握的-etc下的linux目录知识"><a href="#必须掌握的-etc下的linux目录知识" class="headerlink" title="必须掌握的/etc下的linux目录知识"></a>必须掌握的<code>/etc</code>下的<code>linux</code>目录知识</h3><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">/etc：</span><br><span class="line">这个目录用来存放所有的系统管理所需要的配置文件和子目录。</span><br><span class="line">复制代码</span><br><span class="line"><span class="comment">#网卡配置文件</span></span><br><span class="line">/etc/sysconfig/network<span class="literal">-script</span>/ifcfg<span class="literal">-eth0</span></span><br><span class="line"><span class="comment">#修改机器名以及网卡，网管等配置</span></span><br><span class="line">/etc/sysconfig/network</span><br><span class="line"><span class="comment">#linux的dns客户端配置文件，实现域名和ip的互相解析</span></span><br><span class="line">/etc/resolv.conf</span><br><span class="line"><span class="comment">#本地dns解析文件,设定ip和域名的对应解析,开发测试最常用的临时域名解析</span></span><br><span class="line">/etc/hosts/</span><br><span class="line"><span class="comment">#系统全局环境变量永久生效的配置文件,如PATH等</span></span><br><span class="line">/etc/profile</span><br><span class="line"><span class="comment">#用户的环境变量</span></span><br><span class="line">~/.bash_profile </span><br><span class="line">~/.bashrc</span><br><span class="line"><span class="comment">#存放可执行程序的目录，大多是系统管理命令</span></span><br><span class="line">/usr/sbin</span><br><span class="line"><span class="comment">#存放用户自编译安装软件的目录  &gt; 等同于C:\Program files （windows）</span></span><br><span class="line">/usr/local</span><br><span class="line"><span class="comment">#关于处理器的信息,还可以top指令查看</span></span><br><span class="line">/proc/cpuinfo</span><br><span class="line"><span class="comment">#查看内存信息，还可以free -m</span></span><br><span class="line">/proc/meminfo </span><br></pre></td></tr></table></figure><h3 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h3><p>添加环境变量的方式有两种，下面以<code>/opt/php7.2</code>为例进行说明</p><h4 id="加入-PATH"><a href="#加入-PATH" class="headerlink" title="加入$PATH"></a>加入$PATH</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看当前环境变量</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/aaa<span class="comment"># echo $PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span><br><span class="line"><span class="comment"># 使用$PATH变量赋值只是临时生效，重启无效，因此要写入文件</span></span><br><span class="line"><span class="comment"># 编辑个人全局配置文件</span></span><br><span class="line">vim /etc/profile</span><br><span class="line"><span class="comment"># 写入环境变量</span></span><br><span class="line">PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/opt/php7.<span class="number">2</span></span><br><span class="line"><span class="comment"># 保存退出</span></span><br><span class="line"><span class="comment"># 重新读取加载/etc/profile使其生效</span></span><br><span class="line">source /etc/profile</span><br><span class="line"><span class="comment">#以上即可完成php7.2环境变量的添加</span></span><br></pre></td></tr></table></figure><h4 id="使用软连接"><a href="#使用软连接" class="headerlink" title="使用软连接"></a>使用软连接</h4><figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看环境变量</span></span><br><span class="line">root@tony<span class="literal">-PC</span>:/tmp/aaa<span class="comment"># echo $PATH</span></span><br><span class="line">/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 进入以上目录可以发现，这些目录中很多都是软连接</span></span><br><span class="line">如：lrwxrwxrwx <span class="number">1</span> root root <span class="number">9</span> <span class="number">2</span>月  <span class="number">23</span> <span class="number">01</span>:<span class="number">32</span> /usr/bin/python -&gt; python2.<span class="number">7</span></span><br><span class="line">我们可以看到 /usr/bin/python软连接实际指向的是ptyhon2.<span class="number">7</span>解释器，如果把需要的软件软连接都放入/usr/bin等于自动把该软件加入到了环境变量</span><br><span class="line"></span><br><span class="line">法创建软连接，将软连接放入已加入环境变量的目录中</span><br><span class="line">ln <span class="literal">-s</span> /opt/php7.<span class="number">2</span>/php /usr/bin/php7.<span class="number">2</span></span><br></pre></td></tr></table></figure></div><div class="popular-posts-header">相关文章</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="/a826c44f.html" rel="bookmark">Linux定时任务请求一个链接</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/4d5eadba.html" rel="bookmark">python异步任务调度工具之Celery</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/aff6f399.html" rel="bookmark">python 网络编程三(网络基础)</a></div></li></ul><footer class="post-footer"><div class="reward-container"><div>打赏个鸡腿</div><button onclick='document.querySelector(".post-reward").classList.toggle("active")'>赞赏</button><div class="post-reward"><div><img src="/images/wechatpay.jpg" alt="托小尼 微信"> <span>微信</span></div><div><img src="/images/alipay.jpg" alt="托小尼 支付宝"> <span>支付宝</span></div></div></div><div class="post-tags"><a href="/tags/%E5%AE%9A%E6%97%B6%E4%BB%BB%E5%8A%A1/" rel="tag"><i class="fa fa-tag"></i> 定时任务</a> <a href="/tags/ip/" rel="tag"><i class="fa fa-tag"></i> ip</a> <a href="/tags/Linux%E5%91%BD%E4%BB%A4/" rel="tag"><i class="fa fa-tag"></i> Linux命令</a> <a href="/tags/ifconfig/" rel="tag"><i class="fa fa-tag"></i> ifconfig</a> <a href="/tags/ifup/" rel="tag"><i class="fa fa-tag"></i> ifup</a> <a href="/tags/ifdown/" rel="tag"><i class="fa fa-tag"></i> ifdown</a> <a href="/tags/xshell/" rel="tag"><i class="fa fa-tag"></i> xshell</a> <a href="/tags/%E6%B7%BB%E5%8A%A0%E7%94%A8%E6%88%B7/" rel="tag"><i class="fa fa-tag"></i> 添加用户</a> <a href="/tags/%E5%88%87%E6%8D%A2%E7%94%A8%E6%88%B7/" rel="tag"><i class="fa fa-tag"></i> 切换用户</a> <a href="/tags/useradd/" rel="tag"><i class="fa fa-tag"></i> useradd</a> <a href="/tags/groupadd/" rel="tag"><i class="fa fa-tag"></i> groupadd</a> <a href="/tags/userdel/" rel="tag"><i class="fa fa-tag"></i> userdel</a> <a href="/tags/%E8%BD%AF%E8%BF%9E%E6%8E%A5/" rel="tag"><i class="fa fa-tag"></i> 软连接</a></div><div class="post-nav"><div class="post-nav-item"><a href="/92eead7e.html" rel="prev" title="Linux shell 基本命令"><i class="fa fa-chevron-left"></i> Linux shell 基本命令</a></div><div class="post-nav-item"><a href="/513fdd7f.html" rel="next" title="Linux中yum和apt-get">Linux中yum和apt-get <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="comments"><div id="SOHUCS"></div></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><span class="exturl" data-url="aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbg==">豫ICP备17028303号-1 </span><img src="http://www.beian.gov.cn/portal/download" style="display:inline-block"><span class="exturl" data-url="aHR0cDovL3d3dy5iZWlhbi5nb3YuY24vcG9ydGFsL3JlZ2lzdGVyU3lzdGVtSW5mbz9yZWNvcmRjb2RlPTE3MDI4MzAz">豫公网安备 41102402000095号</span></div><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Tony Yu</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="站点总字数">1.2m</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">17:26</span></span></div></div></footer><script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1.15.0/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>NexT.utils.loadComments('#SOHUCS', () => {
    NexT.utils.getScript('https://changyan.sohu.com/upload/changyan.js', () => {
      window.changyan.api.config({
        appid: 'cyu11Umgd',
        conf : '0f296687f6a61e82028fd7c6ddf32ab9'
      });
    });
  });</script><script src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script></body></html>