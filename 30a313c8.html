<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 5.1.1"><link rel="apple-touch-icon" sizes="180x180" href="/images/56x56logo.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/56x56logo.png"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico"><link rel="mask-icon" href="/images/400x400logo.png" color="#222"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.14.0/css/all.min.css"><link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css"><script class="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:"www.diandian100.cn",root:"/",scheme:"Gemini",version:"8.0.0",exturl:!0,sidebar:{position:"left",display:"always",padding:18,offset:12},copycode:!0,bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!0,lazyload:!0,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"fadeInDown",post_body:"fadeInDown",coll_header:"fadeInLeft",sidebar:"fadeInUp"}},prism:!1,i18n:{placeholder:"搜索...",empty:"没有找到任何搜索结果：${query}",hits_time:"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）",hits:"找到 ${hits} 个搜索结果"},path:"search.xml",localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1}}</script><meta name="description" content="身份验证或身份识别本身通常不足以获取信息或代码的访问权限。因此，请求访问的实体必须具有授权；权限控制可以限制用户对于视图的访问和对于具体数据对象的访问。"><meta property="og:type" content="article"><meta property="og:title" content="手摸手，带你用Django REST Framework撸接口系列七(权限篇)"><meta property="og:url" content="https://www.diandian100.cn/30a313c8.html"><meta property="og:site_name" content="点点开发技术分享"><meta property="og:description" content="身份验证或身份识别本身通常不足以获取信息或代码的访问权限。因此，请求访问的实体必须具有授权；权限控制可以限制用户对于视图的访问和对于具体数据对象的访问。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://img.diandian100.cn/20210325131557.png"><meta property="og:image" content="https://img.diandian100.cn/20210325131707.png"><meta property="og:image" content="https://img.diandian100.cn/20210325133027.png"><meta property="og:image" content="https://img.diandian100.cn/20210325133306.png"><meta property="article:published_time" content="2021-03-25T03:12:52.000Z"><meta property="article:modified_time" content="2021-03-25T08:01:07.000Z"><meta property="article:author" content="托小尼"><meta property="article:tag" content="权限"><meta property="article:tag" content="认证"><meta property="article:tag" content="频率"><meta property="article:tag" content="Django REST Framework系列"><meta property="article:tag" content="分页"><meta property="article:tag" content="django"><meta property="article:tag" content="排序"><meta property="article:tag" content="通用视图"><meta property="article:tag" content="rest"><meta property="article:tag" content="restframework"><meta property="article:tag" content="rest_framework"><meta property="article:tag" content="djangorestframework"><meta property="article:tag" content="前后端分离"><meta property="article:tag" content="前后端不分离"><meta property="article:tag" content="restful"><meta property="article:tag" content="序列化"><meta property="article:tag" content="反序列化"><meta property="article:tag" content="serializer"><meta property="article:tag" content="序列化器"><meta property="article:tag" content="视图"><meta property="article:tag" content="响应器"><meta property="article:tag" content="路由组件"><meta property="article:tag" content="限流"><meta property="article:tag" content="过滤"><meta property="article:tag" content="异常处理"><meta property="article:tag" content="生成接口"><meta property="article:tag" content="drf视图"><meta property="article:tag" content="视图集"><meta property="article:tag" content="mixins"><meta property="article:tag" content="ModelViewSet"><meta property="article:tag" content="GenericAPIView"><meta property="article:tag" content="drf请求"><meta property="article:tag" content="drf响应"><meta property="article:tag" content="IsAdminUser"><meta property="article:tag" content="AllowAny"><meta property="article:tag" content="IsAuthenticatedOrReadOnly"><meta property="article:tag" content="设置权限"><meta property="article:tag" content="自定义权限"><meta property="article:tag" content="has_object_permission"><meta property="article:tag" content="has_permission"><meta property="article:tag" content="视图级权限"><meta property="article:tag" content="对象级权限"><meta property="article:tag" content="实例级权限"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://img.diandian100.cn/20210325131557.png"><link rel="canonical" href="https://www.diandian100.cn/30a313c8.html"><script class="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0,lang:"zh-CN"}</script><title>手摸手，带你用Django REST Framework撸接口系列七(权限篇) | 点点开发技术分享</title><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?3b57832214417f66931e694d19fd60b9";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><noscript><style>body{margin-top:2rem}.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header,.use-motion .sidebar{visibility:visible}.use-motion .footer,.use-motion .header,.use-motion .site-brand-container .toggle{opacity:initial}.use-motion .custom-logo-image,.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line{transform:scaleX(1)}.search-pop-overlay,.sidebar-nav{display:none}.sidebar-panel{display:block}</style></noscript></head><body itemscope itemtype="http://schema.org/WebPage" class="use-motion"><div class="headband"></div><main class="main"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-nav-toggle"><div class="toggle" aria-label="切换导航栏"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div></div><div class="site-meta"><a href="/" class="brand" rel="start"><i class="logo-line"></i><h1 class="site-title">点点开发技术分享</h1><i class="logo-line"></i></a><p class="site-subtitle" itemprop="description">记录个人日常开发笔记与技巧</p></div><div class="site-nav-right"><div class="toggle popup-trigger"><i class="fa fa-search fa-fw fa-lg"></i></div></div></div><nav class="site-nav"><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a></li><li class="menu-item menu-item-development"><a href="/categories/rd/" rel="section"><i class="fa fa-code fa-fw"></i>开发</a></li><li class="menu-item menu-item-frontend"><a href="/categories/fe/" rel="section"><i class="fab fa-html5 fa-fw"></i>前端</a></li><li class="menu-item menu-item-database"><a href="/categories/db/" rel="section"><i class="fa fa-database fa-fw"></i>数据库</a></li><li class="menu-item menu-item-os"><a href="/categories/os/" rel="section"><i class="fab fa-linux fa-fw"></i>系统</a></li><li class="menu-item menu-item-other"><a href="/categories/other/" rel="section"><i class="far fa-paper-plane fa-fw"></i>其他</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索</a></li></ul></nav><div class="search-pop-overlay"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocapitalize="off" maxlength="80" placeholder="搜索..." spellcheck="false" type="search" class="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div class="search-result-container no-result"><div class="search-result-icon"><i class="fa fa-spinner fa-pulse fa-5x"></i></div></div></div></div></div><div class="toggle sidebar-toggle"><span class="toggle-line"></span> <span class="toggle-line"></span> <span class="toggle-line"></span></div><aside class="sidebar"><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class="sidebar-nav"><li class="sidebar-nav-toc">文章目录</li><li class="sidebar-nav-overview">站点概览</li></ul><section class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A4%E8%AF%81%E4%B8%8E%E6%9D%83%E9%99%90%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">1.</span> <span class="nav-text">认证与权限的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DRF%E8%87%AA%E5%B8%A6%E6%9D%83%E9%99%90%E7%B1%BB"><span class="nav-number">2.</span> <span class="nav-text">DRF自带权限类</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#AllowAny"><span class="nav-number">2.1.</span> <span class="nav-text">AllowAny</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IsAuthenticated"><span class="nav-number">2.2.</span> <span class="nav-text">IsAuthenticated</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IsAdminUser"><span class="nav-number">2.3.</span> <span class="nav-text">IsAdminUser</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IsAuthenticatedOrReadOnly"><span class="nav-number">2.4.</span> <span class="nav-text">IsAuthenticatedOrReadOnly</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DjangoModelPermissions"><span class="nav-number">2.5.</span> <span class="nav-text">DjangoModelPermissions</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DjangoModelPermissionsOrAnonReadOnly"><span class="nav-number">2.6.</span> <span class="nav-text">DjangoModelPermissionsOrAnonReadOnly</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DjangoObjectPermissions"><span class="nav-number">2.7.</span> <span class="nav-text">DjangoObjectPermissions</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E8%AE%BE%E7%BD%AE%E6%9D%83%E9%99%90"><span class="nav-number">3.</span> <span class="nav-text">如何设置权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9D%83%E9%99%90"><span class="nav-number">4.</span> <span class="nav-text">自定义权限</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-number">5.</span> <span class="nav-text">示例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%99%BB%E5%BD%95%E6%B3%A8%E9%94%80"><span class="nav-number">5.0.1.</span> <span class="nav-text">登录注销</span></a></li></ol></li></ol><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%BB%E7%BB%93"><span class="nav-number">6.</span> <span class="nav-text">总结</span></a></li></div></section><section class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" alt="托小尼" src="/images/avatar.jpg"><p class="site-author-name" itemprop="name">托小尼</p><div class="site-description" itemprop="description"></div></div><div class="site-state-wrap animated"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">218</span> <span class="site-state-item-name">日志</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">30</span> <span class="site-state-item-name">分类</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">1439</span> <span class="site-state-item-name">标签</span></a></div></nav></div><div class="links-of-author animated"><span class="links-of-author-item"><span class="exturl" data-url="aHR0cDovL3dwYS5xcS5jb20vbXNncmQ/dj0zJnVpbj02NDY1NDc5ODkmc2l0ZT1xcSZtZW51PXllcw==" title="QQ → http:&#x2F;&#x2F;wpa.qq.com&#x2F;msgrd?v&#x3D;3&amp;uin&#x3D;646547989&amp;site&#x3D;qq&amp;menu&#x3D;yes"><i class="fab fa-qq fa-fw"></i>QQ</span> </span><span class="links-of-author-item"><span class="exturl" data-url="bWFpbHRvOnRvbnl5dUB2aXAucXEuY29t" title="E-Mail → mailto:tonyyu@vip.qq.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</span></span></div></section></div></aside><div class="sidebar-dimmer"></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><div class="reading-progress-bar"></div><span class="exturl github-corner" data-url="aHR0cHM6Ly9naXRodWIuY29tL3Rvbnl1MjAxOQ==" title="关注我" aria-label="关注我"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></span><noscript><div class="noscript-warning">Theme NexT works best with JavaScript enabled</div></noscript><div class="main-inner post posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://www.diandian100.cn/30a313c8.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="托小尼"><meta itemprop="description" content=""></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="点点开发技术分享"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">手摸手，带你用Django REST Framework撸接口系列七(权限篇)</h1><div class="post-meta-container"><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-calendar"></i> </span><span class="post-meta-item-text">发表于</span> <time title="创建时间：2021-03-25 11:12:52 / 修改时间：16:01:07" itemprop="dateCreated datePublished" datetime="2021-03-25T11:12:52+08:00">2021-03-25</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-folder"></i> </span><span class="post-meta-item-text">分类于</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/rd/" itemprop="url" rel="index"><span itemprop="name">rd</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/rd/python/" itemprop="url" rel="index"><span itemprop="name">python</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/rd/python/django/" itemprop="url" rel="index"><span itemprop="name">django</span></a> </span>， <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/rd/python/django/drf/" itemprop="url" rel="index"><span itemprop="name">drf</span></a> </span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="far fa-comment"></i> </span><span class="post-meta-item-text">Changyan：</span> <a title="changyan" href="/30a313c8.html#SOHUCS" itemprop="discussionUrl"><span id="changyan_count_unit" class="post-comments-count hc-comment-count" data-xid="30a313c8.html" itemprop="commentCount"></span></a></span></div><div class="post-meta"><span class="post-meta-item" title="本文字数"><span class="post-meta-item-icon"><i class="far fa-file-word"></i> </span><span class="post-meta-item-text">本文字数：</span> <span>7.1k</span> </span><span class="post-meta-item" title="阅读时长"><span class="post-meta-item-icon"><i class="far fa-clock"></i> </span><span class="post-meta-item-text">阅读时长 &asymp;</span> <span>6 分钟</span></span></div></div></header><div class="post-body" itemprop="articleBody"><p>身份验证或身份识别本身通常不足以获取信息或代码的访问权限。因此，请求访问的实体必须具有授权；权限控制可以限制用户对于视图的访问和对于具体数据对象的访问。</p><a id="more"></a><p>权限被执行的时机：</p><ul><li>在执行视图的dispatch()方法前，会先进行视图访问权限的判断</li><li>在通过get_object()获取具体对象时，会进行对象访问权限的判断</li></ul><h2 id="认证与权限的区别"><a href="#认证与权限的区别" class="headerlink" title="认证与权限的区别"></a>认证与权限的区别</h2><p>认证(Authentication)与权限(Permission)不是一回事。认证是通过用户提供的用户ID/密码组合或者Token来验证用户的身份。权限(Permission)的校验发生验证用户身份以后，是由系统根据分配权限确定用户可以访问何种资源以及对这种资源进行何种操作，这个过程也被称为授权(Authorization)。</p><p>无论是Django还是DRF, 当用户成功通过身份验证以后，系统会把已通过验证的用户对象与request请求绑定，这样一来你就可以使用<code>request.user</code>获取这个用户对象的所有信息了。</p><h2 id="DRF自带权限类"><a href="#DRF自带权限类" class="headerlink" title="DRF自带权限类"></a>DRF自带权限类</h2><h3 id="AllowAny"><a href="#AllowAny" class="headerlink" title="AllowAny"></a>AllowAny</h3><p><code>AllowAny</code>权限类将允许不受限制的访问，而<strong>不管该请求是否已通过身份验证或未经身份验证</strong>。</p><p>此权限不是严格要求的，因为你可以通过使用空列表或元组进行权限设置来获得相同的结果，但你可能会发现指定此类很有用，因为它使意图更明确。</p><h3 id="IsAuthenticated"><a href="#IsAuthenticated" class="headerlink" title="IsAuthenticated"></a>IsAuthenticated</h3><p><code>IsAuthenticated</code> 权限类将拒绝任何未经身份验证的用户的权限，并允许其他权限。 如果你希望你的API仅供注册用户访问，则此权限适用。</p><p>如果你希望你的API允许匿名用户读取权限，并且只允许对已通过身份验证的用户进行写入权限，则此权限是适合的。</p><h3 id="IsAdminUser"><a href="#IsAdminUser" class="headerlink" title="IsAdminUser"></a>IsAdminUser</h3><p>除非<code>user.is_staff</code>为<code>True</code>，否则<code>IsAdminUser</code>权限类将拒绝任何用户的权限，在这种情况下将允许权限。</p><p>如果你希望你的API只能被部分受信任的管理员访问，则此权限是适合的。</p><h3 id="IsAuthenticatedOrReadOnly"><a href="#IsAuthenticatedOrReadOnly" class="headerlink" title="IsAuthenticatedOrReadOnly"></a>IsAuthenticatedOrReadOnly</h3><p><code>IsAuthenticatedOrReadOnly</code> 将允许经过身份验证的用户执行任何请求。只有当请求方法是“安全”方法（<code>GET</code>, <code>HEAD</code> 或 <code>OPTIONS</code>）之一时，才允许未经授权的用户请求。</p><p>如果你希望你的API允许匿名用户读取权限，并且只允许对已通过身份验证的用户进行写入权限，则此权限是适合的。</p><h3 id="DjangoModelPermissions"><a href="#DjangoModelPermissions" class="headerlink" title="DjangoModelPermissions"></a>DjangoModelPermissions</h3><p>此权限类与Django的标准<code>django.contrib.auth</code>model权限相关联。此权限只能应用于具有<code>.queryset</code>属性集的视图。只有在用户<em>通过身份验证</em>并分配了<em>相关模型权限</em>的情况下，才会被授予权限。</p><ul><li><code>POST</code> 请求要求用户对模型具有<code>添加</code>权限。</li><li><code>PUT</code> 和 <code>PATCH</code> 请求要求用户对模型具有<code>更改</code>权限。</li><li><code>DELETE</code> 请求想要求用户对模型具有<code>删除</code>权限。</li></ul><p>默认行为也可以被重写以支持自定义模型权限。例如，你可能希望为<code>GET</code>请求包含一个<code>查看</code>模型的权限。</p><p>要使用自定义模型权限，请覆盖<code>DjangoModelPermissions</code>并设置<code>.perms_map</code>属性。有关详细信息，请参阅源代码。</p><p><strong>使用不包含<code>queryset</code>属性的视图。</strong></p><p>如果你在重写了<code>get_queryset()</code>方法的视图中使用此权限，这个视图上可能没有<code>queryset</code>属性。在这种情况下，我们建议还使用保护性的查询集来标记视图，以便此类可以确定所需的权限。比如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">queryset = User.objects.none()  <span class="comment"># DjangoModelPermissions需要一个queryset</span></span><br></pre></td></tr></table></figure><h3 id="DjangoModelPermissionsOrAnonReadOnly"><a href="#DjangoModelPermissionsOrAnonReadOnly" class="headerlink" title="DjangoModelPermissionsOrAnonReadOnly"></a>DjangoModelPermissionsOrAnonReadOnly</h3><p>与<code>DjangoModelPermissions</code>类似，但也允许未经身份验证的用户具有对API的只读访问权限。</p><h3 id="DjangoObjectPermissions"><a href="#DjangoObjectPermissions" class="headerlink" title="DjangoObjectPermissions"></a>DjangoObjectPermissions</h3><p>此权限类与Django的标准对象权限框架相关联，该框架允许模型上的每个对象的权限。为了使用此权限类，你还需要添加支持对象级权限的权限后端，例如django-guardian。</p><p>与<code>DjangoModelPermissions</code>一样，此权限只能应用于具有<code>.queryset</code>属性或<code>.get_queryset()</code>方法的视图。只有在用户通过身份验证并且具有<em>相关的每个对象权限</em>和相关的<em>模型权限</em>后，才会被授予权限。</p><ul><li><code>POST</code> 请求要求用户对模型实例具有<code>添加</code>权限。</li><li><code>PUT</code> 和<code>PATCH</code> 请求要求用户对模型示例具有<code>更改</code>权限。</li><li><code>DELETE</code> 请求要求用户对模型示例具有<code>删除</code>权限。</li></ul><p>请注意，<code>DjangoObjectPermissions</code> <strong>不需要</strong> <code>django-guardian</code>软件包，并且应当同样支持其他对象级别的后端。</p><p>与<code>DjangoModelPermissions</code>一样，你可以通过重写<code>DjangoObjectPermissions</code>并设置<code>.perms_map</code>属性来使用自定义模型权限。有关详细信息，请参阅源代码。</p><hr><p><strong>注意</strong>：如果你需要<code>GET</code>,<code>HEAD</code>和<code>OPTIONS</code>请求的对象级<code>视图</code>权限，那么你还需要考虑添加<code>DjangoObjectPermissionsFilter</code>类，以确保相应API只返回包含用户具有适当视图权限的对象的结果。</p><h2 id="如何设置权限"><a href="#如何设置权限" class="headerlink" title="如何设置权限"></a>如何设置权限</h2><p>默认权限策略可以使用<code>DEFAULT_PERMISSION_CLASSES</code>设置进行全局设置。比如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">REST_FRAMEWORK = &#123;</span><br><span class="line">    <span class="string">&#x27;DEFAULT_PERMISSION_CLASSES&#x27;</span>: (</span><br><span class="line">        <span class="string">&#x27;rest_framework.permissions.IsAuthenticated&#x27;</span>,</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>如果未指定，则此设置默认为允许无限制访问：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&#x27;DEFAULT_PERMISSION_CLASSES&#x27;</span>: (</span><br><span class="line">   <span class="string">&#x27;rest_framework.permissions.AllowAny&#x27;</span>,</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>你还可以使用基于<code>APIView</code>类的视图在每个视图或每个视图集的基础上设置身份验证策略。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> IsAuthenticated</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> rest_framework.views <span class="keyword">import</span> APIView</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ExampleView</span>(<span class="params">APIView</span>):</span></span><br><span class="line">    permission_classes = (IsAuthenticated,)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get</span>(<span class="params">self, request, format=None</span>):</span></span><br><span class="line">        content = &#123;</span><br><span class="line">            <span class="string">&#x27;status&#x27;</span>: <span class="string">&#x27;request was permitted&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> Response(content)</span><br></pre></td></tr></table></figure><p>或者你可以使用<code>@api_view</code>装饰器装饰基于函数的视图。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.decorators <span class="keyword">import</span> api_view, permission_classes</span><br><span class="line"><span class="keyword">from</span> rest_framework.permissions <span class="keyword">import</span> IsAuthenticated</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"></span><br><span class="line"><span class="meta">@api_view([&#x27;GET&#x27;])</span></span><br><span class="line"><span class="meta">@permission_classes((IsAuthenticated, ))</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">example_view</span>(<span class="params">request, format=None</span>):</span></span><br><span class="line">    content = &#123;</span><br><span class="line">        <span class="string">&#x27;status&#x27;</span>: <span class="string">&#x27;request was permitted&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> Response(content)</span><br></pre></td></tr></table></figure><p><strong>注意：</strong> 当你通过类属性或装饰器设置新的权限类时，你要通知视图忽略__settings.py__文件中设置的默认列表。</p><h2 id="自定义权限"><a href="#自定义权限" class="headerlink" title="自定义权限"></a>自定义权限</h2><p>大多数情况下，默认的权限类不能满足我们的要求，这时就需要自定义权限了。自定义的权限类需要继承<code>BasePermission</code>类并根据需求重写<code>has_permission(self,request,view)</code>和<code>has_object_permission(self,request, view, obj)</code>方法。你还可以通过<code>message</code>自定义返回的错误信息。</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> permissions</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CustomerPermission</span>(<span class="params">permissions.BasePermission</span>):</span></span><br><span class="line">    <span class="comment"># message = &#x27;You have not permissions to do this.&#x27;</span></span><br><span class="line">    <span class="comment"># 或</span></span><br><span class="line">		message = &#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&quot;error&quot;</span>: <span class="string">&quot;自定义的错误提示信息&quot;</span>&#125;</span><br><span class="line">    <span class="comment"># 视图级权限</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_permission</span>(<span class="params">self, request, view</span>):</span></span><br><span class="line">         ...</span><br><span class="line">    <span class="comment"># 对象级权限(当视图级权限通过后才会执行对象级权限)</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_object_permission</span>(<span class="params">self, request, view, obj</span>):</span></span><br><span class="line">         ...</span><br></pre></td></tr></table></figure><p>如果请求被授予访问权限，方法应该返回<code>True</code>，否则返回<code>False</code>。</p><p>如果你需要测试请求是读取操作还是写入操作，则应该根据常量<code>SAFE_METHODS</code>检查请求方法，<code>SAFE_METHODS</code>是包含<code>&#39;GET&#39;</code>, <code>&#39;OPTIONS&#39;</code>和<code>&#39;HEAD&#39;</code>的元组。例如：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> request.method <span class="keyword">in</span> permissions.SAFE_METHODS:</span><br><span class="line">    <span class="comment"># 检查只读请求的权限</span></span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    <span class="comment"># 检查读取请求的权限</span></span><br></pre></td></tr></table></figure><p><strong>注意</strong>: 仅当视图级<code>has_permission</code>检查已通过时，才会调用实例级<code>has_object_permission</code>方法。另请注意，为了运行实例级别检查，视图代码应显式调用<code>.check_object_permissions(request, obj)</code>。如果你使用的是通用视图，那么默认会为你处理。</p><hr><p>如果校验失败，自定义权限将引发<code>PermissionDenied</code>异常。要更改与异常关联的错误消息，请直接在自定义权限上实现消息属性。否则将使用<code>PermissionDenied</code>的<code>default_detail</code>属性。</p><h2 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h2><p>还是以我们的文章模型为例</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Article</span>(<span class="params">models.Model</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章模型&quot;&quot;&quot;</span></span><br><span class="line">    <span class="comment"># 文章状态</span></span><br><span class="line">    STATUS_CHOICES = (</span><br><span class="line">        (<span class="string">&#x27;p&#x27;</span>, <span class="string">&#x27;发布&#x27;</span>),</span><br><span class="line">        (<span class="string">&#x27;d&#x27;</span>, <span class="string">&#x27;草稿&#x27;</span>),</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    title = models.CharField(verbose_name=<span class="string">&#x27;标题&#x27;</span>, max_length=<span class="number">90</span>, db_index=<span class="literal">True</span>)</span><br><span class="line">    body = models.TextField(verbose_name=<span class="string">&#x27;内容&#x27;</span>, blank=<span class="literal">True</span>)</span><br><span class="line">    author = models.ForeignKey(User, verbose_name=<span class="string">&#x27;作者&#x27;</span>, on_delete=models.CASCADE, related_name=<span class="string">&#x27;articles&#x27;</span>)</span><br><span class="line">    status = models.CharField(verbose_name=<span class="string">&#x27;状态&#x27;</span>, max_length=<span class="number">1</span>, choices=STATUS_CHOICES, default=<span class="string">&#x27;s&#x27;</span>, null=<span class="literal">True</span>, blank=<span class="literal">True</span>)</span><br><span class="line">    created_time = models.DateTimeField(verbose_name=<span class="string">&#x27;发布日期&#x27;</span>, auto_now_add=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="string">&quot;&quot;&quot;返回文章标题&quot;&quot;&quot;</span></span><br><span class="line">        <span class="keyword">return</span> self.title</span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        <span class="comment"># 排序，主键倒序</span></span><br><span class="line">        ordering = [<span class="string">&#x27;-pk&#x27;</span>]</span><br><span class="line">        verbose_name = <span class="string">&quot;文章&quot;</span></span><br><span class="line">        verbose_name_plural = verbose_name</span><br><span class="line">        </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span>(<span class="params">serializers.ModelSerializer</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章序列化类&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line">        model = Article</span><br><span class="line">        fields = <span class="string">&quot;__all__&quot;</span></span><br><span class="line">        read_only_fields = (<span class="string">&#x27;id&#x27;</span>, <span class="string">&#x27;created_time&#x27;</span>, <span class="string">&#x27;author&#x27;</span>)</span><br><span class="line">        <span class="comment"># depth = 1</span></span><br></pre></td></tr></table></figure><p>我们只希望发布该文章的用户才能够进行文章修改删除操作。</p><p>定义自定义权限类</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> permissions</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IsOwnerArticleCanHandle</span>(<span class="params">permissions.BasePermission</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章创建者才可以编辑&quot;&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_object_permission</span>(<span class="params">self, request, view, obj</span>):</span></span><br><span class="line">        <span class="comment"># 非文章创建者可以允许get，head和options请求,直接放行。</span></span><br><span class="line">        <span class="keyword">if</span> request.method <span class="keyword">in</span> permissions.SAFE_METHODS:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">        <span class="comment"># 如果文章的作者等于当前用户则可以进行任何操作</span></span><br><span class="line">        <span class="keyword">return</span> obj.author == request.user</span><br></pre></td></tr></table></figure><p>视图类使用该权限</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleView</span>(<span class="params">viewsets.ModelViewSet</span>):</span></span><br><span class="line">    <span class="string">&quot;&quot;&quot;文章列表视图类&quot;&quot;&quot;</span></span><br><span class="line">    queryset = Article.objects.all()</span><br><span class="line">    serializer_class = ArticleSerializer</span><br><span class="line">    <span class="comment"># 文章作者才能修改该文章</span></span><br><span class="line">    permission_classes = (IsOwnerArticleCanHandle, )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">perform_create</span>(<span class="params">self, serializer</span>):</span></span><br><span class="line">        <span class="comment"># 将request.user与author绑定。调用create方法时执行如下函数。</span></span><br><span class="line">        serializer.save(author=self.request.user)</span><br></pre></td></tr></table></figure><p>此时我们登录用户，访问一个自己发表的文章，可以看到，文章作者可以直接在这个页面进行修改删除操作。</p><p><img data-src="https://img.diandian100.cn/20210325131557.png"></p><p>访问非自己发表的文章试试，修改删除项全都不见了</p><p><img data-src="https://img.diandian100.cn/20210325131707.png"></p><h4 id="登录注销"><a href="#登录注销" class="headerlink" title="登录注销"></a>登录注销</h4><p>以上在我们使用Django REST framework自带响应器时，我们如何切换登录注销呢？</p><p><img data-src="https://img.diandian100.cn/20210325133027.png"></p><p>这就需要门将登录页面添加到路由中了</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 用户登录页面</span></span><br><span class="line">path(<span class="string">&#x27;api-auth/&#x27;</span>, include(<span class="string">&#x27;rest_framework.urls&#x27;</span>)),</span><br></pre></td></tr></table></figure><p>然后访问<code>api-auth/login/</code>你就可以看到专门的DRF的登录页面了，如下所示：</p><p><img data-src="https://img.diandian100.cn/20210325133306.png"></p><p>你也可以这样定义message</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IsMember</span>(<span class="params">permissions.BasePermission</span>):</span></span><br><span class="line">    <span class="comment"># 无权限返回消息</span></span><br><span class="line">    message = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_permission</span>(<span class="params">self, request, view</span>):</span></span><br><span class="line">        self.message = &#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&quot;error&quot;</span>: <span class="string">&quot;你不不是普通管理员&quot;</span>&#125;</span><br><span class="line">        <span class="keyword">if</span> request.user.id &lt; <span class="number">2</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">has_object_permission</span>(<span class="params">self, request, view, obj</span>):</span></span><br><span class="line">        self.message = &#123;<span class="string">&quot;status&quot;</span>: <span class="literal">False</span>, <span class="string">&quot;error&quot;</span>: <span class="string">&quot;你只能访问id小于10的文章&quot;</span>&#125;</span><br><span class="line">        <span class="keyword">if</span> obj.id &gt; <span class="number">10</span>:</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">return</span> <span class="literal">True</span></span><br></pre></td></tr></table></figure><p>返回的结果就是：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;False&quot;</span>,</span><br><span class="line">    <span class="string">&quot;error&quot;</span>: <span class="string">&quot;你不提示普通管理员&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="string">&quot;status&quot;</span>: <span class="string">&quot;False&quot;</span>,</span><br><span class="line">    <span class="string">&quot;error&quot;</span>: <span class="string">&quot;你只能访问id小于10的文章&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>介绍了如何使用Django REST Framework自带的权限类，如何自定义权限类及如何配置权限类实现了对用户访问API资源进行控制。本文中我们使用了默认的基于session机制的用户认证机制，下篇中我们将重点介绍DRF的认证机制，并把重点放在Token认证上。</p></div><div class="popular-posts-header">相关文章</div><ul class="popular-posts"><li class="popular-posts-item"><div class="popular-posts-title"><a href="/c33bd528.html" rel="bookmark">手摸手，带你用Django REST Framework撸接口系列三(视图篇)</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/717404f2.html" rel="bookmark">Django REST Framework系列</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/7765f48b.html" rel="bookmark">手摸手，带你用Django REST Framework撸接口系列二(序列化器篇)</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/d615aa51.html" rel="bookmark">手摸手，带你用Django REST Framework撸接口系列九(过滤篇)</a></div></li><li class="popular-posts-item"><div class="popular-posts-title"><a href="/76b1e536.html" rel="bookmark">手摸手，带你用Django REST Framework撸接口系列八(限流篇)</a></div></li></ul><footer class="post-footer"><div class="reward-container"><div>打赏个鸡腿</div><button onclick='document.querySelector(".post-reward").classList.toggle("active")'>赞赏</button><div class="post-reward"><div><img src="/images/wechatpay.jpg" alt="托小尼 微信"> <span>微信</span></div><div><img src="/images/alipay.jpg" alt="托小尼 支付宝"> <span>支付宝</span></div></div></div><div class="post-tags"><a href="/tags/%E6%9D%83%E9%99%90/" rel="tag"><i class="fa fa-tag"></i> 权限</a> <a href="/tags/%E8%AE%A4%E8%AF%81/" rel="tag"><i class="fa fa-tag"></i> 认证</a> <a href="/tags/%E9%A2%91%E7%8E%87/" rel="tag"><i class="fa fa-tag"></i> 频率</a> <a href="/tags/Django-REST-Framework%E7%B3%BB%E5%88%97/" rel="tag"><i class="fa fa-tag"></i> Django REST Framework系列</a> <a href="/tags/%E5%88%86%E9%A1%B5/" rel="tag"><i class="fa fa-tag"></i> 分页</a> <a href="/tags/django/" rel="tag"><i class="fa fa-tag"></i> django</a> <a href="/tags/%E6%8E%92%E5%BA%8F/" rel="tag"><i class="fa fa-tag"></i> 排序</a> <a href="/tags/%E9%80%9A%E7%94%A8%E8%A7%86%E5%9B%BE/" rel="tag"><i class="fa fa-tag"></i> 通用视图</a> <a href="/tags/rest/" rel="tag"><i class="fa fa-tag"></i> rest</a> <a href="/tags/restframework/" rel="tag"><i class="fa fa-tag"></i> restframework</a> <a href="/tags/rest-framework/" rel="tag"><i class="fa fa-tag"></i> rest_framework</a> <a href="/tags/djangorestframework/" rel="tag"><i class="fa fa-tag"></i> djangorestframework</a> <a href="/tags/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/" rel="tag"><i class="fa fa-tag"></i> 前后端分离</a> <a href="/tags/%E5%89%8D%E5%90%8E%E7%AB%AF%E4%B8%8D%E5%88%86%E7%A6%BB/" rel="tag"><i class="fa fa-tag"></i> 前后端不分离</a> <a href="/tags/restful/" rel="tag"><i class="fa fa-tag"></i> restful</a> <a href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96/" rel="tag"><i class="fa fa-tag"></i> 序列化</a> <a href="/tags/%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96/" rel="tag"><i class="fa fa-tag"></i> 反序列化</a> <a href="/tags/serializer/" rel="tag"><i class="fa fa-tag"></i> serializer</a> <a href="/tags/%E5%BA%8F%E5%88%97%E5%8C%96%E5%99%A8/" rel="tag"><i class="fa fa-tag"></i> 序列化器</a> <a href="/tags/%E8%A7%86%E5%9B%BE/" rel="tag"><i class="fa fa-tag"></i> 视图</a> <a href="/tags/%E5%93%8D%E5%BA%94%E5%99%A8/" rel="tag"><i class="fa fa-tag"></i> 响应器</a> <a href="/tags/%E8%B7%AF%E7%94%B1%E7%BB%84%E4%BB%B6/" rel="tag"><i class="fa fa-tag"></i> 路由组件</a> <a href="/tags/%E9%99%90%E6%B5%81/" rel="tag"><i class="fa fa-tag"></i> 限流</a> <a href="/tags/%E8%BF%87%E6%BB%A4/" rel="tag"><i class="fa fa-tag"></i> 过滤</a> <a href="/tags/%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86/" rel="tag"><i class="fa fa-tag"></i> 异常处理</a> <a href="/tags/%E7%94%9F%E6%88%90%E6%8E%A5%E5%8F%A3/" rel="tag"><i class="fa fa-tag"></i> 生成接口</a> <a href="/tags/drf%E8%A7%86%E5%9B%BE/" rel="tag"><i class="fa fa-tag"></i> drf视图</a> <a href="/tags/%E8%A7%86%E5%9B%BE%E9%9B%86/" rel="tag"><i class="fa fa-tag"></i> 视图集</a> <a href="/tags/mixins/" rel="tag"><i class="fa fa-tag"></i> mixins</a> <a href="/tags/ModelViewSet/" rel="tag"><i class="fa fa-tag"></i> ModelViewSet</a> <a href="/tags/GenericAPIView/" rel="tag"><i class="fa fa-tag"></i> GenericAPIView</a> <a href="/tags/drf%E8%AF%B7%E6%B1%82/" rel="tag"><i class="fa fa-tag"></i> drf请求</a> <a href="/tags/drf%E5%93%8D%E5%BA%94/" rel="tag"><i class="fa fa-tag"></i> drf响应</a> <a href="/tags/IsAdminUser/" rel="tag"><i class="fa fa-tag"></i> IsAdminUser</a> <a href="/tags/AllowAny/" rel="tag"><i class="fa fa-tag"></i> AllowAny</a> <a href="/tags/IsAuthenticatedOrReadOnly/" rel="tag"><i class="fa fa-tag"></i> IsAuthenticatedOrReadOnly</a> <a href="/tags/%E8%AE%BE%E7%BD%AE%E6%9D%83%E9%99%90/" rel="tag"><i class="fa fa-tag"></i> 设置权限</a> <a href="/tags/%E8%87%AA%E5%AE%9A%E4%B9%89%E6%9D%83%E9%99%90/" rel="tag"><i class="fa fa-tag"></i> 自定义权限</a> <a href="/tags/has-object-permission/" rel="tag"><i class="fa fa-tag"></i> has_object_permission</a> <a href="/tags/has-permission/" rel="tag"><i class="fa fa-tag"></i> has_permission</a> <a href="/tags/%E8%A7%86%E5%9B%BE%E7%BA%A7%E6%9D%83%E9%99%90/" rel="tag"><i class="fa fa-tag"></i> 视图级权限</a> <a href="/tags/%E5%AF%B9%E8%B1%A1%E7%BA%A7%E6%9D%83%E9%99%90/" rel="tag"><i class="fa fa-tag"></i> 对象级权限</a> <a href="/tags/%E5%AE%9E%E4%BE%8B%E7%BA%A7%E6%9D%83%E9%99%90/" rel="tag"><i class="fa fa-tag"></i> 实例级权限</a></div><div class="post-nav"><div class="post-nav-item"><a href="/ca0a3efe.html" rel="prev" title="python中使用faker构造数据"><i class="fa fa-chevron-left"></i> python中使用faker构造数据</a></div><div class="post-nav-item"><a href="/cfeb81d4.html" rel="next" title="手摸手，带你用Django REST Framework撸接口系列六(认证篇)">手摸手，带你用Django REST Framework撸接口系列六(认证篇) <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="comments"><div id="SOHUCS"></div></div><script>window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div></main><footer class="footer"><div class="footer-inner"><div class="beian"><span class="exturl" data-url="aHR0cHM6Ly9iZWlhbi5taWl0Lmdvdi5jbg==">豫ICP备17028303号-1 </span><img src="http://www.beian.gov.cn/portal/download" style="display:inline-block"><span class="exturl" data-url="aHR0cDovL3d3dy5iZWlhbi5nb3YuY24vcG9ydGFsL3JlZ2lzdGVyU3lzdGVtSW5mbz9yZWNvcmRjb2RlPTE3MDI4MzAz">豫公网安备 41102402000095号</span></div><div class="copyright">&copy; <span itemprop="copyrightYear">2021</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Tony Yu</span></div><div class="wordcount"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-chart-line"></i> </span><span title="站点总字数">1.5m</span> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-coffee"></i> </span><span title="站点阅读时长">22:14</span></span></div></div></footer><script src="//cdn.jsdelivr.net/npm/animejs@3.2.0/lib/anime.min.js"></script><script src="//cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script><script src="//cdn.jsdelivr.net/npm/lozad@1.15.0/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>NexT.utils.loadComments('#SOHUCS', () => {
    NexT.utils.getScript('https://changyan.sohu.com/upload/changyan.js', () => {
      window.changyan.api.config({
        appid: 'cyu11Umgd',
        conf : '0f296687f6a61e82028fd7c6ddf32ab9'
      });
    });
  });</script><script src="https://assets.changyan.sohu.com/upload/plugins/plugins.count.js"></script></body></html>